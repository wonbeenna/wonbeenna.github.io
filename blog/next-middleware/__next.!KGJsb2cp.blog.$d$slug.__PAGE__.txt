1:"$Sreact.fragment"
80:I[63528,["/_next/static/chunks/bd5191c46165ed30.js","/_next/static/chunks/a02819add99e1f50.js","/_next/static/chunks/2e8e74a7f6e9fa16.js"],""]
81:I[99322,["/_next/static/chunks/bd5191c46165ed30.js","/_next/static/chunks/a02819add99e1f50.js","/_next/static/chunks/2e8e74a7f6e9fa16.js"],"default"]
82:I[85934,["/_next/static/chunks/dfc43047cef5dc3a.js","/_next/static/chunks/7f2f0a4550be60f7.js"],"OutletBoundary"]
83:"$Sreact.suspense"
:HL["/_next/static/chunks/e25f9df6635f12b2.css","style"]
0:{"buildId":"_oCMkYfXmE_iub09qx8c_","rsc":["$","$1","c",{"children":[[[["$","section",null,{"className":"bg-bannerBg dark:bg-darkBg02","children":["$","div",null,{"className":"mx-auto my-0 max-w-[970px] px-[16px] py-16","children":[["$","div",null,{"className":"mb-2 text-sm text-gray700","children":["$","time",null,{"dateTime":"2023-02-22T00:00:00.000Z","children":"22. February 2023"}]}],["$","h1",null,{"className":"inline bg-clip-text font-extrabold tracking-tight [-webkit-box-decoration-break:clone] [-webkit-text-fill-color:transparent] [box-decoration-break:clone] bg-[linear-gradient(108deg,theme(colors.primaryGradient03),theme(colors.primaryGradient02)_40%,theme(colors.primaryColor)_80%)] text-6xl","children":"Next.js middleware와 getServerSideProps"}],["$","p",null,{"className":"mt-4 text-lg text-gray900 dark:text-gray300","children":"세션방식의 로그인 인증, middleware와 getServerSideProps를 사용해 구현한 기록"}]]}]}],["$","svg",null,{"aria-hidden":"true","viewBox":"0 0 1440 120","preserveAspectRatio":"none","className":"block h-16 w-full text-bannerBg dark:text-darkBg02","children":["$","path",null,{"fill":"currentColor","d":"M0,64L60,69.3C120,75,240,85,360,80C480,75,600,53,720,64C840,75,960,117,1080,117.3C1200,117,1320,75,1380,53.3L1440,32L1440,0L1380,0C1320,0,1200,0,1080,0C960,0,840,0,720,0C600,0,480,0,360,0C240,0,120,0,60,0L0,0Z"}]}]],["$","section",null,{"className":"mx-auto my-0 max-w-[970px] p-4 pb-40","children":["$","div",null,{"className":"prose flex w-full max-w-none flex-col","children":[["$","section",null,{"children":[["$","p",null,{"children":"인증방식에는 대표적으로 두가지가 있다."}],"\n",["$","p",null,{"children":"제일 많이 사용하는 세션 방식과 토큰 방식"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"인증 -> 유저가 누구인지 확인"}],"\n",["$","li",null,{"children":"인가 -> 유저의 요청에 대한 권한을 확인하고 허가"}],"\n"]}],"\n",["$","hr",null,{}],"\n",["$","h3",null,{"children":"세션방식"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"로그인 요청 -> 서버에서 세션 key-value로 구분해 정보를 저장"}],"\n",["$","li",null,{"children":"서버 -> 클라이언트 측으로 http header cookie에 세션 id를 담아 전달"}],"\n",["$","li",null,{"children":"클라이언트 쪽에서 response값으로 cookie에 저장된 세션을 확인할 수 있는데, 브라우저에 저장"}],"\n"]}],"\n",["$","p",null,{"children":"세션 방식은 HTTP요청이 노출되어도 세션 자체에는 의미있는 값이 없기 때문에 보안상 유리할 수 있다."}],"\n",["$","p",null,{"children":"각 사용자마다 고유한 id를 갖고 있기 때문에 매번 회원정보를 확인할 필요가 없다."}],"\n",["$","p",null,{"children":"서버에 따로 세션 저장소를 두기 때문에 사용자가 많아지면 서버에 부담이 간다."}],"\n",["$","p",null,{"children":"각 브라우저들은 보안상의 이슈로 서버와 프론트간의 도메인이 같아야 쿠키가 전달된다."}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["\n",["$","p",null,{"children":["프론트 측에서는 Axios 사용시 ",["$","code",null,{"children":"withCredentials: true"}],"설정을 통해 서로 다른 도메인간의 요청에도 credential 정보를 받을 것인지 설정해야 한다."]}],"\n"]}],"\n",["$","li",null,{"children":["\n",["$","p",null,{"children":"서버 측에서는 응답 헤더의 Access-Control-Allow-Credentials 항목을 true로 설정해야 하고,\n응답 헤더의 Access-Control-Allow-Origin의 값을 와일드 카드('*') 제외하고 설정 되어야 한다."}],"\n"]}],"\n"]}],"\n",["$","hr",null,{}],"\n",["$","p",null,{"children":"우선 localhost와 서버상의 도메인이 달라 proxy 설정을 해줬다."}],"\n",["$","pre",null,{"className":"language-ts","children":["$","code",null,{"className":"language-ts code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"// pages/api/[...path].ts"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"import"}]," ",["$","span",null,{"className":"token keyword","children":"type"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," NextApiRequest",["$","span",null,{"className":"token punctuation","children":","}]," NextApiResponse ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"\"next\""}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"import"}]," httpProxyMiddleware ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"\"next-http-proxy-middleware\""}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],"$L2","$L3","$L4","$L5","$L6","$L7","$L8","$L9","$La","$Lb","$Lc","$Ld","$Le","$Lf","$L10","$L11","$L12","$L13","$L14","$L15","$L16","$L17"]}]}],"\n","$L18","\n","$L19","\n","$L1a","\n","$L1b","\n","$L1c","\n","$L1d","\n","$L1e","\n","$L1f","\n","$L20","\n","$L21","\n","$L22","\n","$L23","\n","$L24","\n","$L25","\n","$L26","\n","$L27"]}],"$L28","$L29"]}]}]],["$L2a","$L2b"],"$L2c"]}],"loading":null,"isPartial":false}
2:["$","span",null,{"className":"code-line","children":"\n"}]
3:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"export"}]," ",["$","span",null,{"className":"token keyword","children":"const"}]," config ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
4:["$","span",null,{"className":"code-line","children":["  api",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
5:["$","span",null,{"className":"code-line","children":["    externalResolver",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token boolean","children":"true"}],"\n"]}]
6:["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
7:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
8:["$","span",null,{"className":"code-line","children":"\n"}]
9:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"export"}]," ",["$","span",null,{"className":"token keyword","children":"default"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"req",["$","span",null,{"className":"token operator","children":":"}]," NextApiRequest",["$","span",null,{"className":"token punctuation","children":","}]," res",["$","span",null,{"className":"token operator","children":":"}]," NextApiResponse",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
a:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token function","children":"httpProxyMiddleware"}],["$","span",null,{"className":"token punctuation","children":"("}],"req",["$","span",null,{"className":"token punctuation","children":","}]," res",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
b:["$","span",null,{"className":"code-line","children":["        target",["$","span",null,{"className":"token operator","children":":"}]," process",["$","span",null,{"className":"token punctuation","children":"."}],"env",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token constant","children":"NEXT_PUBLIC_API_URL"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
c:["$","span",null,{"className":"code-line","children":["        changeOrigin",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token boolean","children":"true"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
d:["$","span",null,{"className":"code-line","children":["        pathRewrite",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],"\n"]}]
e:["$","span",null,{"className":"code-line","children":["          ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
f:["$","span",null,{"className":"code-line","children":["            patternStr",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"^/api/\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
10:["$","span",null,{"className":"code-line","children":["            replaceStr",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"/\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
11:["$","span",null,{"className":"code-line","children":["          ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
12:["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
13:["$","span",null,{"className":"code-line","children":["        cookieDomainRewrite",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
14:["$","span",null,{"className":"code-line","children":["          ",["$","span",null,{"className":"token string-property property","children":"\"*\""}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"localhost\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
15:["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
16:["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}]
17:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
18:["$","pre",null,{"className":"language-ts","children":["$","code",null,{"className":"language-ts code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"/** @type {import('next').NextConfig} */"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," nextConfig ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  swcMinify",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token boolean","children":"true"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  reactStrictMode",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token boolean","children":"true"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  compiler",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    styledComponents",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token boolean","children":"true"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["    removeConsole",["$","span",null,{"className":"token operator","children":":"}]," process",["$","span",null,{"className":"token punctuation","children":"."}],"env",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token constant","children":"NODE_ENV"}]," ",["$","span",null,{"className":"token operator","children":"==="}]," ",["$","span",null,{"className":"token string","children":"\"production\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"async"}]," ",["$","span",null,{"className":"token function","children":"rewrites"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"return"}]," process",["$","span",null,{"className":"token punctuation","children":"."}],"env",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token constant","children":"NODE_ENV"}]," ",["$","span",null,{"className":"token operator","children":"==="}]," ",["$","span",null,{"className":"token string","children":"\"production\""}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token operator","children":"?"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],"\n"]}],["$","span",null,{"className":"code-line","children":["          ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["            source",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"/api/:path*\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["            destination",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token template-string","children":[["$","span",null,{"className":"token template-punctuation string","children":"`"}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"$${"}],"process",["$","span",null,{"className":"token punctuation","children":"."}],"env",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token constant","children":"NEXT_PUBLIC_API_URL"}],["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"}"}]]}],["$","span",null,{"className":"token string","children":"/:path*"}],"$L2d"]}],"$L2e","\n"]}],"$L2f","$L30","$L31","$L32","$L33","$L34"]}]}]
19:["$","hr",null,{}]
1a:["$","p",null,{"children":"위 처럼 설정해 주니 서버에서 보낸 cookie가 localhost 브라우저에 잘 들어왔다."}]
1b:["$","p",null,{"children":"여기서 고민했던 부분이 csr환경이 아닌 next의 ssr환경인 프론트측 서버단에서는 유저인증을 어떻게 확인할 것인가 였다."}]
1c:["$","p",null,{"children":"우선 로그인 상태와 비로그인 상태에서 접근불가능한 페이지 접근시 리다이렉트를 시키는 방법으로 진행했다."}]
1d:["$","p",null,{"children":"Nextjs middleware는 root폴더에 middleware.ts 파일을 만들어 주면 페이지 라우팅 되기 전에 middleware가 자동으로 실행된다."}]
1e:["$","p",null,{"children":"Nextjs에서 지원하는 middleware는 들어오는 요청에 따라서 req, res, header를 다시 작성하거나 리디렉션 등을 수정하거나 재작성할 수 있다."}]
1f:["$","pre",null,{"className":"language-ts","children":["$","code",null,{"className":"language-ts code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"import"}]," ",["$","span",null,{"className":"token keyword","children":"type"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," NextRequest ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"\"next/server\""}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"import"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," fetchAuth",["$","span",null,{"className":"token punctuation","children":","}]," inValidateAuth",["$","span",null,{"className":"token punctuation","children":","}]," validateAuth ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"\"@/lib/validateUser\""}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," validatedUrl ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"["}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token string","children":"\"/users/sign-in\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token string","children":"\"/users/sign-up/normal\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token string","children":"\"/users/sign-up/social\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token string","children":"\"/users/sign-up/vendor\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token string","children":"\"/users/password/reset\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," inValidateUrl ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token string","children":"\"/users/my-page\""}],["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"export"}]," ",["$","span",null,{"className":"token keyword","children":"async"}]," ",["$","span",null,{"className":"token keyword","children":"function"}]," ",["$","span",null,{"className":"token function","children":"middleware"}],["$","span",null,{"className":"token punctuation","children":"("}],"req",["$","span",null,{"className":"token operator","children":":"}]," NextRequest",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," url ",["$","span",null,{"className":"token operator","children":"="}]," req",["$","span",null,{"className":"token punctuation","children":"."}],"nextUrl",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"validatedUrl","$L35","$L36","$L37","url","$L38","pathname","$L39","$L3a"," ","$L3b","\n"]}],"$L3c","$L3d","$L3e","$L3f","$L40","$L41","$L42","$L43","$L44","$L45","$L46","$L47","$L48"]}]}]
20:["$","pre",null,{"className":"language-ts","children":["$","code",null,{"className":"language-ts code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"import"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," NextRequest",["$","span",null,{"className":"token punctuation","children":","}]," NextResponse ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"\"next/server\""}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"export"}]," ",["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token function-variable function","children":"validateUser"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"req",["$","span",null,{"className":"token operator","children":":"}]," NextRequest",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token function","children":"fetch"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"url\""}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    method",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"get\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["    mode",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"cors\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["    credentials",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"same-origin\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["    headers",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token string-property property","children":"\"Content-Type\""}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"application/json\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["      cookie",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token template-string","children":[["$","span",null,{"className":"token template-punctuation string","children":"`"}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"$${"}],"req",["$","span",null,{"className":"token punctuation","children":"."}],"headers",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"get"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"cookie\""}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"}"}]]}],["$","span",null,{"className":"token template-punctuation string","children":"`"}]]}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"$L49","$L4a","\n"]}],"$L4b","$L4c","$L4d","$L4e","$L4f","$L50","$L51","$L52","$L53","$L54","$L55","$L56","$L57","$L58","$L59","$L5a","$L5b","$L5c","$L5d","$L5e","$L5f","$L60","$L61","$L62","$L63"]}]}]
21:["$","p",null,{"children":"처음에 이런식으로 미들웨어를 구현했다. matcher로 페이지단만 확인했고, 페이지 라우팅시 유저 인증에 성공하면 cookie를 통해 유저정보와 세션을 전달했다."}]
22:["$","p",null,{"children":"또 인증성공시 접근 x, 비인증시 접근 x 한 url을 확인해 리다이렉트 시키도록 했다."}]
23:["$","p",null,{"children":"처음 해봤던 작업이었고, 제대로 구현한지 확신이 들지 않아 코드리뷰를 요청했다."}]
24:["$","p",null,{"children":"middleware를 사용하지 않고 hocs를 사용해 auth를 호출하고, axios config에 headers를 전달하는 방법으로 알려주셨다."}]
25:["$","pre",null,{"className":"language-ts","children":["$","code",null,{"className":"language-ts code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"import"}]," React ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"\"react\""}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"import"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," GetServerSideProps",["$","span",null,{"className":"token punctuation","children":","}]," GetServerSidePropsContext ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"\"next\""}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"import"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," getAuth ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"\"@/models/auth\""}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"import"}]," merge ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"\"lodash/merge\""}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," validatedUrl ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"["}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token string","children":"\"/users/sign-in\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token string","children":"\"/users/sign-up/normal\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token string","children":"\"/users/sign-up/social\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token string","children":"\"/users/sign-up/vendor\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token string","children":"\"/users/password/reset\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," inValidateUrl ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"["}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token string","children":"\"/users/my-page\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token string","children":"\"/users/my-page/profile\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token string","children":"\"/users/my-page/review\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"export"}]," ","$L64"," ","$L65"," ","$L66","$L67","getServerSideProps","$L68","$L69"," GetServerSideProps","$L6a"," ","$L6b","\n"]}],"$L6c","$L6d","$L6e","$L6f","$L70","$L71","$L72","$L73","$L74","$L75","$L76","$L77","$L78","$L79","$L7a","$L7b","$L7c","$L7d","$L7e","$L7f"]}]}]
26:["$","p",null,{"children":"middleware는 nextjs에서 서버도 같이 구성해 사용하면 좋을거라고 조언을 주셨다."}]
27:["$","pre",null,{"className":"language-ts","children":["$","code",null,{"className":"language-ts code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"// page/*"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token operator","children":"..."}],["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"export"}]," ",["$","span",null,{"className":"token keyword","children":"const"}]," getServerSideProps ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"withAuth"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token operator","children":"..."}],["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}]
28:["$","article",null,{"className":"flex items-center justify-between gap-[20px] border-y-2 border-y-gray500 py-[30px]","children":[["$","div",null,{"className":"w-1/2 min-w-0 flex-1 rounded-[4px] bg-gray100 dark:bg-darkBg02 text-left","children":["$","$L80",null,{"href":"/blog/tailwindcss","className":"flex w-full flex-col px-[14px] py-[10px] no-underline","children":[["$","div",null,{"className":"text-[14px] text-gray700","children":"이전글"}],["$","h3",null,{"className":"m-0 truncate text-[16px] font-bold text-gray900","children":"Nextjs에서 tailwind 써보기"}]]}]}],["$","div",null,{"className":"w-1/2 min-w-0 flex-1 rounded-[4px] bg-gray100 dark:bg-darkBg02 text-right","children":["$","$L80",null,{"href":"/blog/browser","className":"flex w-full flex-col px-[14px] py-[10px] no-underline","children":[["$","div",null,{"className":"text-[14px] text-gray700","children":"다음글"}],["$","h3",null,{"className":"m-0 truncate text-[16px] font-bold text-gray900","children":"브라우저에 url을 검색하면?"}]]}]}]]}]
29:["$","$L81",null,{}]
2a:["$","link","0",{"rel":"stylesheet","href":"/_next/static/chunks/e25f9df6635f12b2.css","precedence":"next"}]
2b:["$","script","script-0",{"src":"/_next/static/chunks/2e8e74a7f6e9fa16.js","async":true}]
2c:["$","$L82",null,{"children":["$","$83",null,{"name":"Next.MetadataOutlet","children":"$@84"}]}]
2d:["$","span",null,{"className":"token template-punctuation string","children":"`"}]
2e:["$","span",null,{"className":"token punctuation","children":","}]
2f:["$","span",null,{"className":"code-line","children":["          ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
30:["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token punctuation","children":"]"}],"\n"]}]
31:["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
32:["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
33:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token operator","children":"..."}],["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
34:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
35:["$","span",null,{"className":"token punctuation","children":"."}]
36:["$","span",null,{"className":"token function","children":"includes"}]
37:["$","span",null,{"className":"token punctuation","children":"("}]
38:["$","span",null,{"className":"token punctuation","children":"."}]
39:["$","span",null,{"className":"token punctuation","children":")"}]
3a:["$","span",null,{"className":"token punctuation","children":")"}]
3b:["$","span",null,{"className":"token punctuation","children":"{"}]
3c:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token keyword","children":"await"}]," ",["$","span",null,{"className":"token function","children":"validateAuth"}],["$","span",null,{"className":"token punctuation","children":"("}],"req",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
3d:["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
3e:["$","span",null,{"className":"code-line","children":"\n"}]
3f:["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"inValidateUrl",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"includes"}],["$","span",null,{"className":"token punctuation","children":"("}],"url",["$","span",null,{"className":"token punctuation","children":"."}],"pathname",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
40:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token keyword","children":"await"}]," ",["$","span",null,{"className":"token function","children":"inValidateAuth"}],["$","span",null,{"className":"token punctuation","children":"("}],"req",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
41:["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
42:["$","span",null,{"className":"code-line","children":"\n"}]
43:["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token keyword","children":"await"}]," ",["$","span",null,{"className":"token function","children":"fetchAuth"}],["$","span",null,{"className":"token punctuation","children":"("}],"req",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
44:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
45:["$","span",null,{"className":"code-line","children":"\n"}]
46:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"export"}]," ",["$","span",null,{"className":"token keyword","children":"const"}]," config ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
47:["$","span",null,{"className":"code-line","children":["  matcher",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token string","children":"\"/((?!api|_next/static|_next/image|favicon.ico|assets).*)\""}],["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
48:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
49:["$","span",null,{"className":"token punctuation","children":")"}]
4a:["$","span",null,{"className":"token punctuation","children":";"}]
4b:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
4c:["$","span",null,{"className":"code-line","children":"\n"}]
4d:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token operator","children":"..."}],["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
4e:["$","span",null,{"className":"code-line","children":"\n"}]
4f:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"export"}]," ",["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token function-variable function","children":"fetchAuth"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"async"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"req",["$","span",null,{"className":"token operator","children":":"}]," NextRequest",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
50:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"try"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
51:["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"const"}]," res ",["$","span",null,{"className":"token operator","children":"="}]," NextResponse",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"next"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
52:["$","span",null,{"className":"code-line","children":"\n"}]
53:["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"const"}]," response ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"await"}]," ",["$","span",null,{"className":"token function","children":"validateUser"}],["$","span",null,{"className":"token punctuation","children":"("}],"req",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
54:["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"const"}]," data ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"await"}]," response",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"json"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
55:["$","span",null,{"className":"code-line","children":"\n"}]
56:["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"response",["$","span",null,{"className":"token punctuation","children":"."}],"ok",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
57:["$","span",null,{"className":"code-line","children":["            res",["$","span",null,{"className":"token punctuation","children":"."}],"cookies",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"set"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"user\""}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token constant","children":"JSON"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"stringify"}],["$","span",null,{"className":"token punctuation","children":"("}],"data",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
58:["$","span",null,{"className":"code-line","children":["            ",["$","span",null,{"className":"token keyword","children":"return"}]," res",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
59:["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
5a:["$","span",null,{"className":"code-line","children":"\n"}]
5b:["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"!"}],"response",["$","span",null,{"className":"token punctuation","children":"."}],"ok",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
5c:["$","span",null,{"className":"code-line","children":["            res",["$","span",null,{"className":"token punctuation","children":"."}],"cookies",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"delete"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"user\""}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
5d:["$","span",null,{"className":"code-line","children":["            res",["$","span",null,{"className":"token punctuation","children":"."}],"cookies",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"delete"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"user.sid\""}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
5e:["$","span",null,{"className":"code-line","children":["            ",["$","span",null,{"className":"token keyword","children":"return"}]," res",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
5f:["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
60:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"catch"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"e",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
61:["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"throw"}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":"Error"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"Validate Error\""}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
62:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
63:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
64:["$","span",null,{"className":"token keyword","children":"default"}]
65:["$","span",null,{"className":"token keyword","children":"function"}]
66:["$","span",null,{"className":"token function","children":"withAuth"}]
67:["$","span",null,{"className":"token punctuation","children":"("}]
68:["$","span",null,{"className":"token operator","children":"?"}]
69:["$","span",null,{"className":"token operator","children":":"}]
6a:["$","span",null,{"className":"token punctuation","children":")"}]
6b:["$","span",null,{"className":"token punctuation","children":"{"}]
6c:["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token keyword","children":"async"}]," ",["$","span",null,{"className":"token keyword","children":"function"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"context",["$","span",null,{"className":"token operator","children":":"}]," GetServerSidePropsContext",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
6d:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," url ",["$","span",null,{"className":"token operator","children":"="}]," context",["$","span",null,{"className":"token punctuation","children":"."}],"req",["$","span",null,{"className":"token punctuation","children":"."}],"url ",["$","span",null,{"className":"token keyword","children":"as"}]," ",["$","span",null,{"className":"token builtin","children":"string"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
6e:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"let"}]," user ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"null"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
6f:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"try"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
70:["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token keyword","children":"const"}]," res ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"await"}]," ",["$","span",null,{"className":"token function","children":"getAuth"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"{"}]," headers",["$","span",null,{"className":"token operator","children":":"}]," context",["$","span",null,{"className":"token punctuation","children":"."}],"req",["$","span",null,{"className":"token punctuation","children":"."}],"headers ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
71:["$","span",null,{"className":"code-line","children":["      user ",["$","span",null,{"className":"token operator","children":"="}]," res",["$","span",null,{"className":"token punctuation","children":"."}],"data",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
72:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"catch"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"e",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
73:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"inValidateUrl",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"includes"}],["$","span",null,{"className":"token punctuation","children":"("}],"url",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"&&"}]," ",["$","span",null,{"className":"token operator","children":"!"}],"user",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
74:["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
75:["$","span",null,{"className":"code-line","children":["        redirect",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
76:["$","span",null,{"className":"code-line","children":["          permanent",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token boolean","children":"false"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
77:["$","span",null,{"className":"code-line","children":["          destination",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"/users/sign-in\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
78:["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
79:["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
7a:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
7b:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token operator","children":"..."}],["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
7c:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," ret ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"await"}]," getServerSideProps",["$","span",null,{"className":"token operator","children":"?."}],["$","span",null,{"className":"token punctuation","children":"("}],"context",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
7d:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token function","children":"merge"}],["$","span",null,{"className":"token punctuation","children":"("}],"ret",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," props",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," user ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
7e:["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
7f:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
84:null
