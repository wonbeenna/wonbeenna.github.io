1:"$Sreact.fragment"
14:I[63528,["/_next/static/chunks/bd5191c46165ed30.js","/_next/static/chunks/a02819add99e1f50.js","/_next/static/chunks/5776c2b87de80c31.js"],""]
15:I[70194,["/_next/static/chunks/bd5191c46165ed30.js","/_next/static/chunks/a02819add99e1f50.js","/_next/static/chunks/5776c2b87de80c31.js"],"default"]
16:I[85934,["/_next/static/chunks/dfc43047cef5dc3a.js","/_next/static/chunks/7f2f0a4550be60f7.js"],"OutletBoundary"]
17:"$Sreact.suspense"
:HL["/_next/static/chunks/e25f9df6635f12b2.css","style"]
0:{"buildId":"LVrXQqRmfjgYkKNrsz_iv","rsc":["$","$1","c",{"children":[[[["$","section",null,{"className":"bg-bannerBg dark:bg-darkBg02","children":["$","div",null,{"className":"mx-auto my-0 max-w-[970px] px-[16px] py-16","children":[["$","div",null,{"className":"mb-2 text-sm text-gray700","children":["$","time",null,{"dateTime":"2025-11-10T00:00:00.000Z","children":"10. Nov 2025"}]}],["$","h1",null,{"className":"inline bg-clip-text font-extrabold tracking-tight [-webkit-box-decoration-break:clone] [-webkit-text-fill-color:transparent] [box-decoration-break:clone] bg-[linear-gradient(108deg,theme(colors.primaryGradient03),theme(colors.primaryGradient02)_40%,theme(colors.primaryColor)_80%)] text-6xl","children":"BFCache"}],["$","p",null,{"className":"mt-4 text-lg text-gray900 dark:text-gray300","children":"웹 브라우저의 Back-Forward Cache(BFCache)에 대해 알아보고, 이를 활용하여 웹 애플리케이션의 성능을 향상시키는 방법"}]]}]}],["$","svg",null,{"aria-hidden":"true","viewBox":"0 0 1440 120","preserveAspectRatio":"none","className":"block h-16 w-full text-bannerBg dark:text-darkBg02","children":["$","path",null,{"fill":"currentColor","d":"M0,64L60,69.3C120,75,240,85,360,80C480,75,600,53,720,64C840,75,960,117,1080,117.3C1200,117,1320,75,1380,53.3L1440,32L1440,0L1380,0C1320,0,1200,0,1080,0C960,0,840,0,720,0C600,0,480,0,360,0C240,0,120,0,60,0L0,0Z"}]}]],["$","section",null,{"className":"mx-auto my-0 max-w-[970px] p-4 pb-40","children":["$","div",null,{"className":"prose flex w-full max-w-none flex-col","children":[[["$","h2",null,{"children":"Back-Forward Cache(BFCache)"}],"\n",["$","p",null,{"children":"BFCache는 즉시 앞뒤로 탐색할 수 있는 브라우저 최적화 기능이다. 특히 네트워크나 기기 속도가 느린 사용자의 경우 탐색 환경이 크게 개선된다.\n브라우저를 탐색하다가 뒤로가기나 앞으로가기를 클릭시, 또는 이전에 방문했던 링크를 재방문하는경우 페이지가 다시 로드되지않고, 빠르게 보여지는 경우가 있다."}],"\n",["$","h2",null,{"children":"BFCache 작동 방식"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":[["$","code",null,{"children":"BFCache 사용 안함"}]," : 페이지를 벗어나면 페이지 상태가 메모리에서 해제되고, 다시 방문할 때 네트워크 요청을 통해 페이지를 다시 로드한다."]}],"\n",["$","li",null,{"children":[["$","code",null,{"children":"BFCache 사용"}]," : 페이지를 벗어나더라도 페이지 상태가 메모리에 유지되어, 다시 방문할 때 네트워크 요청 없이 즉시 페이지를 복원한다.\nBFCache는 이전 탐색한 페이지를 재탐색하는 속도도 높을 뿐만 아니라, 네트워크 요청을 줄여 데이터 사용량도 절감할 수 있다."]}],"\n"]}],"\n",["$","h3",null,{"children":"HTTP캐시와의 차이점"}],"\n",["$","p",null,{"children":"BFCache는 HTTP캐시와는 다르게 동작한다."}],"\n",["$","blockquote",null,{"children":["\n",["$","p",null,{"children":["HTTP캐시란 브라우저 또는 중간 프록시가 ",["$","code",null,{"children":"HTTP 응답"}],"을 저장하여 같은 리소스에 대한 후속 요청 시 네트워크 요청을 줄이는 메커니즘이다. HTTP캐시는 주로 정적 리소스(이미지, CSS, JavaScript 파일 등)에 적용된다.\nHTTP Header의 ",["$","code",null,{"children":"Cache-Control"}],", ",["$","code",null,{"children":"ETag"}],", ",["$","code",null,{"children":"Last-Modified"}]," 등의 지시어를 통해 캐싱 동작을 제어할 수 있다."]}],"\n"]}],"\n",["$","p",null,{"children":"반면에, BFCache는 브라우저가 JavaScript의 힙을 포함하여 메모리에 있는 전체 페이지를 스냅샷으로 저장한다. 사용자가 뒤로가기나 앞으로가기를 클릭할 때, 브라우저는 이 스냅샷을 사용하여 페이지를 즉시 복원한다. BFCache는 페이지의 전체 상태를 저장하므로, HTTP캐시와 달리 동적 콘텐츠나 상태도 유지된다."}],"\n",["$","h2",null,{"children":"BFCache 조건"}],"\n",["$","p",null,{"children":"브라우저의 종료와 버전에 따라 BFCache의 동작이 다를 수 있다. 일반적으로 다음과 같은 조건을 충족해야 BFCache가 활성화된다."}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":[["$","code",null,{"children":"unload"}]," 이벤트 리스너가 없어야 한다.","\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":[["$","code",null,{"children":"unload"}]," 이벤트는 페이지가 완전히 종료됨을 의미해서 브라우저가 스냅샷을 저장할 수 없다."]}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":[["$","code",null,{"children":"Cache-Control: no-store"}]," 가 없어야 한다.","\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"웹 서버가 응답에 설정할 수 있는 이 헤더는 HTTP 헤더로, 브라우저의 응답을 HTTP 헤더에 캐시에 저장하지 말라 지시한다."}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":[["$","code",null,{"children":"iframe"}]," 내에서 로드된 페이지는 BFCache에 저장되지 않는다.","\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"보안 및 성능상의 이유로, iframe 내에서 로드된 페이지는 BFCache에 저장되지 않는다."}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","h3",null,{"children":"BFCache 감지"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["페이지가 BFCache에서 복원되는 시점 감지","\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":[["$","code",null,{"children":"pageshow"}]," 이벤트는 페이지가 처음 로드될 때, ","$L2"," 이벤트 직후와 BFCache에서 복원될 때 발생한다."]}],"\n"]}],"\n"]}],"\n"]}],"\n","$L3","\n","$L4","\n","$L5","\n","$L6","\n","$L7","\n","$L8","\n","$L9","\n","$La","\n","$Lb","\n","$Lc"],"$Ld","$Le"]}]}]],["$Lf","$L10"],"$L11"]}],"loading":null,"isPartial":false}
2:["$","code",null,{"children":"load"}]
3:["$","pre",null,{"className":"language-javascript","children":["$","code",null,{"className":"language-javascript code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token dom variable","children":"window"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"addEventListener"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'pageshow'"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token parameter","children":"event"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token arrow operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword control-flow","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"event",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"persisted"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token console class-name","children":"console"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"log"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'This page was restored from the bfcache.'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword control-flow","children":"else"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token console class-name","children":"console"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"log"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'This page was loaded normally.'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]]}]}]
4:["$","ul",null,{"children":["\n",["$","li",null,{"children":["페이지가 BFCache에 저장되는 시점 감지","\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":[["$","code",null,{"children":"pagehide"}]," 이벤트는 페이지가 벗어날 때 발생하며, BFCache에 저장될 때와 완전히 언로드될 때 모두 발생한다."]}],"\n"]}],"\n"]}],"\n"]}]
5:["$","pre",null,{"className":"language-javascript","children":["$","code",null,{"className":"language-javascript code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token dom variable","children":"window"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"addEventListener"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'pagehide'"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token parameter","children":"event"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token arrow operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword control-flow","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"event",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"persisted"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token console class-name","children":"console"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"log"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'This page *might* be entering the bfcache.'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword control-flow","children":"else"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token console class-name","children":"console"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"log"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'This page will unload normally and be discarded.'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]]}]}]
6:["$","h2",null,{"children":"BFCache 최적화"}]
7:["$","ul",null,{"children":["\n",["$","li",null,{"children":[["$","code",null,{"children":"unload"}]," 이벤트 리스너 제거","\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["페이지에서 ",["$","code",null,{"children":"unload"}]," 이벤트 리스너를 제거하여 BFCache가 활성화될 수 있도록 한다."]}],"\n",["$","li",null,{"children":["대신 ",["$","code",null,{"children":"pagehide"}]," 이벤트를 사용하여 페이지가 벗어날 때 필요한 정리 작업을 수행한다."]}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":[["$","code",null,{"children":"Cache-Control"}]," 헤더 조정","\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["서버에서 응답 헤더에 ",["$","code",null,{"children":"Cache-Control: no-store"}],"를 설정하지 않도록 한다."]}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":[["$","code",null,{"children":"iframe"}]," 사용 최소화","\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["가능하면 ",["$","code",null,{"children":"iframe"}]," 내에서 페이지를 로드하지 않도록 한다."]}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":["열려있는 리소스 정리","\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"IndexedDB, 진행 중인 fetch() 또는 XMLHttpRequest, WebSocket, WebRTC 연결이 있는 페이지는 BFCache에 저장되지 않을 수 있다."}],"\n",["$","li",null,{"children":["이러한 리소스를 정리하거나 닫는 코드를 ",["$","code",null,{"children":"pagehide"}]," 이벤트 리스너에 추가한다."]}],"\n"]}],"\n"]}],"\n"]}]
8:["$","pre",null,{"className":"language-javascript","children":["$","code",null,{"className":"language-javascript code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token dom variable","children":"window"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"addEventListener"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'pagehide'"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token parameter","children":"event"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token arrow operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword control-flow","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"event",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"persisted"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token comment","children":"// IndexedDB 연결 닫기"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword control-flow","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"db",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["          db",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"close"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token comment","children":"// 진행 중인 fetch 요청 취소"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword control-flow","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"controller",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["            controller",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"abort"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token comment","children":"// WebSocket 연결 닫기"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword control-flow","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"socket",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["            socket",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"close"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],"$L12","$L13"]}]}]
9:["$","ul",null,{"children":["\n",["$","li",null,{"children":[["$","code",null,{"children":"window.opener"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":[["$","code",null,{"children":"window.open()"}]," 또는 a태그의 ",["$","code",null,{"children":"target=\"_blank\""}]," 속성으로 새 창/탭에서 열린 페이지는 자신의 부모 페이지에 대한 참조 window.opener를 가지는데, 이것이 null이 아닐 경우 bfcache에 부적격한 것으로 판단된다."]}],"\n",["$","li",null,{"children":["따라서 ",["$","code",null,{"children":"window.opener"}],"를 null, 또는 참를 만들지 않는게 좋다."]}],"\n",["$","li",null,{"children":["사이트에서 창을 열고 ",["$","code",null,{"children":"window.postMessage()"}],"를 통해 제어하거나 창 객체를 직접 참조해야 하는 경우 열린 창이나 opener는 BFCache를 사용할 수 없다."]}],"\n"]}],"\n"]}],"\n"]}]
a:["$","h2",null,{"children":"마치며"}]
b:["$","p",null,{"children":["아직 직접적으로 BFCache를 활용해보거나, 관련 이슈를 접해본적이 없어서 이번 포스트를 통해 개념적으로나마 이해할 수 있었다.\nReact와 같은 SPA 프레임워크 내에서는 기본적으로 동작하지 않는다, 하지만 SPA에서 다른 페이지로 이동했다가, 뒤로 돌아오는 경우에는 BFCache가 동작할 수 있다.\n따라서, useEffect와 같은 마운트이펙트는 다시 실행되지 않기 때문에, BFCache에서 복원될 때 필요한 작업이 있다면 ",["$","code",null,{"children":"pageshow/pagehide"}]," 이벤트를 활용하는 것이 좋다."]}]
c:["$","ul",null,{"children":["\n",["$","li",null,{"children":"광고·추천 컴포넌트의 단발 리프레시"}],"\n",["$","li",null,{"children":"세션 만료/권한 재체크"}],"\n",["$","li",null,{"children":"서버 상태(stale 가능)만 부분 invalidate"}],"\n"]}]
d:["$","article",null,{"className":"flex items-center justify-between gap-[20px] border-y-2 border-y-gray500 py-[30px]","children":[["$","div",null,{"className":"w-1/2 min-w-0 flex-1 rounded-[4px] bg-gray100 dark:bg-darkBg02 text-left","children":["$","$L14",null,{"href":"/blog/react-query","className":"flex w-full flex-col px-[14px] py-[10px] no-underline","children":[["$","div",null,{"className":"text-[14px] text-gray700","children":"이전글"}],["$","h3",null,{"className":"m-0 truncate text-[16px] font-bold text-gray900","children":"리액트 쿼리"}]]}]}],["$","div",null,{"className":"w-1/2 min-w-0 flex-1 rounded-[4px] bg-gray100 dark:bg-darkBg02 text-right"}]]}]
e:["$","$L15",null,{}]
f:["$","link","0",{"rel":"stylesheet","href":"/_next/static/chunks/e25f9df6635f12b2.css","precedence":"next"}]
10:["$","script","script-0",{"src":"/_next/static/chunks/5776c2b87de80c31.js","async":true}]
11:["$","$L16",null,{"children":["$","$17",null,{"name":"Next.MetadataOutlet","children":"$@18"}]}]
12:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
13:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
18:null
