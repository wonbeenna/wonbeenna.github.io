1:"$Sreact.fragment"
2:I[9243,["874","static/chunks/874-39484d5feff3b265.js","766","static/chunks/766-b650f0278a972ad4.js","177","static/chunks/app/layout-2026af6fce535623.js"],""]
3:I[881,["874","static/chunks/874-39484d5feff3b265.js","766","static/chunks/766-b650f0278a972ad4.js","177","static/chunks/app/layout-2026af6fce535623.js"],"Providers"]
4:I[6874,["874","static/chunks/874-39484d5feff3b265.js","766","static/chunks/766-b650f0278a972ad4.js","848","static/chunks/app/page/%5Bpage%5D/page-3d16974de746edb8.js"],""]
5:I[3063,["874","static/chunks/874-39484d5feff3b265.js","766","static/chunks/766-b650f0278a972ad4.js","177","static/chunks/app/layout-2026af6fce535623.js"],"Image"]
6:I[1186,["874","static/chunks/874-39484d5feff3b265.js","766","static/chunks/766-b650f0278a972ad4.js","177","static/chunks/app/layout-2026af6fce535623.js"],"default"]
7:I[7555,[],""]
8:I[1295,[],""]
a:I[9665,[],"MetadataBoundary"]
c:I[9665,[],"OutletBoundary"]
f:I[4911,[],"AsyncMetadataOutlet"]
11:I[9665,[],"ViewportBoundary"]
13:I[6614,[],""]
:HL["/_next/static/media/47cbc4e2adbc5db9-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/css/e539936c7dc6b882.css","style"]
:HL["/_next/static/css/e7c7294f242bce08.css","style"]
0:{"P":null,"b":"TvWQMWimxXTdcDA28j6Yi","p":"","c":["","page","4"],"i":false,"f":[[["",{"children":["page",{"children":[["page","4","d"],{"children":["__PAGE__",{}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/e539936c7dc6b882.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/e7c7294f242bce08.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"ko","suppressHydrationWarning":true,"children":[["$","$L2",null,{"src":"https://www.googletagmanager.com/gtag/js?id=G-LFDRQZPCBN"}],["$","$L2",null,{"id":"google-analytics","children":"\n          window.dataLayer = window.dataLayer || [];\n          function gtag(){dataLayer.push(arguments);}\n          gtag('js', new Date());\n \n          gtag('config', 'G-LFDRQZPCBN');\n        "}],["$","body",null,{"suppressHydrationWarning":true,"className":"__className_518cef","children":["$","$L3",null,{"children":[["$","header",null,{"className":"sticky top-0 z-10 mx-auto my-0 h-[56px] border-b border-b-gray200 bg-white px-[24px] py-0 dark:bg-darkBg01","children":["$","section",null,{"className":"m-auto flex h-full max-w-[970px] items-center justify-between","children":[["$","div",null,{"className":"flex items-center gap-[20px]","children":[["$","$L4",null,{"href":"/","children":["$","$L5",null,{"className":"h-[56px] w-[60px]","src":"/assets/icons/been-logo.svg","width":60,"height":56,"priority":true,"alt":"logo"}]}],["$","div",null,{"className":"flex items-center gap-[20px]","children":["$","$L4",null,{"href":"/about","children":"About"}]}]]}],["$","$L6",null,{}]]}]}],["$","main",null,{"className":"mx-auto my-0 max-w-[970px] p-[16px]","children":["$","$L7",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L8",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":404}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]}],["$","footer",null,{"className":"flex items-center justify-center pb-[16px] text-center text-[14px] text-gray600","children":"Copyright Â© Been."}]]}]}]]}]]}],{"children":["page",["$","$1","c",{"children":[null,["$","$L7",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L8",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":[["page","4","d"],["$","$1","c",{"children":[null,["$","$L7",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L8",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["__PAGE__",["$","$1","c",{"children":["$L9",["$","$La",null,{"children":"$Lb"}],null,["$","$Lc",null,{"children":["$Ld","$Le",["$","$Lf",null,{"promise":"$@10"}]]}]]}],{},null,false]},null,false]},null,false]},null,false],["$","$1","h",{"children":[null,["$","$1","VnfN4k-6E19IYFTNVnAW7",{"children":[["$","$L11",null,{"children":"$L12"}],["$","meta",null,{"name":"next-size-adjust","content":""}]]}],null]}],false]],"m":"$undefined","G":["$13","$undefined"],"s":false,"S":true}
14:"$Sreact.suspense"
15:I[4911,[],"AsyncMetadata"]
b:["$","$14",null,{"fallback":null,"children":["$","$L15",null,{"promise":"$@16"}]}]
17:I[1114,["874","static/chunks/874-39484d5feff3b265.js","766","static/chunks/766-b650f0278a972ad4.js","848","static/chunks/app/page/%5Bpage%5D/page-3d16974de746edb8.js"],"default"]
e:null
18:Tfe7,
### 1\. Utility Type

```typescript
  Partial<T>
```

\- Tì˜ ëª¨ë“  í”„ë¡œí¼í‹°ë¥¼ ì„ íƒì ìœ¼ë¡œ ë§Œë“œëŠ” íƒ€ì…

```typescript
interface User {
  name: string;
  age: number;
}

function updateUser(user: User, fieldsToUpdate: Partial<User>) {
  return { ...user, ...fieldsToUpdate };
}

const user1 = {
  name: "been",
  age: 30,
};

const user2 = updateUser(user1, {
  age: 32,
});
```

---

```typescript
  Readonly<T>
```

Tì˜ ëª¨ë“  í”„ë¡œí¼í‹°ë¥¼ ì½ê¸° ì „ìš©ìœ¼ë¡œ êµ¬ì„±, ìƒì„±ëœ íƒ€ì…ì˜ í”„ë¡œí¼í‹°ëŠ” ì¬í• ë‹¹ í•  ìˆ˜ ì—†ë‹¤.

---

```typescript
  Record<K,T>
```

íƒ€ì… Tì˜ í”„ë¡œí¼í‹°ì˜ ì§‘í•© Kë¡œ íƒ€ì…ì„ êµ¬ì„±í•œë‹¤.

ì£¼ë¡œ ë‹¤ë¥¸ íƒ€ì…ì— ë§¤í•‘ì‹œí‚¤ëŠ”ë° ì‚¬ìš©

```typescript
interface PageInfo {
  title: string;
}

type Page = "home" | "about" | "contact";

const x: Record<Page, PageInfo> = {
  about: { title: "about" },
  contact: { title: "contact" },
  home: { title: "home" },
};
```

---

```typescript
  Pick<T,K>
```

Tì—ì„œ Kì˜ ì§‘í•©ì„ ì„ íƒí•´ íƒ€ì…ì„ êµ¬ì„±

```typescript
  Omit<T,K>
```

Tì—ì„œ ëª¨ë“  í”„ë¡œí¼í‹°ë¥¼ ê°€ì ¸ì˜¨ ë‹¤ìŒ Kë¥¼ ì œê±°í•œ íƒ€ì…ì„ êµ¬ì„±

---

```typescript
  NonNullable<T>
```

Tì—ì„œ nullê³¼ undefinedë¥¼ ì œì™¸í•œ íƒ€ì…ì„ êµ¬ì„±

---

ì¶œì²˜ : [https://typescript-kr.github.io/pages/utility-types.html](https://typescript-kr.github.io/pages/utility-types.html)

---

### 2\. Storybook ì‘ì„±

[https://been.tistory.com/58](https://been.tistory.com/58)

---

### 3\. npm íŒ¨í‚¤ì§€ ë°°í¬

[https://www.npmjs.com/package/jci-moyeo-design-system](https://www.npmjs.com/package/jci-moyeo-design-system)


---

### 4\. aria, role

> ì›¹ ì ‘ê·¼ì„±(web accessibility)ì€ ì¥ì• ë¥¼ ê°€ì§„ ì‚¬ëŒê³¼ ì¥ì• ë¥¼ ê°€ì§€ì§€ ì•Šì€ ì‚¬ëŒ ëª¨ë‘ê°€ ì›¹ì‚¬ì´íŠ¸ë¥¼ ì´ìš©í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” ë°©ì‹ì„ ê°€ë¦¬í‚¨ë‹¤. ì‚¬ì´íŠ¸ê°€ ì˜¬ë°”ë¥´ê²Œ ì„¤ê³„ë˜ì–´ ê°œë°œë˜ê³  í¸ì§‘ë˜ì–´ ìˆì„ ë•Œ ëª¨ë“  ì‚¬ìš©ìë“¤ì€ ì •ë³´ì™€ ê¸°ëŠ¥ì— ë™ë“±í•˜ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.

> ì›¹ í‘œì¤€ì€ ì›”ë“œ ì™€ì´ë“œ ì›¹ì˜ ì¸¡ë©´ì„ ì„œìˆ í•˜ê³  ì •ì˜í•˜ëŠ” ê³µì‹ í‘œì¤€ì´ë‚˜ ë‹¤ë¥¸ ê¸°ìˆ  ê·œê²©ì„ ê°€ë¦¬í‚¤ëŠ” ì¼ë°˜ì ì¸ ìš©ì–´ì´ë‹¤. ìµœê·¼ì— ì´ ìš©ì–´ëŠ” ì›¹ ì‚¬ì´íŠ¸ë¥¼ ì‘ì„±í•˜ëŠ” ë° ì¤‘ìš”ë„ê°€ ë†’ì•„ì§€ê³  ìˆìœ¼ë©° ì›¹ ë””ìì¸, ê°œë°œê³¼ ê´€ê³„ê°€ ìˆë‹¤.

```typescript
role="form"
<form>ê³¼ ë™ì¼í•˜ê²Œ ì‚¬ìš©
```


```typescript
role="search"
ê²€ìƒ‰ ì—­í• ì„ ë‹´ë‹¹
```

```typescript
role="button"
ìŠ¤í¬ë¦°ë¦¬ë”ì— ë²„íŠ¼ì„ì„ ì•Œë ¤ì£¼ì§€ë§Œ ë²„íŠ¼ê¸°ëŠ¥ì„ ì œê³µí•˜ì§€ëŠ” ì•Šê¸° ë•Œë¬¸ì— <button>ì´ë‚˜ <input type='button'>ì„ ì‚¬ìš©í•˜ëŠ”ê²Œ ì¢‹ë‹¤.
```


```typescript
role ="tablist"
**íƒ­ë©”ë‰´ ë“±ì˜ ë¦¬ìŠ¤íŠ¸ì„ì„ ì‚¬ìš©ìì—ê²Œ ì „ë‹¬í•œë‹¤.
```


```typescript
role="tab"
ë³´ì¡°ê¸°ê¸°ê°€ íƒ­ìœ¼ë¡œ ì¸ì‹
aria-requiredë¥¼ trueë¡œ ì§€ì •í•´ í•´ë‹¹ìš”ì†Œê°€ í•„ìˆ˜ì ìœ¼ë¡œ ì…ë ¥ë˜ì–´ì•¼ í•¨ì„ ë‚˜íƒ€ëƒ„
```

```html
<input {...} aria-required="true">
```

-   ì¶”ê°€ì„¤ëª… ì†ì„± : div #referenceì˜ ë‚´ìš©ì„ inputì˜ ì¶”ê°€ì„¤ëª…ìœ¼ë¡œ ì‚¬ìš©

```html
<input type="text" aria-describedby="reference">
<div id="reference">ì¶”ê°€ì„¤ëª…</div>
```

ex) "ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”." ë¼ëŠ” ì¶”ê°€ì ì¸ ì„¤ëª…

-   aria-labelë¡œ ì–´ë–¤ ìš”ì†Œì¸ì§€ ë¼ë²¨ë§í•  ìˆ˜ ìˆë‹¤.

```html
<div role="group" aria-label="ë ˆì´ë¸”">
```

-   ìœ íš¨í•œì§€ ì•„ë‹Œì§€ êµ¬ë¶„

```html
<input type="text" aria-invalid="true">
```

-   ë²„íŠ¼ í´ë¦­ìƒíƒœì™€ ë¹„í´ë¦­ìƒíƒœ

```html
<button aria-pressed="true">
```

**1) íƒœê·¸ì™€ ì¤‘ë³µë˜ì§€ ì•Šê²Œ ì‚¬ìš©í•œë‹¤.**

```html
<button role="button"> </button>
```

**2) nativeìš”ì†Œì˜ ì˜ë¯¸, ê¸°ëŠ¥ ë³€ê²½ì„ í•˜ì§€ ì•ŠëŠ”ë‹¤.**

```html
<h1 role="button">ë²„íŠ¼</h1>
```

**3) í‚¤ë³´ë“œë¡œ í¬ì»¤ì‹±ì´ ê°€ëŠ¥í•˜ê²Œ ì„¤ì •í•œë‹¤.**

```html
<span role="button" tabindex="0">ë²„íŠ¼</span>
```

íŠ¹íˆ buttonìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ”ê²½ìš°

```typescript
aria-hidden="true"
ìŠ¤í¬ë¦°ë¦¬ë”ê°€ ì ‘ê·¼í•˜ì§€ëŠ” ì•Šì§€ë§Œ, ì´ë¯¸ì§€ë¥¼ ë³´ì—¬ì£¼ê³  ì‹¶ì€ ê²½ìš°
```

[https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles)

19:Tc67,
ì´ë²ˆì— ìŠ¤í„°ë””ë¥¼ í•˜ë©´ì„œ ì²˜ìŒ ìŠ¤í† ë¦¬ë¶ì„ ì¨ë³´ê²Œ ë˜ì—ˆë‹¤.

[https://storybook.js.org/](https://storybook.js.org/)


ìŠ¤í† ë¦¬ë¶ì€ ë””ìì¸ ì‹œìŠ¤í…œì„ êµ¬ì¶•í•˜ê³ ìí•˜ëŠ” ê°œë°œìë“¤ì„ ìœ„í•´ ì œì‘ë˜ì—ˆë‹¤.

**ë””ìì¸ ì‹œìŠ¤í…œì€ ì™œ ì‚¬ìš©í•˜ëŠ” ê±¸ê¹Œ?**

ê°œë°œì ì…ì¥ì—ì„œ ê°€ì¥ í° ì´ìœ ëŠ” ë””ìì´ë„ˆ, í”„ë¡œì íŠ¸ ë§¤ë‹ˆì € ë“± íŒ€ êµ¬ì„±ì›ê³¼ì˜ í˜‘ì—…ì¸ê²ƒ ê°™ë‹¤.

ê° ë¶„ì•¼ì˜ ì§€ì‹ ì°¨ì´ë¥¼ ì¤„ì´ê³  ê³µí†µì ìœ¼ë¡œ ë°”ë¼ë³´ëŠ” ê²ƒ(UI)ì„ í†µí•´ ìƒì‚°ì„±ì„ ë†’ì¼ ìˆ˜ ìˆë‹¤.

**ë””ìì¸ ì‹œìŠ¤í…œì´ ë­”ë°?**

<img src="/assets/blog/javaScript/storybook.webp" width="100%" alt="post image"/>

ë‚´ê°€ ìƒê°í•˜ê¸°ì— ë””ìì¸ ì‹œìŠ¤í…œì´ë€ í•˜ë‚˜ì˜ í”„ë¡œë•íŠ¸ë¥¼ ë§Œë“œëŠ”ë° ìˆì–´ì„œ ë””ìì¸ ì ì¸ ê°€ì´ë“œ ë¼ì¸ ë° ë””ìì¸ ì›ì¹™ = ìƒ‰ìƒ, ì•„ì´ì½˜, íƒ€ì´í¬ê·¸ë˜í”¼ ë“± ì„ ì²´ê³„ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê³  ë¬¸ì„œí™”í•˜ëŠ”ê²ƒ ì´ë¼ ìƒê°í•œë‹¤.

ì´ê²ƒì„ ë¬¸ì„œí™”í•˜ëŠ”ë° ë„ì™€ì£¼ëŠ” ë„êµ¬ê°€ ë°”ë¡œ ìŠ¤í† ë¦¬ë¶ì´ë‹¤.

---

ìš°ë¦¬ëŠ” ë¨¼ì € ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ì»´í¬ë„ŒíŠ¸ì™€, ìì£¼ ì“°ì´ê²Œ ë ë§Œí•œ ì»´í¬ë„ŒíŠ¸ë“¤ì„ ì‘ì„±í•˜ê¸°ë¡œ ì‹œì‘í–ˆë‹¤.

```shell
npx storybook init
```

ë³¸ì¸ì´ ì‚¬ìš©í•˜ê³ ìí•˜ëŠ” í”„ë ˆì„ì›Œí¬ë¥¼ ì„¤ì¹˜í•˜ê³  ìœ„ ëª…ë ¹ì–´ë¥¼ í„°ë¯¸ë„ì— ì…ë ¥í•˜ë©´ ì•Œì•„ì„œ ì„¤ì¹˜ëœë‹¤Â 

```shell
yarn storybook
```

ë¡œ ì‹œì‘í•˜ë©´ 6006í¬íŠ¸ë¡œ ì‹¤í–‰ëœë‹¤

/src/components/Chip.tsx

```js
{...}

const Chip = ({
  adornments = "#",
  label = "Chip",
  color = "basic",
  variants,
  outlined,
  onDelete,
}: ChipProps) => {
  const props = { color, variants, outlined };

  return (
    <StyledChip {...props}>
      {adornments && <StyledChipAdornments>{adornments}</StyledChipAdornments>}
      <StyledChipLabel {...props}>{label}</StyledChipLabel>
      {onDelete && (
        <CancelIconBtn value={label} onClick={onDelete}>
          <StyledCancelIcon aria-hidden {...props} />
        </CancelIconBtn>
      )}
    </StyledChip>
  );
};

export default Chip;

{...}
```

ë°°í¬ í›„ ìš°ë¦¬ê°€ ì‹¤ì œë¡œ ì‚¬ìš©í•  ì»´í¬ë„ŒíŠ¸ë‹¤

ë‹¤ì–‘í•œ ìƒ‰ìƒìœ¼ë¡œ ë°›ê¸°ìœ„í•´

```ts
export type Color = "basic" | "active" | "danger" | "warning";
```

ì„ ì‘ì„±í–ˆë‹¤.

<img src="/assets/blog/javaScript/storybook.gif" width="100%" alt="post image"/>

/src/stories/Chip.stories.tsx

```tsx
import { Meta, Story } from "@storybook/react";
import React from "react";
import { Chip, ChipProps } from "../../../components/Chip";

export default {
  title: "Components/Chip",
  component: Chip,
} as Meta;

export const Default: Story<ChipProps> = (args) => {
  return <Chip {...args} />;
};
```

ì—¬ê¸°ì„œ ìš°ë¦¬ê°€ ë§Œë“  ì»´í¬ë„ŒíŠ¸ë“¤ì„ ë¬¸ì„œí™” í•  ìˆ˜ ìˆë‹¤

argsì„ ë„£ì–´ì¤„ ìˆ˜ ìˆëŠ”ë°, ìŠ¤í† ë¦¬ë¶ì—ì„œëŠ” ìë™ìœ¼ë¡œ ì„¤ì •í•´ì¤€ë‹¤.

```js
Default.args = {
  color: "active",
};
```

ë¡œ ì§ì ‘ ì •ì˜í•  ìˆ˜ë„ ìˆë‹¤.

ìš°ë¦¬ëŠ” npmìœ¼ë¡œ ë°°í¬í•´ ì‚¬ìš©í•˜ê¸°ë¡œ í–ˆë‹¤. ë‹¤ìŒì—” ë°°í¬ê³¼ì •ê³¼ ë¹Œë“œê³¼ì •ì„ ì •ë¦¬í•´ì•¼ê² ë‹¤.

ì‘ì„±í•œ ë””ìì¸ ì‹œìŠ¤í…œì„ ê¸°ë°˜ìœ¼ë¡œ ì´ë²ˆì£¼ë¶€í„° ì§ì ‘ ê°œë°œì— ë“¤ì–´ê°€ê²Œëœë‹¤.

ì–´ë–¤ì ì´ ì¢‹ì€ì§€ ì°¨ì´ê°€ìˆëŠ”ì§€ ê²½í—˜í•´ë³´ëŠ” ì¢‹ì€ ê¸°íšŒê°€ ë ê±°ê°™ë‹¤.
1a:Td1c,
Nextjsì—ì„œ styled-componentsë¥¼ ì‚¬ìš©í•˜ë©´ ì„œë²„ìƒì—ì„œ htmlì„ ë¶ˆëŸ¬ì˜¨ ë’¤, hydrateê³¼ì •ì—ì„œ jsë¥¼ ì…í˜€ ìŠ¤íƒ€ì¼ì´ ì ìš©ëœë‹¤.

ì´ë•Œ ì´ˆê¸° í˜ì´ì§€ ë¡œë”©ì‹œ ì‚¬ìš©ìê°€ ë³´ê²Œ ë˜ëŠ” í™”ë©´ì€, ìŠ¤íƒ€ì¼ë§ì´ ì „í˜€ ì ìš©ë˜ì§€ì•Šì€ htmlë¬¸ì„œë¥¼ ì ê¹ ë³´ê²Œ ë˜ëŠ” ë¬¸ì œê°€ ìˆë‹¤.

<img src="/assets/blog/javaScript/next-styled-component.png" width="100%" alt="post image"/>

ë„¤íŠ¸ì›Œí¬ íƒ­ì—ì„œ ë°›ì•„ì˜¨ ë¬¸ì„œ(í˜ì´ì§€)ë¥¼ ë³´ë©´ styleì— ê´€í•œ ì •ë³´ëŠ” ì—†ê³ , htmlë§Œ ë‚´ë ¤ì˜¨ë‹¤.

ì´ëŸ´ë•Œ **\_document.tsx**ë¥¼ ì»¤ìŠ¤í…€í•´ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

\_documentëŠ” Pageë¥¼ ë Œë”ë§í•˜ëŠ”ë° ê³µí†µì ìœ¼ë¡œ í•„ìš”í•œ íƒœê·¸, ë©”íƒ€ì •ë³´, í°íŠ¸ ë“±ì„ ì»¤ìŠ¤í…€ í•˜ëŠ”ë° ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

ë˜ documentëŠ” í•­ìƒ ì„œë²„ìƒì—ì„œë§Œ ì‹¤í–‰ë˜ë¯€ë¡œ ë¸Œë¼ìš°ì € ë° í´ë¼ì´ì–¸íŠ¸ ë‹¨ì—ì„œ í¬í•¨ëœ ì½”ë“œë“¤ì€ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤.

---

ì²«ë²ˆì§¸ë¡œ styled-componentsì˜ ì„œë²„ì¸¡ classNameê³¼ í´ë¼ì´ì–¸íŠ¸ì¸¡ classNameì„ ë™ì¼í•˜ê²Œ ìœ ì§€ë˜ë„ë¡ í•˜ê¸° ìœ„í•´ì„œ next.config.jsë¥¼ ìˆ˜ì •í•´ì•¼ëœë‹¤.

nextjs 12.1ë²„ì „ ì´ìƒë¶€í„°ëŠ” babel-plugin-styled-componentsë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•„ë„ ë˜ê³ ,

```javascript
compiler: {
  styledComponents: true
},
```

ë§Œ ì‘ì„±í•´ ì£¼ë©´ ëœë‹¤.

ë‘ë²ˆì§¸ë¡œÂ 

```javascript
import Document, {DocumentContext} from 'next/document'
import {ServerStyleSheet} from 'styled-components'

class MyDocument extends Document {
  static async getInitialProps(ctx: DocumentContext) {
    const sheet = new ServerStyleSheet()
    const originalRenderPage = ctx.renderPage

    try {
      ctx.renderPage = () =>
        originalRenderPage({
          enhanceApp: (App) => (props) => sheet.collectStyles(<App {...props} />)
        })

      const initialProps = await Document.getInitialProps(ctx)

      return {
        ...initialProps,
        styles: [
          <>
            {initialProps.styles}
            {sheet.getStyleElement()}
          </>
        ]
      }
    } catch (error) {
      throw error
    } finally {
      sheet.seal()
    }
  }
}

export default MyDocument
```

\_document.tsx íŒŒì¼ì„ ìœ„ì²˜ëŸ¼ ì‘ì„±í•´ ì£¼ë©´ ëœë‹¤.

ìœ„ ì½”ë“œëŠ” ì´ˆê¸° ì„œë²„ì¸¡ì—ì„œ í˜ì´ì§€ë¥¼ ë¶ˆëŸ¬ì˜¬ ë•Œ ìŠ¤íƒ€ì¼ì„ ì…í˜€ ë¶ˆëŸ¬ì˜¤ë„ë¡ ì„¤ì •í•˜ëŠ” ì½”ë“œë‹¤.

getInitialPropsì—ì„œ ë°›ì•„ì˜¨ ctxì—ì„œ renderPageê°ì²´ë¥¼ ì°¾ì•„ ë³¼ ìˆ˜ ìˆëŠ”ë°, renderPageëŠ” CSS-in-JSë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì»¤ìŠ¤í…€í•  ë•Œ ë§Œ ì‚¬ìš©í•˜ë¼ê³  ê³µì‹ë¬¸ì„œì— ë‚˜ì™€ìˆë‹¤.

renderPage í•¨ìˆ˜ë¥¼ ì½˜ì†”ì— ì°ì–´ë³´ë‹ˆ, ìš°ë¦¬ê°€ ë³´ëŠ” htmlí˜ì´ì§€ì™€ ë¦¬ì•¡íŠ¸ì»´í¬ë„ŒíŠ¸ë“¤ì´ ë‹´ê²¨ìˆëŠ” ê²ƒ ê°™ë‹¤.

styled-components ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ServerStyleSheetë¥¼ importí•˜ê³  ì„œë²„ì¸¡ì—ì„œ ê·¸ë ¤ì§ˆ sheetë¥¼ ìƒˆë¡œ ë§Œë“ ë‹¤.

```javascript
const sheet = new ServerStyleSheet()
```

ìƒˆë¡œ ë§Œë“  sheetì— renderPageì— ìˆëŠ” ì»´í¬ë„ŒíŠ¸ë‚´ë¶€ì— styled-componentsë¡œ ì‘ì„±í•œ ìŠ¤íƒ€ì¼ë“¤ì„ ê²°í•©í•˜ê³ ,

```javascript
ctx.renderPage = () =>
  originalRenderPage({
    enhanceApp: (App) => (props) => sheet.collectStyles(<App {...props} />)
  })
```

ê¸°ì¡´ì— htmlì— styleíƒœê·¸ë¥¼ ì¶”ê°€í•œë‹¤.

```javascript
return {
  ...initialProps,
  styles: [
    <>
      {initialProps.styles}
      {sheet.getStyleElement()}
    </>
  ]
}
```

<img src="/assets/blog/javaScript/next-styled-component(1).png" width="100%" alt="post image"/>
1b:Te30,
í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ, í”„ë¡œí•„ í˜ì´ì§€ì— ìœ ì €ì •ë³´ì™€ í¬ì¸íŠ¸, í«ì •ë³´, ê´€ì‹¬ì‚¬ ë“± ì„¸ë¡œë¡œ ê¸¸ê²Œ~~ë°°ì¹˜ëœ UI, ê°ê°ì˜ ì •ë³´ë“¤ì„ ì„œë²„ì—ì„œ ë°ì´í„°ë¥¼ í•˜ë‚˜í•˜ë‚˜ ë°›ì•„ì™€ ë³´ì—¬ì¤˜ì•¼ í–ˆë‹¤.

ì²˜ìŒì—” ì•„ë¬´ìƒê°ì—†ì´ ì§„í–‰í–ˆë‹¤.

í”„ë¡œí•„ í˜ì´ì§€ì— ì§„ì…í–ˆì„ ë•Œ ê°ê° í•„ìš”í•œ ë°ì´í„°ë¥¼ ì„œë²„ì— 4ë²ˆì´ë‚˜ ìš”ì²­í–ˆê³ , ê·¸ëŒ€ë¡œ ì»´í¬ë„ŒíŠ¸ì— ê·¸ë ¸ë‹¤.

ê·¸ëŸ¬ë‹¤ê°€ğŸ’¡ ìƒê°ë‚¬ëŠ”ë°,, ì‚¬ìš©ìì—ê²Œ ë³´ì´ì§€ì•ŠëŠ” ë¶€ë¶„ì— ë°ì´í„°ë„ ë°›ì•„ì˜¤ê³  ìˆì—ˆë‹¤.

êµ³ì´ ìŠ¤í¬ë¡¤ì„ ë‚´ë¦¬ì§€ë„ ì•Šê³  ì‚¬ìš©ìì—ê²Œ ë³´ì´ì§€ë„ ì•ŠëŠ” ë¶€ë¶„ì— ë°ì´í„°ê¹Œì§€ ë°›ì•„ì˜¬ í•„ìš”ëŠ” ì—†ì—ˆë‹¤.

ê·¸ëŸ¼ ì‚¬ìš©ìê°€ ìŠ¤í¬ë¡¤ì„ ë‚´ë ¤ ë³´ê³ ìí•˜ëŠ” ë¶€ë¶„ì— ë„ë‹¬í–ˆì„ë•Œ, ì•„ë‹ˆë©´ ë„ë‹¬í•˜ê¸° ì§ì „ì— ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™€ ë³´ì—¬ì£¼ë©´ ì–´ë–¨ê¹Œ ì‹¶ì—ˆë‹¤.

ì´ì „ì— ê°•ì˜ì—ì„œ ì´ë¯¸ì§€ Lazyë¡œë”©ì„ ë°°ì› ì—ˆëŠ”ë°, ì´ë¯¸ì§€ ëŒ€ì‹ ì— ë°ì´í„° ìš”ì²­ì„ í•´ë³´ë©´ ì–´ë–¨ê¹Œ ìƒê°í–ˆë‹¤.

<img src="/assets/blog/javaScript/intersectionObserver.png" width="100%" alt="post image" />

ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ ë˜ìë§ˆì ëª¨ë“  ë°ì´í„°ë“¤ì´ ìš”ì²­ëœë‹¤.

ìš°ì„  í›…ì„ í•˜ë‚˜ ë§Œë“¤ì—ˆë‹¤. refê°ì²´ê°€ ê°ì§€ë˜ë©´ loadedê°€ trueë¡œ ë°”ë€Œê³ , ë”ì´ìƒ ê°ì‹œê°€ ì¤‘ì§€ëœë‹¤.

```tsx
export const useLazyRequest = () => {
  const ref = useRef(null) as MutableRefObject<HTMLDivElement>
  const [loaded, setLoaded] = useState<boolean>(false)

  useEffect(() => {
    const options = {}
    const callback = (entries, observer) => {
      entries.forEach((entry) => {
        console.log(entry)
        if (entry.isIntersecting) {
          console.log('is Intersecting')
          setLoaded(true)
          observer.unobserve(entry.target) // í•œë²ˆë§Œ ìš”ì²­ë˜ë„ë¡ ê°ì‹œ ì¤‘ì§€
        }
      })
    }
    const observer = new IntersectionObserver(callback, options) // ê°ì²´ ìƒì„±í•˜ê¸°
    observer.observe(ref.current)
  }, [])

  return {ref, loaded}
}
```

ì‚¬ìš©í•˜ê³ ì í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¡œ ëŒì•„ì™€ì„œ,

ë‚˜ëŠ” ë°ì´í„° ìš”ì²­ì— SWRì„ ì‚¬ìš©í–ˆë‹¤.

[https://swr.vercel.app/ko](https://swr.vercel.app/ko)

```tsx

// SWR
export const useUserKeywords = (loaded: boolean) => {
  const {data, isValidating, error} = useFetch(loaded ? PATH + '/keywords' : null, {
    revalidateOnFocus: false,
    revalidateIfStale: false,
    shouldRetryOnError: false
  })

  return {
    userKeywords: data,
    isValidating,
    error
  }
}
```

SWRì€ ìœ„ì²˜ëŸ¼ ì„¤ì •í–ˆë‹¤, SWRìì²´ë„ hookì´ê¸° ë•Œë¬¸ì— useEffectë‚˜ ë‹¤ë¥¸ í•¨ìˆ˜ì•ˆì—ì„œ ì‚¬ìš©í•˜ì§€ ëª»í•œë‹¤.

```tsx
const {ref, loaded} = useLazyRequest()
const {userKeywords, isValidating, error} = useUserKeywords(loaded)

<Contents ref={ref}>
        {isValidating ? (
          <Loading />
        ) : (
          <>
           {...}
          </>
        )}
</Contents>
```

4ê°œì˜ ì„¹ì…˜ì´ ìˆëŠ”ë°, í˜ì´ì§€ ì§„ì…ì‹œ 1, 2ë²ˆê¹Œì§€ë§Œ ì‚¬ìš©ìì—ê²Œ ë³´ì´ê³  3, 4ë²ˆì˜ ì»´í¬ë„ŒíŠ¸ë¥¼ ìœ„ì²˜ëŸ¼ ì ìš©í–ˆë‹¤.

refì— ì‚¬ìš©ìì˜ viewê°€ ë„ë‹¬í•˜ë©´ userKeywordsë¥¼ ìš”ì²­í•´ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¨ë‹¤.

<img src="/assets/blog/javaScript/intersectionObserver(1).gif" width="100%" alt="post image" />

ê³¼ê±°ì—ëŠ” getBoundingClientRect() ë¥¼ ì‚¬ìš©í•´ êµ¬í˜„í–ˆë‹¤ê³  í•˜ëŠ”ë°, ë¦¬í”Œë¡œìš° í˜„ìƒì´ë‚˜ ì„±ëŠ¥ë©´ì—ì„œ ë³´ì™„í•˜ê³ ì ìš”ì¦˜ì—” intersection Observerë¥¼ ì‚¬ìš©í•´ íƒ€ê²Ÿì„ ê´€ì°°í•œë‹¤ê³  í•œë‹¤.

ë˜ ë¬´í•œìŠ¤í¬ë¡¤ë„ êµ¬í˜„í•´ ë³¼ ìˆ˜ ìˆë‹¤. í˜ì´ì§€ì˜ ë§¨ ë§ˆì§€ë§‰ ìš”ì†Œì— ë„ë‹¬í–ˆì„ ë•Œ, ìš”ì²­í•˜ëŠ” í˜ì´ì§€ ì¿¼ë¦¬ë¥¼ ++ í•˜ë©´ ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.

ë‹¤ë¥¸ í•„ìš”í•œ í˜ì´ì§€ì— ì ìš©í•´ë´ì•¼ê² ë‹¤!
1c:T1130,

ì´ë²ˆ ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ì— ì‚¬ìš©í•˜ê²Œ ëœ react-hook-formê³¼ ì”¨ë¦„í•˜ë©´ì„œ ì •ë¦¬í•´ë³¸ refì™€ react-hook-formì˜ ê°„ë‹¨í•œ ì›ë¦¬ì— ëŒ€í•´ ì •ë¦¬í•´ë³´ì.

---

### **ref**ë€?

Reactì—ì„œëŠ” propsë¥¼ í†µí•´ì„œë§Œ ë¶€ëª¨ì™€ ìì‹ê°„ì˜ ì»´í¬ë„ŒíŠ¸ì— ìƒí˜¸ì‘ìš©ì„ í•  ìˆ˜ ìˆë‹¤.

ìì‹ ì»´í¬ë„ŒíŠ¸ì— propsë¥¼ ì „ë‹¬í•´ propsì˜ ê°’ì´ ë³€ê²½ë˜ë©´ ìì‹ ì»´í¬ë„ŒíŠ¸ëŠ” ë‹¤ì‹œ ë Œë”ë§ì´ ëœë‹¤.

ê·¸ëŸ¬ë‚˜ propsë¥¼ í†µí•œ ë°©ë²•ì´ ì•„ë‹Œ ì§ì ‘ì ìœ¼ë¡œ ìì‹ ì»´í¬ë„ŒíŠ¸ë¥¼ ìˆ˜ì •í•´ì•¼ë˜ëŠ” ì¼ì´ ìƒê¸¸ ìˆ˜ ìˆëŠ”ë°..

### Refë¥¼ ì‚¬ìš©í•´ì•¼ í•  ë•Œ

-   í¬ì»¤ìŠ¤, í…ìŠ¤íŠ¸ ì„ íƒì˜ì—­, í˜¹ì€ ë¯¸ë””ì–´ì˜ ì¬ìƒì„ ê´€ë¦¬í•  ë•Œ.
-   ì• ë‹ˆë©”ì´ì…˜ì„ ì§ì ‘ì ìœ¼ë¡œ ì‹¤í–‰ì‹œí‚¬ ë•Œ.
-   ì„œë“œ íŒŒí‹° DOM ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ Reactì™€ ê°™ì´ ì‚¬ìš©í•  ë•Œ.

ìš°ì„  DOMì— ì§ì ‘ì ìœ¼ë¡œ ì ‘ê·¼í•˜ëŠ” ë°©ë²•ì€ ê±´ë„ˆ ë›°ê³ , react-hook-formê³¼ ê´€ë ¨ëœ **ë¹„ì œì–´ ì»´í¬ë„ŒíŠ¸ ì œì–´**ì— ê´€í•´ ì•Œì•„ë³´ì.

**react-hook-form**ì˜ ê°€ì¥ í° ëª©ì ì€ í¼í¬ë¨¼ìŠ¤ì´ë©°, **ë¹„ì œì–´ ì»´í¬ë„ŒíŠ¸**ë¥¼ ì‚¬ìš©í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ë‹¤ë¥¸ ë¼ì´ë¸ŒëŸ¬ë¦¬(formik, redux-form ë“±) ì— ë¹„í•´ íƒ€ì´í•‘ì´ë‚˜ ê°’ì´ ë³€ê²½ë  ë•Œ ë¦¬ëœë”ë§ì´ ì¼ì–´ë‚˜ëŠ” ì–‘ì„ ì¤„ì—¬ì¤€ë‹¤.

ì—¬ê¸°ì„œ ë¹„ì œì–´ ì»´í¬ë„ŒíŠ¸ë€,Â 

Reactì—ì„œ ì œì–´í•˜ì§€ ì•Šê³ , ë°”ë‹ë¼ JSë¥¼ ì´ìš©í•´ ì œì–´í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë¹„ì œì–´ ì»´í¬ë„ŒíŠ¸ë¼ í•œë‹¤.

ì‰½ê²Œë§í•´ Reactê°€ ê´€ì—¬í•˜ì§€ ì•ŠëŠ”ë‹¤. (ì¬ì¡°ì •, ë¹„êµ ë“±)

ì´ëŸ° ë¹„ì œì–´ ì»´í¬ë„ŒíŠ¸ë¥¼ ì œì–´í•˜ê¸° ìœ„í•´ì„œ, DOMì— ì ‘ê·¼í•˜ëŠ” ì—­í• ì„ refê°€ í•œë‹¤.

ì˜ˆë¥¼ë“¤ì–´

```javascript
const [test, setTest] = useState('')
<input value={test} onChange={(e) => setTest(e.target.value)} />
```

ìœ„ì™€ê°™ì´ stateë¡œ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê²Œ ë˜ë©´, stateê°€ ë³€í•˜ë©´ì„œ ì´ë¥¼ ì—…ë°ì´íŠ¸ í•˜ê¸° ìœ„í•´ ê³„ì†í•´ì„œ ë¦¬ë Œë”ë§ì´ ëœë‹¤.

<img src="/assets/blog/javaScript/ref.gif" width="100%" alt="post image"/>

ì´ëŠ” Reactì—ì„œ ì œì–´í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë‹¤.

ê·¸ëŸ¬ë©´ êµ³ì´ ì¸í’‹ì— ê°’ë§Œ ë³€í•˜ëŠ”ê±´ë° ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ì´ í•„ìš”í•˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤.

```
  const inputRef = useRef(null)
  const testHandler = (e) => {
    inputRef.current.value = e.target.value
  }
    <input ref={inputRef} onChange={(e) => testHandler(e)} />
```

<img src="/assets/blog/javaScript/ref(1).gif" width="100%" alt="post image"/>

refë¥¼ ì‚¬ìš©í•˜ë©´ ì¸í’‹ê°’ì´ ë³€ê²½ë˜ì–´ë„ ë¦¬ë Œë”ë§ì´ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.

---

### Ref ì™€ í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸

-   í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ëŠ” ì¸ìŠ¤í„´ìŠ¤ê°€ ì—†ê¸° ë•Œë¬¸ì—Â **í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ì— ref ì–´íŠ¸ë¦¬ë·°íŠ¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤**.

ì‚¬ì‹¤ ìœ„ ì˜ˆì œëŠ” í´ë˜ìŠ¤í˜• ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‘ì„±í•´ì•¼ ì í•©í–ˆì§€ë§Œ, í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ì—ì„œë„ refëŠ” ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

ë‹¤ë§Œ ìƒíƒœê°’ì´ ë°”ë€” ë•Œ ë§ˆë‹¤ ë‹¤ì‹œ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ì˜ íŠ¹ì„±ë•Œë¬¸ì— ê¸°ì¡´ê³¼ëŠ” ë‹¤ë¥¸ ë°©ì‹ì„ ì‚¬ìš©í•œë‹¤.

ìœ„ ì˜ˆì œì—ì„œ ì‚¬ìš©í•œ **useRefëŠ” hookìœ¼ë¡œ í•¨ìˆ˜ì˜ ë Œë”ë§ì˜ ìƒê´€ì—†ì´** ìƒíƒœ ê°’ì„ ìœ ì§€í•œë‹¤.

---

### forwardRef

react-hook-formì„ ì‚¬ìš©í•˜ë©´ì„œÂ 

**Warning:Â FunctionÂ componentsÂ cannotÂ beÂ givenÂ refs.Â AttemptsÂ toÂ accessÂ thisÂ refÂ willÂ fail.Â DidÂ youÂ meanÂ toÂ useÂ React.forwardRef()?**

ì´ëŸ° ì—ëŸ¬ë¥¼ ë§Œë‚˜ê²Œ ëëŠ”ë°, ref ê¸°ë°˜ìœ¼ë¡œ êµ¬ì„±ëœ react-hook-formì´ refë¥¼ **ìì‹ìš”ì†Œ(ì¸í’‹ì»´í¬ë„ŒíŠ¸)ì— ì „ë‹¬**í•˜ê¸° ë•Œë¬¸ì— ë°œìƒí•œ ì—ëŸ¬ì˜€ë‹¤.

refëŠ” Reactì—ì„œ propsë¡œ ì‚¬ìš©í•˜ì§€ ëª»í•˜ëŠ” ê²ƒ ì¤‘ì— í•˜ë‚˜ì˜€ëŠ”ë°, ëŒ€í‘œì ì¸ Keyê°’ê³¼ ë™ì¼í•˜ê²Œ **propsë¡œ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤**.

Reactì—ì„œ refë¥¼ propsë¡œ ì‚¬ìš©í•˜ë ¤ë©´ forwardRefë¥¼ ì‚¬ìš©í•´ ìì‹ìš”ì†Œë¡œ refë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤.

ìì‹ ì»´í¬ë„ŒíŠ¸ë¥¼ forwardRef()í•¨ìˆ˜ë¡œ ê°ì‹¸ì£¼ê³ , propsì™€ refë¥¼ ë°›ì•„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```
const Input = forwardRef((props, ref) => {
  return <input ref={ref} />;
});
```

ì¶”ê°€ë¡œ eslint ì—ëŸ¬ë‚˜ ê°œë°œì ë„êµ¬ì—ì„œ forwardRefì‚¬ìš©ì‹œ ì´ë¦„ì´ ë‚˜ì˜¤ì§€ ì•ŠëŠ” ì—ëŸ¬ëŠ”

displayName ì†ì„±ì— ì´ë¦„ì„ ì„¤ì •í•˜ê±°ë‚˜, ìµëª…í•¨ìˆ˜ ëŒ€ì‹  ì´ë¦„ìˆëŠ” í•¨ìˆ˜ë¥¼ ë„˜ê²¨ ì£¼ë©´ ëœë‹¤.

```
Input.displayName = "Input";
```

```
const Input = forwardRef(function Input(props, ref) {
  return <input ref={ref} />;
});
```

---

refëŠ” íŠ¹ì • DOMì— ì ‘ê·¼í•´ ì• ë‹ˆë©”ì´ì…˜ì„ ì´ìš©í• ë•Œë§Œ ì£¼ë¡œ ì‚¬ìš©í–ˆì—ˆëŠ”ë°, ì´ë²ˆ ê¸°íšŒì— ì¡°ê¸ˆ ë” ìì„¸í•˜ê²Œ ë“¤ì—¬ë‹¤ ë³¸ê²ƒ ê°™ë‹¤.ğŸ¤”
1d:T18c7,
ì´ë²ˆì— ìœ ì§€ë³´ìˆ˜í•˜ë©´ì„œ ì§„í–‰í–ˆë˜ TTS (Text-to-Speech)

ë‹¨ì–´ì˜ ë°œìŒì„ ì½ì–´ì£¼ë„ë¡ í•´ì•¼í–ˆë‹¤.

ê²°êµ­ Google TTSë¡œ êµ¬í˜„í•˜ê¸´ í–ˆì§€ë§Œ, ì²˜ìŒì—ëŠ” Speechsynthesisë¥¼ ì‚¬ìš©í•´ êµ¬í˜„í–ˆì—ˆë‹¤.

SppechsynthesisëŠ” (ìŒì„± í•©ì„±) Web Speech APIì´ê³  ì£¼ì–´ì§„ í…ìŠ¤íŠ¸ë¥¼ ì†Œë¦¬ë¡œ ë°”ê¿”ì£¼ëŠ”, ìŒì„± ì„œë¹„ìŠ¤ì— ëŒ€í•œ ì»¨íŠ¸ë¡¤ëŸ¬ ì¸í„°í˜ì´ìŠ¤ì´ë‹¤.

---

### Speechsynthesis

IEë¹¼ê³  ë¸Œë¼ìš°ì € ê±°ì˜ ì§€ì›í•œë‹¤.

```javascript
speechSynthesis.getVoices();
```

ë¡œ ì§€ì›í•˜ëŠ” ìŒì„± ëª©ë¡ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.


<img src="/assets/blog/javaScript/speechsynthesis.png" width="100%" alt="post image"/>

ë¬¸ì œëŠ”,, ë¸Œë¼ìš°ì €ë§ˆë‹¤ ë˜ëŠ” OSë§ˆë‹¤ ì§€ì›í•˜ëŠ” ìŒì„±ì´ ë‹¬ë¼ì„œ ëª¨ë‘ ë™ì¼í•˜ì§€ ëª»í–ˆë‹¤,

ê·¸ë˜ì„œ ëª¨ë°”ì¼ë”°ë¡œ ì›¹ë”°ë¡œ ë¸Œë¼ìš°ì €ë³„ë¡œ ëª©ì†Œë¦¬ê°€ ë‹¤ë¥´ê²Œ ì„¸íŒ…ë˜ì–´ Google TTSë¡œ ë°”ê¾¸ê²Œ ë˜ì—ˆë‹¤.

```javascript
const speech = new SpeechSynthesisUtterance()

// ìŒë†’ì´ì™€ ëª©ì†Œë¦¬ ë“± ì„¤ì •ì´ ê°€ëŠ¥
speech.voice
speech.text
speech.lang
speech.pitch
speech.rate
speech.volume
```

```
// speechSynthesisUtteranceì— ì„¤ì •í•œ ìŒì„± ì‹¤í–‰
window.speechSynthesis.speak(speech)
```

---

### Google TTS

ë‘ê°€ì§€ ë°©ì‹ì´ ìˆì—ˆë‹¤.

í´ë¼ì´ì–¸íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ API

í´ë¼ì´ì–¸íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬

#### Node.js

```javascript
npm install --save @google-cloud/text-to-speech	//ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜


// Imports the Google Cloud client library
const textToSpeech = require('@google-cloud/text-to-speech');

// Import other required libraries
const fs = require('fs');
const util = require('util');
// Creates a client
const client = new textToSpeech.TextToSpeechClient();
async function quickStart() {
  // The text to synthesize
  const text = 'hello, world!';

  // Construct the request
  const request = {
    input: {text: text},
    // Select the language and SSML voice gender (optional)
    voice: {languageCode: 'en-US', ssmlGender: 'NEUTRAL'},
    // select the type of audio encoding
    audioConfig: {audioEncoding: 'MP3'},
  };

  // Performs the text-to-speech request
  const [response] = await client.synthesizeSpeech(request);
  // Write the binary audio content to a local file
  const writeFile = util.promisify(fs.writeFile);
  await writeFile('output.mp3', response.audioContent, 'binary');
  console.log('Audio content written to file: output.mp3');
}
quickStart();
```

êµ¬ê¸€ì˜ ìƒ˜í”Œì½”ë“œ

ìœ„ ì½”ë“œë¡œ í…ŒìŠ¤íŠ¸í•´ë³´ë‹ˆ output.mp3 íŒŒì¼ì´ ë§Œë“¤ì–´ì§€ê³  ì´ íŒŒì¼ì„ ì¬ìƒí•˜ë©´ ìš”ì²­í•œ textê°€ ì¬ìƒëë‹¤.

í•˜ì§€ë§Œ íŒŒì¼ë„ í•„ìš”ì—†ê³ , ìŒì„±ë§Œ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë°›ìœ¼ë©´ ëê¸° ë•Œë¬¸ì— ì¡°ê¸ˆ ë” ì‚´í´ë´¤ëŠ”ë°, reponse ë¶€ë¶„ì—ì„œ arrayBufferì˜ ë²„í¼ë°ì´í„°ê°€ ì°í˜”ê³ , ì´ response ë°ì´í„°ë¥¼ ë°”ë¡œ í´ë¼ì´ì–¸íŠ¸ë¡œ ë³´ë‚´ì¤¬ë‹¤.

#### React

```javascript
      const requestAudioFile = async (e) => {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)

            const response = await axios({
                method: 'get',
                url: `http://localhost:4000/exam1`,
                params: {test: e.target.ariaValueText},
                responseType: 'arraybuffer'
            })

            // ë²„í¼ ë°ì´í„° ë¹„ë™ê¸° ë””ì½”ë”©
            const audioBuffer = await audioContext.decodeAudioData(response.data)

            // ì˜¤ë””ì˜¤ source ë§Œë“¤ê¸°
            const gainNode = audioContext.createGain()
            const source = audioContext.createBufferSource()

            // ìƒì„±ëœ sourceì— ì¬ìƒí•  ë°ì´í„° ì„ ì–¸
            source.buffer = audioBuffer
            source.connect(gainNode)

            // ì¬ìƒí•  ìŠ¤í”¼ì»¤ì— source ë„£ê¸°
            gainNode.connect(audioContext.destination)
            source.start()

            console.log('responce', response.data);
            console.log('audioContext', audioContext);
            // -------------- //
            const audioBuffer = await audioContext.decodeAudioData(decode);
            console.log('audioBuffer', audioBuffer);
            //create audio source
              const gainNode = audioContext.createGain()
              const source = audioContext.createBufferSource()
            console.log('source : ', source);

              source.buffer = audioBuffer
              source.connect(gainNode)
              gainNode.connect(audioContext.destination)

            source.start();
        }
```

ì½í˜€ì•¼í•  textë¥¼ paramsë¡œ ë³´ëƒˆê³ , Web Audio API ì˜ AudioContextë¥¼ ì‚¬ìš©í•´ì„œ ë°›ì•„ì˜¨ ë²„í¼ë°ì´í„°ë¥¼ ì½ë„ë¡ í–ˆë‹¤.

ê·¼ë° ëª‡ê°€ì§€ ë¬¸ì œê°€ ë” ìˆì—ˆëŠ”ë°, ëª¨ë°”ì¼ì—ì„œëŠ” ì‘ë™í•˜ì§€ ì•ŠëŠ”ê²ƒ..audio íƒœê·¸ë¥¼ ì´ìš©í•´ ì½í˜€ì•¼ í•˜ê¸° ë•Œë¬¸ì— ë²„íŠ¼ ì»¤ìŠ¤í…€ì´ ë˜ì§€ ì•Šì•˜ë‹¤.

ê·¸ë˜ì„œ ë³€ê²½í•œê²Œ API

```
POST https://texttospeech.googleapis.com/v1/text:synthesize?key='Google API KEY'
```

```json
{
  "input":{
    "text":"Android is a mobile operating system developed by Google, based on the Linux kernel and designed primarily for touchscreen mobile devices such as smartphones and tablets."
  },
  "voice":{
    "languageCode":"en-gb",
    "name":"en-GB-Standard-A",
    "ssmlGender":"FEMALE"
  },
  "audioConfig":{
    "audioEncoding":"MP3"
  }
}
```

ìœ„ì²˜ëŸ¼ ì‘ì„±í•´ POSTìš”ì²­ì„ ë³´ë‚´ë©´Â Â 

```
//NExAARqoIIAAhEuWAAAGNmBGMY4EBcxvABAXBPmPIAF//yAuh9Tn5CEap3/o
...
VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV
```

ìŒì„±ì´ base64 ì¸ì½”ë”© í˜•ì‹ìœ¼ë¡œ ë“¤ì–´ì˜¨ë‹¤.

ë°›ì€ ì¸ì½”ë”©ëœ ìŒì„±ì„

```javascript
const [audioSource, setAudioSource] = useState(null)

const requestAudioFile = async (e) => {
  const response = await axios.post(
      // eslint-disable-next-line no-undef
    `https://texttospeech.googleapis.com/v1/text:synthesize?key=${process.env.REACT_APP_GOOGLE_TTL}`,
    {
      input: {
        text: e?.target?.ariaValueText
      },
      voice: {
        languageCode: 'en-US',
        name: 'en-US-Standard-H',
        ssmlGender: 'FEMALE'
      },
      audioConfig: {
        audioEncoding: 'LINEAR16',
        speakingRate: 1
      }
    }
  );
  setAudioSource(new Audio("data:audio/wav;base64," + response.data?.audioContent));
};

    useEffect(() => {
        audioSource?.play()
    }, [audioSource])
```

new Audio ì˜¤ë””ì˜¤ ê°ì²´ë¥¼ ì´ìš©í•´ ì˜¤ë””ì˜¤ì†ŒìŠ¤ê°€ ë“¤ì–´ì˜¬ë•Œ, ì˜¤ë””ì˜¤ë¥¼ ë§Œë“¤ê³  ì¬ìƒì‹œì¼°ë‹¤.
1e:Tf2b,
**[ìœ ë™ê· ë‹˜ì˜ ê°•ì˜](https://www.inflearn.com/course/%EC%9B%B9-%EC%84%B1%EB%8A%A5-%EC%B5%9C%EC%A0%81%ED%99%94-%EB%A6%AC%EC%95%A1%ED%8A%B8-1)ë¥¼ ë³´ë©° ì •ë¦¬í•œ ê¸€ ì…ë‹ˆë‹¤.**

---

### 1\. Layout Shift

ì›ì¸

1\. ì‚¬ì´ì¦ˆê°€ ì •í•´ì ¸ ìˆì§€ ì•Šì€ ì´ë¯¸ì§€

2\. ì‚¬ì´ì¦ˆê°€ ì •í•´ì ¸ ìˆì§€ ì•Šì€ ê´‘ê³ 

3\. ë™ì ìœ¼ë¡œ ì‚½ì…ëœ ì½˜í…ì¸ 

4\. Web font (FOIT, FOUT)

<img src="/assets/blog/javaScript/web-optimization-3-1.png" width="100%" alt="post image"/>

ì—¬ëŸ¬ ì´ë¯¸ì§€ë¥¼ ë¡œë“œí•  ë•Œ, ë¨¼ì € ë¶ˆëŸ¬ì˜¨ ì´ë¯¸ì§€ ìë¦¬ë¥¼ ë‚˜ì¤‘ì— ë¶ˆëŸ¬ì˜¨ ì´ë¯¸ì§€ê°€ ë°€ì–´ë‚´ê²Œ ë˜ë©´ì„œ ë ˆì´ì•„ì›ƒ ë³€ê²½ì´ ê³„ì† ë°œìƒí•œë‹¤.

```js
<ImageWrap>
  <Image />
</ImageWrap>
```

ì´ë•Œ Wrapì— ê³ ì •ê°’ì„ ì •í•´ì£¼ê³  ImageëŠ” ê·¸ ê°’ì„ ë”°ë¼ê°€ê¸°ë§Œ í•˜ë©´ ëœë‹¤. ì—¬ê¸°ì„œëŠ” 16:9 ë¹„ìœ¨ë¡œ ì§€ì •í•˜ê¸° ìœ„í•´ 9 / 16 = 56.25%ë¡œ ë†’ì´ë¥¼ ì¡ê³  Imageë¥¼ ê·¸ ì•ˆì— ë„£ëŠ” ë°©ì‹ìœ¼ë¡œ í–ˆë‹¤.

<img src="/assets/blog/javaScript/web-optimization-3-2.png" width="100%" alt="post image"/>

ì»¨í…ì¸ ê°€ ìƒˆë¡œ ë“¤ì–´ì˜¤ë©´ì„œ ê¸°ì¡´ ì»¨í…ì¸ ë¥¼ ë°€ì–´ë‚´ì§€ ì•Šë„ë¡ ì»¨í…ì¸ ë¥¼ ê·¸ë ¤ì¤„ ê³³ì— ë¯¸ë¦¬ ìë¦¬ë¥¼ ë§Œë“¤ì–´ ë†“ëŠ”ê²ƒì´ë‹¤.

---

### 2\. React-lazyload

```shell
npm i react-lazyload
```

ê°•ì˜ì—ì„œëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í–ˆì§€ë§Œ, ë‹¤ìŒì—” ìŠ¤ìŠ¤ë¡œ êµ¬í˜„í•´ í¬ìŠ¤íŒ…í•´ì•¼ê² ë‹¤.

ìŠ¤í¬ë¡¤ì´ë²¤íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒ ê°™ë‹¤.

---

### 3\. useSelect ë Œë”ë§ ë¬¸ì œ

<img src="/assets/blog/javaScript/web-optimization-3-3.png" width="100%" alt="post image"/>

ë¦¬ì•¡íŠ¸ dev-toolì—ì„œ Highlight updates ... ë¥¼ ì²´í¬í•´ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë˜ëŠ”ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

useSelectorëŠ” dispatchë¡œ Redux Storeê°€ ë³€ê²½ë˜ë©´ êµ¬ë…í•˜ê³  ìˆëŠ” ì»´í¬ë„ŒíŠ¸ì— stateê°€ ë³€ê²½ë˜ì—ˆë‹¤ê³  ì•Œë ¤ì¤€ë‹¤.

ê·¸ëŸ¼ ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” ê¸°ì¡´ stateì™€ ì—…ë°ì´íŠ¸ëœ stateë¥¼ ë¹„êµí•´ ê°’ì´ ë‹¤ë¥´ë©´ ë‹¤ì‹œ ë Œë”ë§ í•˜ê²Œ ëœë‹¤.

ì—¬ê¸°ì„œ ë¹„êµí•˜ëŠ” ë°©ì‹ì€ useSelectorì˜ ë¦¬í„´ê°’ì„ ë¹„êµí•˜ëŠ”ë°

```js
const { modalVisible, bgColor, src, alt } = useSelector(state => ({
  modalVisible: state.modalVisible,
  bgColor: state.bgColor,
  src: state.src,
  alt: state.alt,
}));
```

ë¦¬í„´ê°’ì„ ì˜¤ë¸Œì íŠ¸ í˜•ì‹ìœ¼ë¡œ ì‘ì„±í•˜ë©´, ê°’ì„ ìƒì„±í•  ë•Œ ë§ˆë‹¤ ìƒˆë¡œìš´ ì˜¤ë¸Œì íŠ¸ë¥¼ ë§Œë“¤ê¸° ë•Œë¬¸ì— ë§¤ë²ˆ ìƒˆë¡­ê²Œ ë Œë”ë§í•˜ê²Œ ëœë‹¤.

```js
const modalVisible = useSelector(state => state.modalVisible)
const bgColor = useSelector(state => state.bgColor)
const src = useSelector(state => state.src)
const alt = useSelector(state => state.alt)
```

ì˜¤ë¸Œì íŠ¸ë¥¼ ìƒˆë¡­ê²Œ ë§Œë“¤ì§€ ì•Šë„ë¡ stateë¥¼ ìª¼ê°œê³  ìƒˆë¡œìš´ Equality Functionì„ ì‚¬ìš©í•´ì•¼í•œë‹¤.

```js
const { modalVisible, bgColor, src, alt } = useSelector(state => ({
  modalVisible: state.modalVisible,
  bgColor: state.bgColor,
  src: state.src,
  alt: state.alt,
}), shallowEqual);
```

---

### 4\. Redux Reselect

stateì˜ ê°’ë“¤ì„ ê°€ì§€ê³  ê°€ê³µí•´ì•¼ë˜ëŠ” ê°’ì´ ìˆì„ ë•Œ useSelectorë‚´ë¶€ì—ì„œ ê°€ê³µí•´ ê°’ì„ ì¤€ë‹¤.

```js
const selectFilteredPhotos = createSelector([selectê°’], (selectê°’) => (ê°€ê³µí•  ê²°ê³¼ë¥¼ ë¦¬í„´)
const photos = useSelector(selectFilteredPhotos)
```

ë˜ ë©”ëª¨ì´ì œì´ì…˜ ë°©ì‹ì„ í†µí•´ ê°’ì„ ë¹„êµí•˜ë¯€ë¡œ ë¶ˆí•„ìš”í•œ ê³„ì‚°ë„ ì—†ì• ì¤€ë‹¤.

selectê°’ì´ ê°™ì€ ê°’ìœ¼ë¡œ ë“¤ì–´ì˜¤ë©´ ë¯¸ë¦¬ ìºì‹±í•´ë‘” ê°’ê³¼ ë¹„êµí•´ ê°’ì´ ë³€í•˜ì§€ ì•Šìœ¼ë©´ ê·¸ëŒ€ë¡œ ë¦¬í„´í•œë‹¤.

---

### 5\. Memoization ì ìš©

ì¸í’‹ì— ë”°ë¼ ì•„ì›ƒí’‹ì— ë‚˜ì˜¤ëŠ” ê°’ì— ëŒ€í•´ì„œ ë¯¸ë¦¬ ì €ì¥í•´ ë†“ëŠ” ê¸°ë²•ì´ë‹¤.

a -> Aê°€ ì•„ì›ƒí’‹ì´ë‹¤ ë¼ê³  í• ë•Œ, ë‹¤ìŒë²ˆì— ë˜ aê°€ ë“¤ì–´ì˜¤ë©´ ë¡œì§ì„ ì¼ì¼íˆ ì‹¤í–‰í•˜ì§€ì•Šê³  ì €ì¥í•´ë‘” ê°’ Aë¥¼ ë°”ë¡œ ë¦¬í„´í•˜ê²Œ ëœë‹¤.

ìˆœìˆ˜í•¨ìˆ˜ë§Œ ê°€ëŠ¥

ê·¸ë ‡ë‹¤ê³  ë¬´ì§€ì„±ìœ¼ë¡œ ì“°ëŠ”ê±´ ì¢‹ì§€ ì•Šë‹¤.

ë©”ëª¨ì´ì œì´ì…˜ì´ ë¶ˆí•„ìš”í•œ í•¨ìˆ˜ì— ì ìš©í•˜ëŠ”ê±´ ì˜¤íˆë ¤ ë©”ëª¨ë¦¬ ë‚­ë¹„ê°€ ë  ìˆ˜ ìˆë‹¤.
1f:T2721,
**[ìœ ë™ê· ë‹˜ì˜ ê°•ì˜](https://inf.run/4zeg)ë¥¼ ë³´ë©° ì •ë¦¬í•œ ê¸€ ì…ë‹ˆë‹¤.**

---

### 1\. ì´ë¯¸ì§€ ì§€ì—°(lazy) ë¡œë”©

<img src="/assets/blog/javaScript/web-optimization-2-1.png" width="100%" alt="post image"/>

ì˜ˆì œì—ì„œ ë„¤íŠ¸ì›Œí¬ë¥¼ 6ë©”ê°€ë¹„íŠ¸ë¡œ ë§ì¶°ë†“ì•˜ë‹¤.

ì œì¼ ë¨¼ì € ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì ¸ì•¼í•  ë™ì˜ìƒì´ ì´ë¯¸ì§€ ë³´ë‹¤ ë” ëŠ¦ê²Œ ë‹¤ìš´ë¡œë“œ ë˜ëŠ” ë¶€ë¶„ì„ ë™ì˜ìƒì´ ë¨¼ì € ë‹¤ìš´ë¡œë“œ ë˜ë„ë¡ ìˆ˜ì •í•´ì•¼í•œë‹¤.

-   ì´ë¯¸ì§€ë¥¼ ë¹ ë¥´ê²Œ ë‹¤ìš´ë¡œë“œ
-   **ì´ë¯¸ì§€ë¥¼ ë‚˜ì¤‘ì— ë‹¤ìš´ë¡œë“œ, ë™ì˜ìƒ ë¨¼ì € ë‹¤ìš´ë¡œë“œ**

ë‘ë²ˆì§¸ ë°©ë²•ì„ ì‚¬ìš©í•´ ìˆ˜ì •(image lazy)

ì´ë¯¸ì§€ë¥¼ í•„ìš”í• ë•Œ(ë‚˜ì¤‘ì—, ë³´ì—¬ì§€ê¸° ì§ì „ì—) ë¡œë“œë˜ë„ë¡ í•´ì•¼í•œë‹¤.

ìŠ¤í¬ë¡¤ì´ ì´ë¯¸ì§€ê°€ ìˆëŠ” ê³³ì— ë„ë‹¬í•˜ë©´ ì´ë¯¸ì§€ë¥¼ ë¡œë“œí•˜ê³ , ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ë³´ì´ì§€ ì•Šë„ë¡ í•´ì•¼í•˜ëŠ”ë°,

ì´ ë°©ë²•ì€ ì‚¬ìš©ìê°€ ë§¤ë²ˆ ìŠ¤í¬ë¡¤ì„ í•  ë•Œë§ˆë‹¤ ì´ë²¤íŠ¸í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ëŠ” ë‹¨ì ì´ ìˆë‹¤.

ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ë©´ **IntersectionObserver**ë¡œ í•´ê²°í•  ìˆ˜ ìˆë‹¤. ì¦‰ í™”ë©´ì— íŠ¹ì • ì´ë¯¸ì§€ê°€ ë“¤ì–´ì˜¬ ë•Œë§Œ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê²Œ ëœë‹¤.

[https://developer.mozilla.org/ko/docs/Web/API/Intersection\_Observer\_API](https://developer.mozilla.org/ko/docs/Web/API/Intersection_Observer_API)

```js
const observer = new IntersectionObserver(callback, options)
observer.observe(elementê°ì²´)
```

```js
    const imgRef = useRef(null)

   useEffect(() => {
      const options = {}
      const callback = () => {
         console.log('callback')
      }
      const observer = new IntersectionObserver(callback, options)

      observer.observe(imgRef.current)
   }, [])


   return (
      <div className="Card text-center">
         <img src={props.image} ref={imgRef} />
         <div className="p-5 font-semibold text-gray-700 text-xl md:text-lg lg:text-xl keep-all">
            {props.children}
         </div>
      </div>
   )
}
```

<img src="/assets/blog/javaScript/web-optimization-2-2.png" width="100%" alt="post image"/>

ìŠ¤í¬ë¡¤ì„ ë‚´ë ¤ ì´ë¯¸ì§€ê°€ **ë³´ì´ê±°ë‚˜ ì‚¬ë¼ì§ˆë•Œ** ì½˜ì†”ì´ ì°íŒë‹¤.

ì´ë¯¸ì§€ê°€ ë³´ì´ëŠ” ê·¸ ìˆœê°„ì—ë§Œ ë¡œë“œí•˜ë ¤ë©´ callback í•¨ìˆ˜ì— entriesì™€ observerê°ì²´ë¥¼ ë„˜ê²¨ì£¼ë©´ ëœë‹¤.

```js
useEffect(() => {
   const options = {}
   const callback = (entries, observer) => {
      entries.forEach(entry => {
         if(entry.isIntersecting){
            console.log('is Intersecting')
         }
      })
   }
   const observer = new IntersectionObserver(callback, options)

   observer.observe(imgRef.current)
}, [])
```

<img src="/assets/blog/javaScript/web-optimization-2-3.png" width="100%" alt="post image"/>

ìœ„ì™€ëŠ” ë‹¤ë¥´ê²Œ í™”ë©´ì•ˆì— ì´ë¯¸ì§€ê°€ **ë³´ì¼ ë•Œë§Œ** ì½˜ì†”ì´ ì°íŒë‹¤.

```js
    const imgRef = useRef(null)

    useEffect(() => {
        const options = {}
        const callback = (entries, observer) => {
            entries.forEach(entry => {
                if(entry.isIntersecting){
                    console.log('is Intersecting', entry.target.dataset.src)
                    entry.target.src = entry.target.dataset.src
                    // ì´ë¯¸ì§€ê°€ ë“¤ì–´ì˜¤ë©´ ë”ì´ìƒ ê°ì‹œí•˜ì§€ ì•ŠìŒ
                    observer.unobserve(entry.target)
                }
            })
        }
        const observer = new IntersectionObserver(callback, options)
        // ì´ë¯¸ì§€ë¥¼ ë„£ìŒ
        observer.observe(imgRef.current)
    }, [])


    return (
        <div className="Card text-center">
            <img data-src={props.image} ref={imgRef}/>
            <div className="p-5 font-semibold text-gray-700 text-xl md:text-lg lg:text-xl keep-all">
                {props.children}
            </div>
        </div>
    )
}
```

<img src="/assets/blog/javaScript/web-optimization-2-4.png" width="100%" alt="post image"/>

ë™ì˜ìƒì„ ë¨¼ì € ë¡œë“œí•˜ê³ , ì´ë¯¸ì§€ë¥¼ ë¶ˆëŸ¬ì˜´

---

### 2\. ì´ë¯¸ì§€ ì‚¬ì´ì¦ˆ ìµœì í™”

ìœ„ì—ì„œ ì§€ì—°ë¡œë”©ì„ ì‚¬ìš©í•´ ì´ë¯¸ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” íƒ€ì´ë°ì„ ì¡°ì ˆí–ˆì§€ë§Œ ê·¸ë˜ë„ ì´ë¯¸ì§€ ìì²´ì˜ ìš©ëŸ‰ì´ í¬ë‹¤ë©´ ë¶ˆëŸ¬ì˜¤ëŠ” ì†ë„ê°€ ëŠë ¤ì§ˆ ìˆ˜ ë°–ì— ì—†ë‹¤.

ì´ë¯¸ì§€ í¬ë§·, í™•ì¥ì ì¢…ë¥˜

- JPGë¥¼ **WEBP**(êµ¬ê¸€ì—ì„œ ë‚˜ì˜¨ ì´ë¯¸ì§€ í¬ë§·, JPGì— ë¹„í•´ì„œ í™”ì§ˆì´ë†’ê³  ìš©ëŸ‰ì´ ë‚®ìŒ)ë¡œ ë³€ê²½,

* ê¼­ WEBPë¡œ í• í•„ìš”ëŠ” ì—†ë‹¤ (**WEBP, WEBM**ì€ í˜„ì¬ ì˜ ì“°ì§€ ì•ŠëŠ”ë‹¤) í˜„ì¬ ì§€ì›í•˜ì§€ì•ŠëŠ” ë¸Œë¼ìš°ì €ë„ ìˆìŒ

**picture** íƒœê·¸ë¡œ ì´ë¯¸ì§€ ë¶„ê¸°(ë‚˜ì¤‘ì— ìì„¸í•˜ê²Œ ë°°ì›Œë³´ì)

```html
<picture>
   <source  data-srcset={props.webp} type='image/webp'/>
   <img data-src={props.image} ref={imgRef}/>
</picture>
```

ì´ë¯¸ì§€ í¬ë§·ì€ [https://squoosh.app/](https://squoosh.app/) ë¥¼ ì‚¬ìš©í–ˆë‹¤.

<img src="/assets/blog/javaScript/web-optimization-2-5.png" width="100%" alt="post image"/>

ì˜ˆì œì—ì„œ ë¸Œë¼ìš°ì €ì— ë³´ì¼ í¬ê¸°ëŠ” 300 x 300 ì´ë¯€ë¡œ **x2**ë¥¼í•´ 600 x 600ìœ¼ë¡œ í¬ë§·

ì´ë¯¸ì§€ê°€ 9.74MBì—ì„œ **21.9KB**ë¡œ ì¤„ì—ˆë‹¤.

---

### 3\. ë™ì˜ìƒ ì‚¬ì´ì¦ˆ ìµœì í™”

ë™ì˜ìƒì´ ë©”ì¸ ì»¨í…ì¸ ê°€ ì•„ë‹Œ ê²½ìš° ì í•©

ë™ì˜ìƒë„ **WEBM**ìœ¼ë¡œ í¬ë§·

```html
<video
   className="absolute translateX--1/2 h-screen max-w-none min-w-screen -z-1 bg-black min-w-full min-h-screen"
   autoPlay
   loop
   muted
>
   <source src={video_webm} type='video/webm' />
   <source src={video} type='video/mp4' />
</video>
```

---

### 4\. í°íŠ¸ ìµœì í™”

í°íŠ¸ë„ ë¦¬ì†ŒìŠ¤ë¼ ë„¤íŠ¸ì›Œí¬ë¥¼ í†µí•´ ë°›ì•„ì˜¨ë‹¤.

- ì›¹ í°íŠ¸ì˜ ë¬¸ì œì 

**FOUT**(Flash of Unstyled Text) = í°íŠ¸ë¥¼ ë‹¤ìš´ë¡œë“œ í•˜ê¸° ì „ì—ëŠ” **ê¸°ë³¸í°íŠ¸ë¡œ ì»¨í…ì¸ **ë¥¼ ë³´ì—¬ì¤Œ

**FOIT**(Flash of Invisible Text) = í°íŠ¸ê°€ ë‹¤ìš´ë¡œë“œ ë˜ê¸° ì „ì—ëŠ” **ì»¨í…ì¸ ë¥¼ ë³´ì—¬ì£¼ì§€ ì•ŠìŒ**

1. í°íŠ¸ ì ìš© ì‹œì  ì»¨íŠ¸ë¡¤

-   font-display ì‚¬ìš©
    \- auto : ë¸Œë¼ìš°ì € ê¸°ë³¸ ë™ì‘
    \- block : FOIT (timeout = 3s)
    \- swap : FOUT
    \- fallback : FOIT (timeout = 0.1s) 0.1ì´ˆ í›„ì—ë„ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í•˜ë©´ **ê¸°ë³¸ í°íŠ¸ ìœ ì§€**, ì´í›„ì— ìºì‹œ
    \- optional : FOIT (timeout = 0.1s) ì´í›„ ë„¤íŠ¸ì›Œí¬ ìƒíƒœì— ë”°ë¼ **ê¸°ë³¸í°íŠ¸ë¡œ ìœ ì§€í• ì§€ ì›¹í°íŠ¸ë¥¼ ì ìš©í• ì§€ ê²°ì •**, ì´í›„ì— ìºì‹œ

```css
@font-face {
	font-family: BMYEONSUNG;
	src: url('./assets/fonts/BMYEONSUNG.ttf');
	font-display: swap;
}â€‹
```

<img src="/assets/blog/javaScript/web-optimization-2-6.gif" width="100%" alt="post image"/>

-   fontfaceobserver ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ ì‹œê°ì ì¸ íš¨ê³¼

```css
@font-face {
   font-family: BMYEONSUNG;
   src: url('./assets/fonts/BMYEONSUNG.ttf');
   font-display: block;
}
```

```js
const [isFontLoaded, setIsFontLoaded] = useState(false)

const font = new FontFaceObserver('BMYEONSUNG');

useEffect(() => {
   font.load().then(function () {
      console.log('BMYEONSUNG has loaded');
      setIsFontLoaded(true)
   });
}, [])

return (
    <div className="..." style={{opacity: isFontLoaded ? 1 : 0, transition: 'opacity 0.3s ease'}} >
        <div className="...">
            {...}
        </div>
    </div>
)
```

2. í°íŠ¸ ì‚¬ì´ì¦ˆ ì¤„ì´ê¸°

í°íŠ¸ í¬ë©§ ì‚¬ì´íŠ¸ [https://transfonter.org/](https://transfonter.org/)

- ì›¹í°íŠ¸ í¬ë§· ì‚¬ìš© (íŒŒì¼ í¬ê¸° = EOT > TTF/OTF > WOFF > WOFF2)

```css
@font-face {
   font-family: BMYEONSUNG;
       /* ë¡œì»¬ì— í°íŠ¸ê°€ ìˆìœ¼ë©´ ë°”ë¡œ ì ìš©*/
   src: local('BMYEONSUNG'),
       url('./assets/fonts/BMYEONSUNG.woff2') format('woff2'),
       /* ì§€ì›í•˜ì§€ ì•ŠëŠ” ë¸Œë¼ìš°ì € ëŒ€ì‘ */
       url('./assets/fonts/BMYEONSUNG.woff') format('woff'),
       url('./assets/fonts/BMYEONSUNG.ttf') format('truetype');
   font-display: block;
}
```

- local í°íŠ¸ ì‚¬ìš©

- **Subset** ì‚¬ìš©

í•„ìš”í•œ ê¸€ìë§Œ ê°€ì ¸ì™€ì„œ ì‚¬ìš© "ABCDEFGHIJKLMNOPQR"

<img src="/assets/blog/javaScript/web-optimization-2-7.png" width="100%" alt="post image"/>

ë³€í™˜í•˜ì§€ ì•Šì€ í°íŠ¸ëŠ” í¬í•¨ë˜ì§€ ì•ŠìŒ

- **Unicode Range** ì ìš©

```css
@font-face {
   font-family: BMYEONSUNG;
        /* ë¡œì»¬ì— í°íŠ¸ê°€ ìˆìœ¼ë©´ ë°”ë¡œ ì ìš©*/
   src: url('./assets/fonts/subset-BMYEONSUNG.woff2') format('woff2'),
        /* ì§€ì›í•˜ì§€ ì•ŠëŠ” ë¸Œë¼ìš°ì € ëŒ€ì‘ */
        url('./assets/fonts/subset-BMYEONSUNG.woff') format('woff'),
        url('./assets/fonts/BMYEONSUNG.ttf') format('truetype');
   font-display: block;
   unicode-range: U+0041;
}
```

<img src="/assets/blog/javaScript/web-optimization-2-8.png" width="100%" alt="post image"/>

Subsetì€ ë Œë”ë§ í•˜ëŠ” í…ìŠ¤íŠ¸ì— í°íŠ¸ê°€ í•„ìš”í•˜ì§€ ì•Šì•„ë„ í°íŠ¸ë¥¼ ë¡œë“œí•˜ì§€ë§Œ unicode-rangeë¥¼ ì‚¬ìš©í•˜ë©´ í°íŠ¸ê°€ í•„ìš”í•˜ì§€ ì•Šìœ¼ë©´ ë¡œë“œí•˜ì§€ ì•ŠëŠ”ë‹¤

- data-urië¡œ ë³€í™˜

Base64 encode í•´ ë¶ˆëŸ¬ì˜¤ëŠ” ë°©ì‹

- **Preload**

í•´ë‹¹í•˜ëŠ” í˜ì´ì§€ì— í°íŠ¸ê°€ í•„ìš”í•˜ë‹¤ëŠ” ê²ƒì„ HTMLì— ì‘ì„±

```html
<link rel="preload" href="BMYEONSUNG.woff2" as="font" type="font/woff2" crossorigin>
```

<img src="/assets/blog/javaScript/web-optimization-2-9.png" width="100%" alt="post image"/>

CSSê°€ ë¡œë“œë˜ê¸° ì „ì— í°íŠ¸ê°€ ë¨¼ì € ë¡œë“œë¨

---

### 5\. ìºì‹œ ìµœì í™”

ì›¹ ë¸Œë¼ìš°ì €ëŠ” í¬ê²Œ ë©”ëª¨ë¦¬ ìºì‹œ, ë””ìŠ¤í¬ ìºì‹œ ë‘ê°€ì§€ë¡œ ìºì‹±í•œë‹¤.

**ë©”ëª¨ë¦¬ ìºì‹œëŠ” RAM**ì— ì €ì¥, **ë””ìŠ¤í¬ ìºì‹œëŠ” fileë¡œ ë°ì´í„°**ë¥¼ ì €ì¥

- Cache-Control

ë¸Œë¼ìš°ì € ì´ë¯¸ì§€ ìš”ì²­ -> ì„œë²„

ì„œë²„ -> ë¸Œë¼ìš°ì €ì— ì´ë¯¸ì§€(ìºì‹œ) ë³´ëƒ„

* ì„œë²„ì—ì„œ ì„¤ì •ì´ í•„ìš”

-   no-cache : ìºì‹œë¥¼ ì‚¬ìš©í•˜ê¸° ì „ì— ì„œë²„ì—ì„œ ê²€ì‚¬ í›„ ì‚¬ìš© ê²°ì •
-   no-store : ìºì‹œ ì‚¬ìš© ì•ˆí•¨
-   public : ëª¨ë“  í™˜ê²½ì—ì„œ ì‚¬ìš©
-   private : ë¸Œë¼ìš°ì € í™˜ê²½ì—ì„œë§Œ ìºì‹œ ì‚¬ìš©, ì™¸ë¶€ ìºì‹œ ì„œë²„ì—ì„œëŠ” ì‚¬ìš© ë¶ˆê°€
-   max-age : ìºì‹œì˜ ìœ íš¨ì‹œê°„

- Node

```js
const header = {
    setHeaders: (res, path) => {
    	if(path.endsWith('.html')){
        	res.setHeader('Cache-Control', no-cache)
        } else if(path.endsWith('.js') || path.endsWith('css') || path.endsWith('.webp')){
        	res.setHeader('Cache-Control', 'public, max-age=...'
        } else {
        	res.setHeader('Cache-Control', 'no-store')
        }
    },
}
```
20:T1f48,
**[ìœ ë™ê· ë‹˜ì˜ ê°•ì˜](https://www.inflearn.com/course/%EC%9B%B9-%EC%84%B1%EB%8A%A5-%EC%B5%9C%EC%A0%81%ED%99%94-%EB%A6%AC%EC%95%A1%ED%8A%B8-1)ë¥¼ ë³´ë©° ì •ë¦¬í•œ ê¸€ ì…ë‹ˆë‹¤.**

---

### 1\. êµ¬ê¸€ ê°œë°œì ë„êµ¬ Audits(LightHouse) íˆ´ì„ ì´ìš©í•œ í˜ì´ì§€ ê²€ì‚¬

<img src="/assets/blog/javaScript/web-optimization1.png" width="100%" alt="post image"/>
<img src="/assets/blog/javaScript/web-optimization2.png" width="100%" alt="post image"/>

**Opportunities** = ë¦¬ì†ŒìŠ¤ì˜ ê´€ì (ë¡œë”©ì„±ëŠ¥)

**Diagnostics** = í˜ì´ì§€ì˜ ì‹¤í–‰ ê´€ì (ë Œë”ë§)

---

### 2\. ì´ë¯¸ì§€ ì‚¬ì´ì¦ˆ ìµœì í™” - ë¡œë”© ì„±ëŠ¥

<img src="/assets/blog/javaScript/web-optimization3.png" width="100%" alt="post image"/>

ì‹¤ì œ ì´ë¯¸ì§€ì™€ ë Œë”ë§ëœ ì´ë¯¸ì§€ì˜ í¬ê¸°ê°€ ë‹¤ë¥´ë‹¤

ë³´í†µ ì´ë¯¸ì§€ëŠ” x2ì˜ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©

apië¥¼ í†µí•´ ë°›ì•„ì˜¨ ì´ë¯¸ì§€ë¥¼ ì¡°ì ˆí•˜ë ¤ë©´?

**Image CDN**(image processing Contents Delivery Network) - ì´ë¯¸ì§€ ê°€ê³µ â†’ ì†Œë¹„ì

CDN êµ¬ì¶•ì€ ì§„í–‰í•˜ì§€ ì•Šì•˜ë‹¤.

---

### 3\. performance

í¬ë¡¬ ê°œë°œìë„êµ¬ -> ì„±ëŠ¥ì—ì„œ ìƒˆë¡œê³ ì¹¨ì„ ëˆ„ë¥´ë©´ í˜ì´ì§€ì˜ ì‘ì—…ì„ ë¶„ì„í•´ì¤€ë‹¤.

<img src="/assets/blog/javaScript/web-optimization4.png" width="100%" alt="post image"/>
<img src="/assets/blog/javaScript/web-optimization5.png" width="100%" alt="post image"/>

1.  HTMLíŒŒì‹±
2.  JS ë¡œë“œ
3.  ì²« í˜ì¸íŒ… ì´í›„ API í˜¸ì¶œ

- ë¦¬ì•¡íŠ¸ëŠ” í”„ë ˆì„ì°¨íŠ¸ì—ì„œ ê° ì»´í¬ë„ŒíŠ¸ë§ˆë‹¤ ì‹¤í–‰ë˜ëŠ” ì‹œê°„ì´ ë³´ì—¬ì§„ë‹¤.

---

### 4\. Route-based code Splitting

ì½”ë“œ ìŠ¤í”Œë¦¿íŒ…ì€ webpack, rollup ë“±ê³¼ ê°™ì€ ëª¨ë“ˆ ë²ˆë“¤ëŸ¬ë¥¼ ì´ìš©í•˜ì—¬ ë§Œë“¤ì–´ì§„ í•˜ë‚˜ì˜ ë²ˆë“¤ íŒŒì¼ì„ ì—¬ëŸ¬ ê°œì˜ ë²ˆë“¤ íŒŒì¼ë¡œ ë‚˜ëˆ„ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.

í•˜ë‚˜ì˜ ë²ˆë“¤íŒŒì¼ì„ ì—¬ëŸ¬ê°œë¡œ ë‚˜ëˆ„ë©´ ê·¸ë§Œí¼ ë¡œë“œ ì†ë„ê°€ ë¹¨ë¼ì§„ë‹¤.

```js
import React, {Suspense, lazy} from 'react'
import { Switch, Route } from 'react-router-dom'
import './App.css'
// import ListPage from './pages/ListPage/index'
// import ViewPage from './pages/ViewPage/index'

const ListPage = lazy(() => import('./pages/ListPage/index'))
const ViewPage = lazy(() => import('./pages/ViewPage/index'))

function App() {
  return (
    <div className="App">
        <Suspense fallback={<div>ë¡œë”© ì¤‘...</div>}>
          <Switch>
            <Route path="/" component={ListPage} exact />
            <Route path="/view/:id" component={ViewPage} exact />
          </Switch>
        </Suspense>
    </div>
  )
}

export default App
```

import()ë¥¼ **lazy**ë¼ëŠ” í•¨ìˆ˜ ì•ˆì— ë„£ê³ , **Suspense**ë¼ëŠ” ì»´í¬ë„ŒíŠ¸ë¡œ ê´€ë¦¬ë¥¼ í•´ì¤„ ìˆ˜ ìˆë‹¤.

ë°ì´í„°ê°€ ë¡œë”©ì¤‘ì— ìœ ì €ì—ê²Œ ë¹„ì–´ìˆëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ë³´ì´ê²Œ ë˜ëŠ”ë°, Suspenseë¥¼ ì‚¬ìš©í•´ì„œ ì´ ë¡œë”©ì¤‘ì¸ ìƒíƒœì¼ ë•Œ ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ë³´ì—¬ì¤„ ìˆ˜ ìˆë‹¤.

SuspenseëŠ” fallbackì„ ë°›ì•„ importí•˜ëŠ” ë„ì¤‘ì— ë„ì–´ì¤€ë‹¤.

í˜ì´ì§€ê°€ ë¡œë“œë  ë•Œ ê·¸ í˜ì´ì§€ ì•ˆì—ì„œ ë³´ì´ì§€ ì•ŠëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ì¡´ì¬í•  ìˆ˜ ìˆëŠ”ë°, ì´ ë¶€ë¶„ì„ ìŠ¤í”Œë¦¬íŒ…í•´ ê´€ë¦¬ í•  ìˆ˜ë„ ìˆë‹¤.

---

### 5\. ì• ë‹ˆë©”ì´ì…˜ ìµœì í™”

ì¼ë°˜ì ì¸ ëª¨ë‹ˆí„°ëŠ” ì´ˆë‹¹ 60FPS, ë¸Œë¼ìš°ì €ë„ ì´ˆë‹¹ 60FPSë¡œ í™”ë©´ì„ ê·¸ë¦¬ê²Œ ëœë‹¤.

ì—¬ê¸°ì„œ ë¸Œë¼ìš°ì €ê°€ 60FPS ì•„ë˜ë¡œ ê·¸ë¦¬ê²Œ ëœë‹¤ë©´ ìŸí¬ í˜„ìƒì´ ë°œìƒí•¨.

<img src="/assets/blog/javaScript/web-optimization6.png" width="100%" alt="post image"/>

1. DOM + CSSOM

<img src="/assets/blog/javaScript/web-optimization7.png" width="100%" alt="post image"/>

2. Render Tree

<img src="/assets/blog/javaScript/web-optimization8.png" width="100%" alt="post image"/>

ìœ„ DOMê³¼ CSSOMì„ ì¡°í•©í•´ RenderTreeë¥¼ ë§Œë“¤ì–´ ë‚¸ë‹¤.

3. Layout

<img src="/assets/blog/javaScript/web-optimization9.png" width="100%" alt="post image"/>

ìœ„ì¹˜ë‚˜ í¬ê¸°ë¥¼ ê³„ì‚°í•´ í™”ë©´ì— ë ˆì´ì•„ì›ƒì„ ê·¸ë¦°ë‹¤.

4. Paint

ì´ë ‡ê²Œ ê·¸ë ¤ì§„ ë ˆì´ì•„ì›ƒìœ„ì— ìƒ‰ì„ ì±„ì›Œë„£ìŒ

5. Composite

<img src="/assets/blog/javaScript/web-optimization10.png" width="100%" alt="post image"/>

ê° ë ˆì´ì–´ë“¤ì„ í•©ì„±í•˜ëŠ” ê³¼ì •

ì´ ì „ì²´ì˜ ê³¼ì •ì„ Critical Rendering Path, Pixel Pipeline ì´ë¼ê³  ë¶€ë¥¸ë‹¤.

ì´ ì™„ì„±ëœ ìƒíƒœì—ì„œ ë³€í™”ê°€ ìƒê¸´ë‹¤ë©´ ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ ë‹¤ì‹œ ì´ ì „ì²´ì˜ ê³¼ì •ì„ ê±°ì¹˜ê²Œ ëœë‹¤.

- width, heightê°€ ë³€ê²½ë˜ë©´, **1 -> 2 -> 3 -> 4 -> 5** ëª¨ë‘ ì‹¤í–‰ë˜ê²Œ ëœë‹¤ **(Reflow)**

- í¬ê¸°ë‚˜ ìœ„ì¹˜ê°€ ì•„ë‹ˆë¼ color, background-color(ìƒ‰ê¹”)ì´ ë³€ê²½ëì„ë• **1 -> 2 -> 4 -> 5** **(Repaint)**

- transform, opacity ë“±(GPUê°€ ê´€ì—¬í•˜ëŠ” ì†ì„±) ë³€ê²½ì¼ ë•Œ **1 -> 2 -> 5**

ë”°ë¼ì„œ transform, opacity ë“±(GPUê°€ ê´€ì—¬í•˜ëŠ” ì†ì„±)ì„ ì‚¬ìš©í•˜ëŠ”ê²Œ ê°€ì¥ ë¹ ë¥´ê³  ëŠê¹€ì—†ì´ ë³´ì—¬ì¤„ ìˆ˜ ìˆë‹¤.

<img src="/assets/blog/javaScript/web-optimization11.png" width="100%" alt="post image"/>

---

### 6\. ì»´í¬ë„ŒíŠ¸ Lazy Loading, Preload

ìœ„ì—ì„œ í–ˆë˜ê²ƒ ì²˜ëŸ¼ ì´ë¯¸ì§€ë¥¼ ë³´ì—¬ì£¼ëŠ” ëª¨ë‹¬ë§Œ ë”°ë¡œ ìŠ¤í”Œë¦¿íŒ… í•  ìˆ˜ìˆë‹¤.

```js
import React, { useState, Suspense, lazy } from 'react'
import styled from 'styled-components'
import Header from './components/Header'
import InfoTable from './components/InfoTable'
import SurveyChart from './components/SurveyChart'
import Footer from './components/Footer'

const LazyImageModal = lazy(() => import('./components/ImageModal'))

function App() {
    const [showModal, setShowModal] = useState(false)

    return (
        <div className="App">
            <Header />
            <InfoTable />
            <ButtonModal onClick={() => { setShowModal(true) }}>ì˜¬ë¦¼í”½ ì‚¬ì§„ ë³´ê¸°</ButtonModal>
            <SurveyChart />
            <Footer />
            <Suspense fallback={null}>
                {showModal ? <LazyImageModal closeModal={() => { setShowModal(false) }} /> : null}
            </Suspense>
        </div>
    )
}
```

#### Lazy Loadingì˜ ë‹¨ì 

<img src="/assets/blog/javaScript/web-optimization12.png" width="100%" alt="post image"/>

ìš°ë¦¬ê°€ ëª¨ë‹¬ì„ í´ë¦­í•œìˆœê°„ ëª¨ë‹¬ì— ê´€ë ¨ëœ íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¤ê³  JSë¥¼ Evaluateí•œë‹¤.

ì´ê²Œ ëë‚˜ê³  ì‹¤ì œë¡œ ëª¨ë‹¬ì„ ë„ìš°ëŠ” ì½”ë“œê°€ ì‹¤í–‰ëœë‹¤.

ìµœì´ˆ í˜ì´ì§€ì—ì„œëŠ” ì„±ëŠ¥ì´ ì¡°ê¸ˆ ë¹¨ë¼ì¡Œì§€ë§Œ ëª¨ë‹¬ì„ ë„ìš¸ ë•ŒëŠ” ì˜¤íˆë ¤ ì„±ëŠ¥ì´ ë” ëŠë ¤ì¡Œë‹¤.

#### **\- ì»´í¬ë„ŒíŠ¸ Preload**

<img src="/assets/blog/javaScript/web-optimization13.png" width="100%" alt="post image"/>

ì´ë¥¼ ê°œì„ í•˜ê¸° ìœ„í•´ì„œ ëª¨ë‹¬ì„ ì—´ê¸° ì´ì „ì— ëª¨ë‹¬ê³¼ ê´€ë ¨ëœ ì½”ë“œë¥¼ ë¯¸ë¦¬ ë¡œë“œí•´ ë‘”ë‹¤.

ë¬¸ì œëŠ” ì‚¬ìš©ìê°€ ëª¨ë‹¬ì„ ì–¸ì œ í´ë¦­í• ì§€ ëª¨ë¥´ê¸° ë•Œë¬¸ì— ì–¸ì œ ë¯¸ë¦¬ ë¡œë“œí• ì§€ ì• ë§¤í•˜ë‹¤.

#### íƒ€ì´ë°

1. ë²„íŠ¼ ìœ„ì— ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë ¤ ë†¨ì„ ë•Œ

```js
const handleMouseEnter = () => {
    const Component = import('./components/ImageModal')
}
<ButtonModal onClick={() => { setShowModal(true) }} onMouseEnter={handleMouseEnter}>ì˜¬ë¦¼í”½ ì‚¬ì§„ ë³´ê¸°</ButtonModal>
```

<img src="/assets/blog/javaScript/web-optimization14.png" width="100%" alt="post image"/>

2. ìµœì´ˆ í˜ì´ì§€ ë¡œë“œê°€ ë˜ê³ , ëª¨ë“  ì»´í¬ë„ŒíŠ¸ì˜ ë§ˆìš´íŠ¸ê°€ ëë‚¬ì„ ë•Œ(ComponentDidMount)

<img src="/assets/blog/javaScript/web-optimization15.png" width="100%" alt="post image"/>

```js
useEffect(() => {
    const Component = import('./components/ImageModal')
}, [])
```

ì§€ê¸ˆì€ ë‹¨ì¼ ì»´í¬ë„ŒíŠ¸ë¥¼ ë¯¸ë¦¬ import í•˜ì§€ë§Œ ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ë¥¼ Preloadí•´ì¤˜ì•¼ í•  ë•ŒëŠ”

```js
function lazyWithPreload(importFunction){
    const Component = React.lazy(importFunction)
    Component.preload = importFunction
    return Component
}

const LazyImageModal = lazyWithPreload(() => import('./components/ImageModal'))
```

```js
useEffect(() => {
    LazyImageModal.preload()
}, [])
```

ì²˜ëŸ¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

#### **\- ì´ë¯¸ì§€ Preload**

**new Image()**

```js
useEffect(() => {
    LazyImageModal.preload()

    const img = new Image()
    img.src = 'url'
}, [])
```

ì£¼ì˜í• ì ì€ ì´ë¯¸ì§€ëŠ” ëª¨ë“ˆê³¼ ë‹¤ë¥´ê²Œ í•„ìš”í•  ë•Œ ë§ˆë‹¤ ê·¸ë•Œê·¸ë•Œ ë§¤ë²ˆ ë³´ë‚´ê¸° ë•Œë¬¸ì—

ì‚¬ìš©í•˜ëŠ” ì´ë¯¸ì§€ì— ìºì‹œê°€ ì œëŒ€ë¡œ ê±¸ë ¤ìˆëŠ”ì§€ í™•ì¸í•  í•„ìš”ê°€ ìˆë‹¤.
9:["$","section",null,{"className":"flex flex-col-reverse md:relative md:flex-row","children":[["$","$L17",null,{"isPagination":true,"posts":{"posts":[{"content":"$18","data":{"title":"6ì£¼ê°„ ìŠ¤í„°ë””í•˜ë©° ë°°ìš´ê²ƒë“¤","date":"$D2022-10-21T00:00:00.000Z","description":"6ì£¼ê°„ ì§„í–‰í•œ ìŠ¤í„°ë””ì—ì„œ ì–»ì€ ê²ƒë“¤","category":"til","titleImage":"/assets/postIcon/til.webp"},"slug":"study"},{"content":"$19","data":{"title":"Storybook ì¨ë³´ê¸°","date":"$D2022-10-11T00:00:00.000Z","description":"ìŠ¤í„°ë”” í•˜ë©´ì„œ ì²˜ìŒ ì¨ë³¸ Storybook","category":"javaScript","titleImage":"/assets/postIcon/storybook.webp"},"slug":"storybook"},{"content":"$1a","data":{"title":"Next.js styled-component ì ìš© ë¬¸ì œì— ëŒ€í•´(_document.tsx)","date":"$D2022-08-22T00:00:00.000Z","description":"next.jsì™€ styled-component ì‚¬ìš©ì‹œ ë°œìƒí•œ ì—ëŸ¬","category":"javaScript","titleImage":"/assets/postIcon/Nextjs.svg"},"slug":"next-styled-component"},{"content":"$1b","data":{"title":"IntersectionObserverë¡œ ë°ì´í„° ìš”ì²­í•´ë³´ê¸°","date":"$D2022-05-04T00:00:00.000Z","description":"IntersectionObserverë¥¼ í™œìš©í•´ ìŠ¤í¬ë¡¤ ìœ„ì¹˜ì—ì„œ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°","category":"javaScript","titleImage":"/assets/postIcon/logo192.webp"},"slug":"intersectionObserver"},{"content":"\n\n####\n**bundle-analyzer**ëŠ” ë¹Œë“œëœ íŒŒì¼ì„ íŠ¸ë¦¬ë§µ í˜•ì‹ìœ¼ë¡œ ì¢…ë¥˜ì™€ í¬ê¸°ë¥¼ ë³´ì—¬ì¤€ë‹¤.\n\nnextì—ì„œ ì œê³µí•˜ëŠ” bundle-analyzer\n\nnext.config.js\n\n```javascript\nconst withBundleAnalyzer = require('@next/bundle-analyzer')({\n  enabled: process.env.ANALYZE === 'true'\n})\n\nmodule.exports = withBundleAnalyzer({\n  compress: true,\n  webpack(config, {webpack}) {\n    const prod = process.env.NODE_ENV === 'production'\n    const plugins = [...config.plugins]\n    return {\n      ...config,\n      mode: prod ? 'production' : 'development',\n      devtool: prod ? 'hidden-source-map' : 'eval',\n      plugins\n    }\n  }\n})\n```\n\npackage.json / script\n\n```\n\"build\": \"ANALYZE=true next build\",\n```\n\n<img src=\"/assets/blog/javaScript/bundle-analyzer.png\" width=\"100%\" alt=\"bundle-analyzer\"/>\n\n\nì´ëŸ°ì‹ìœ¼ë¡œ htmlì´ ì‹¤í–‰ëœë‹¤.\n\nì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ë‘ê°œì˜ ì°½ì´ ì‹¤í–‰ë˜ëŠ”ë° í´ë¼ì´ì–¸íŠ¸ ë¶€ë¶„ì¸ ì‚¬ìš©ìì—ê²Œ ì§ì ‘ ë³´ì—¬ì§ˆ ë¶€ë¶„ì´ë¼, ì„œë²„ ë¶€ë¶„ë³´ë‹¤ëŠ” í´ë¼ì´ì–¸íŠ¸ ë¶€ë¶„ì„ ì¤„ì´ëŠ”ê²Œ ë” íš¨ê³¼ì ì´ë¼ê³  í•œë‹¤.\n\nì•„ì´ì½˜ìœ¼ë¡œ ì“°ì¼ ì´ë¯¸ì§€ë¥¼ ë‘ê°œì“°ê¸°ì‹«ì–´ svgë¥¼ ì»´í¬ë„ŒíŠ¸í™”ì‹œì¼œ propsë¡œ ìƒ‰ìƒì„ ë³€ê²½ì‹œí‚¤ê²Œ í–ˆëŠ”ë°, ìš©ëŸ‰ì´ ê½¤ í¬ë‹¤ê³  ë‚˜ì™”ë‹¤ ê±°ìŠ¬ë¦°ë‹¤ ğŸ¤”\n\nì¤„ì¼ìˆ˜ìˆëŠ” ë°©ë²•ì„ ì°¾ì•„ë´ì•¼ê² ë‹¤.\n\në˜ ë‚˜ì¤‘ì— ìµœì¢… ë°°í¬ë•ŒëŠ” ë²ˆë“¤ëœ JS íŒŒì¼ì„ gzë¡œ ì••ì¶•ì‹œì¼œ ë¸Œë¼ìš°ì € ìª½ìœ¼ë¡œ ë³´ë‚´ì£¼ëŠ” ë°©ë²•ë„ ìˆë‹¤ê³  í•˜ëŠ”ë°, ë‚˜ì¤‘ì— ì‹œë„í•´ë´ì•¼ê² ë‹¤.\n","data":{"title":"next/bundle-analyzer","date":"$D2022-02-22T00:00:00.000Z","description":"next/bundle-analyzerë¡œ ë²ˆë“¤ í¬ê¸° í™•ì¸í•˜ê¸°","category":"javaScript","titleImage":"/assets/postIcon/Nextjs.svg"},"slug":"next-bundle-analyzer"},{"content":"$1c","data":{"title":"ë¦¬ì•¡íŠ¸ ref ì™€ forwardRef (with. react-hook-form)","date":"$D2022-02-09T00:00:00.000Z","description":"react-hook-form ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ refì˜ ë™ì‘","category":"javaScript","titleImage":"/assets/postIcon/logo192.webp"},"slug":"ref-forwardRef"},{"content":"$1d","data":{"title":"Speechsynthesis & Google TTS","date":"$D2022-01-22T00:00:00.000Z","description":"í”„ë¡œì íŠ¸ ì§„í–‰í•˜ë©° ê²½í—˜í•´ë³¸ Speechsynthesis & Google TTS","category":"javaScript","titleImage":"/assets/postIcon/logo192.webp"},"slug":"Speechsynthesis"},{"content":"$1e","data":{"title":"ì›¹ì„±ëŠ¥ ìµœì í™”(3)","date":"$D2022-01-04T00:00:00.000Z","description":"ì›¹ì„±ëŠ¥ ìµœì í™”3","category":"javaScript","titleImage":"/assets/postIcon/logo192.webp"},"slug":"web-optimization-3"},{"content":"$1f","data":{"title":"ì›¹ì„±ëŠ¥ ìµœì í™”(2)","date":"$D2022-01-03T00:00:00.000Z","description":"ì›¹ì„±ëŠ¥ ìµœì í™”2","category":"javaScript","titleImage":"/assets/postIcon/logo192.webp"},"slug":"web-optimization-2"},{"content":"$20","data":{"title":"ì›¹ì„±ëŠ¥ ìµœì í™”(1)","date":"$D2022-01-01T00:00:00.000Z","description":"ì›¹ì„±ëŠ¥ ìµœì í™”1","category":"javaScript","titleImage":"/assets/postIcon/logo192.webp"},"slug":"web-optimization"}],"total":44},"page":"4"}],["$","ul",null,{"className":"relative top-0 flex h-fit min-w-fit flex-row flex-wrap gap-[20px] py-[20px] pl-0 md:sticky md:top-[100px] md:flex-col md:flex-nowrap md:py-0 md:pl-[30px]","children":[["$","h2",null,{"className":"hidden text-[18px] font-bold md:inline","children":"Category"}],[["$","li","javaScript",{"children":["$","$L4",null,{"className":"text-gray700","href":"/blog/javaScript","children":"javaScript (40)"}]}],["$","li","til",{"children":["$","$L4",null,{"className":"text-gray700","href":"/blog/til","children":"til (2)"}]}],["$","li","study",{"children":["$","$L4",null,{"className":"text-gray700","href":"/blog/study","children":"study (2)"}]}]]]}]]}]
12:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
d:null
16:{"metadata":[["$","title","0",{"children":"Been blog - 4"}],["$","meta","1",{"name":"description","content":"Been dev-note - 4"}],["$","meta","2",{"name":"google-site-verification","content":"BirkRt7C7FYMLW96RbXad2EtPdcl0-_ti9xCRkCHa5U"}],["$","meta","3",{"name":"naver-site-verification","content":"58945b2bbe2fe86252fa8c7b204b40f6019920e9"}],["$","link","4",{"rel":"canonical","href":"https://wonbeenna.github.io/page/4"}],["$","meta","5",{"property":"og:title","content":"Been blog - 4"}],["$","meta","6",{"property":"og:description","content":"Been dev-note - 4"}],["$","meta","7",{"property":"og:url","content":"https://wonbeenna.github.io/page/4"}],["$","meta","8",{"property":"og:site_name","content":"Been blog"}],["$","meta","9",{"property":"og:locale","content":"ko_KR"}],["$","meta","10",{"property":"og:image","content":"https://wonbeenna.github.io/favicon.png"}],["$","meta","11",{"property":"og:image:width","content":"800"}],["$","meta","12",{"property":"og:image:height","content":"600"}],["$","meta","13",{"property":"og:image:alt","content":"Been blog"}],["$","meta","14",{"property":"og:type","content":"website"}],["$","meta","15",{"name":"twitter:card","content":"summary_large_image"}],["$","meta","16",{"name":"twitter:title","content":"Been blog - 4"}],["$","meta","17",{"name":"twitter:description","content":"Been dev-note - 4"}],["$","meta","18",{"name":"twitter:image","content":"https://wonbeenna.github.io/favicon.png"}],["$","meta","19",{"name":"twitter:image:width","content":"800"}],["$","meta","20",{"name":"twitter:image:height","content":"600"}],["$","meta","21",{"name":"twitter:image:alt","content":"Been blog"}],["$","link","22",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"192x192"}],["$","link","23",{"rel":"icon","href":"/favicon.ico","sizes":"any"}],["$","link","24",{"rel":"icon","href":"/favicon.png","sizes":"32x32","type":"image/png"}],["$","link","25",{"rel":"apple-touch-icon","href":"/favicon.png","sizes":"32x32","type":"image/png"}]],"error":null,"digest":"$undefined"}
10:{"metadata":"$16:metadata","error":null,"digest":"$undefined"}
