1:"$Sreact.fragment"
2:I[1402,["619","static/chunks/619-ba102abea3e3d0e4.js","356","static/chunks/356-f53269e63c687b55.js","266","static/chunks/266-3d9dbb956ea61a38.js","177","static/chunks/app/layout-316d1881c52ee5af.js"],""]
3:I[8372,["619","static/chunks/619-ba102abea3e3d0e4.js","356","static/chunks/356-f53269e63c687b55.js","266","static/chunks/266-3d9dbb956ea61a38.js","177","static/chunks/app/layout-316d1881c52ee5af.js"],"ThemeProvider"]
4:I[2217,["619","static/chunks/619-ba102abea3e3d0e4.js","356","static/chunks/356-f53269e63c687b55.js","266","static/chunks/266-3d9dbb956ea61a38.js","177","static/chunks/app/layout-316d1881c52ee5af.js"],"default"]
5:I[9766,[],""]
6:I[8924,[],""]
8:I[4431,[],"OutletBoundary"]
a:I[5278,[],"AsyncMetadataOutlet"]
c:I[4431,[],"ViewportBoundary"]
e:I[4431,[],"MetadataBoundary"]
f:"$Sreact.suspense"
11:I[7150,[],""]
:HL["/_next/static/media/ff840cfebfb63b0c-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/css/373067c38481f02e.css","style"]
:HL["/_next/static/css/f239fa32bcecd6e6.css","style"]
0:{"P":null,"b":"RSw5uBo9FVL-n5Bwk-eKX","p":"","c":["","blog","next-middleware"],"i":false,"f":[[["",{"children":["(blog-post)",{"children":["blog",{"children":[["slug","next-middleware","d"],{"children":["__PAGE__",{}]}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/373067c38481f02e.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"ko","suppressHydrationWarning":true,"children":[["$","$L2",null,{"src":"https://www.googletagmanager.com/gtag/js?id=G-LFDRQZPCBN"}],["$","$L2",null,{"id":"google-analytics","children":"\n          window.dataLayer = window.dataLayer || [];\n          function gtag(){dataLayer.push(arguments);}\n          gtag('js', new Date());\n \n          gtag('config', 'G-LFDRQZPCBN');\n        "}],["$","body",null,{"suppressHydrationWarning":true,"className":"__className_fde3a9","children":["$","$L3",null,{"children":[["$","$L4",null,{}],["$","main",null,{"children":["$","$L5",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":404}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]}],["$","footer",null,{"className":"border-t border-gray200 bg-white dark:bg-darkBg01","children":["$","div",null,{"className":"mx-auto flex max-w-[970px] flex-col items-center gap-2 p-6 text-sm text-gray700 dark:text-gray400","children":[["$","p",null,{"children":["© ",2025," Been blog. All rights reserved."]}],["$","p",null,{"children":"Design Inspired by muffinman."}]]}]}]]}]}]]}]]}],{"children":["(blog-post)",["$","$1","c",{"children":[null,["$","$L5",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":"$0:f:0:1:1:props:children:1:props:children:2:props:children:props:children:1:props:children:props:notFound:0:1:props:style","children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":"$0:f:0:1:1:props:children:1:props:children:2:props:children:props:children:1:props:children:props:notFound:0:1:props:children:props:children:1:props:style","children":404}],["$","div",null,{"style":"$0:f:0:1:1:props:children:1:props:children:2:props:children:props:children:1:props:children:props:notFound:0:1:props:children:props:children:2:props:style","children":["$","h2",null,{"style":"$0:f:0:1:1:props:children:1:props:children:2:props:children:props:children:1:props:children:props:notFound:0:1:props:children:props:children:2:props:children:props:style","children":"This page could not be found."}]}]]}]}]],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["blog",["$","$1","c",{"children":[null,["$","$L5",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":[["slug","next-middleware","d"],["$","$1","c",{"children":[null,["$","$L5",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["__PAGE__",["$","$1","c",{"children":["$L7",[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/f239fa32bcecd6e6.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","$L8",null,{"children":["$L9",["$","$La",null,{"promise":"$@b"}]]}]]}],{},null,false]},null,false]},null,false]},null,false]},null,false],["$","$1","h",{"children":[null,[["$","$Lc",null,{"children":"$Ld"}],["$","meta",null,{"name":"next-size-adjust","content":""}]],["$","$Le",null,{"children":["$","div",null,{"hidden":true,"children":["$","$f",null,{"fallback":null,"children":"$L10"}]}]}]]}],false]],"m":"$undefined","G":["$11",[]],"s":false,"S":true}
d:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
9:null
12:I[2102,["619","static/chunks/619-ba102abea3e3d0e4.js","958","static/chunks/app/(blog-post)/blog/%5Bslug%5D/page-d70ccb7129b2f9cf.js"],"default"]
3a:I[622,[],"IconMark"]
7:[[["$","section",null,{"className":"bg-bannerBg dark:bg-darkBg02","children":["$","div",null,{"className":"mx-auto my-0 max-w-[970px] px-[16px] py-16","children":[["$","div",null,{"className":"mb-2 text-sm text-gray700","children":["$","time",null,{"dateTime":"2023-02-22T00:00:00.000Z","children":"22. February 2023"}]}],["$","h1",null,{"className":"inline bg-clip-text font-extrabold tracking-tight [-webkit-box-decoration-break:clone] [-webkit-text-fill-color:transparent] [box-decoration-break:clone] bg-[linear-gradient(108deg,theme(colors.primaryGradient03),theme(colors.primaryGradient02)_40%,theme(colors.primaryColor)_80%)] text-6xl","children":"Next.js middleware와 getServerSideProps"}],["$","p",null,{"className":"mt-4 text-lg text-gray900 dark:text-gray300","children":"세션방식의 로그인 인증, middleware와 getServerSideProps를 사용해 구현한 기록"}]]}]}],["$","svg",null,{"aria-hidden":"true","viewBox":"0 0 1440 120","preserveAspectRatio":"none","className":"block h-16 w-full text-bannerBg dark:text-darkBg02","children":["$","path",null,{"fill":"currentColor","d":"M0,64L60,69.3C120,75,240,85,360,80C480,75,600,53,720,64C840,75,960,117,1080,117.3C1200,117,1320,75,1380,53.3L1440,32L1440,0L1380,0C1320,0,1200,0,1080,0C960,0,840,0,720,0C600,0,480,0,360,0C240,0,120,0,60,0L0,0Z"}]}]],["$","section",null,{"className":"mx-auto my-0 max-w-[970px] p-4 pb-40","children":["$","div",null,{"className":"prose w-full max-w-none","children":[["$","$L12",null,{"component":[["$","p",null,{"children":"인증방식에는 대표적으로 두가지가 있다."}],"\n",["$","p",null,{"children":"제일 많이 사용하는 세션 방식과 토큰 방식"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"인증 -> 유저가 누구인지 확인"}],"\n",["$","li",null,{"children":"인가 -> 유저의 요청에 대한 권한을 확인하고 허가"}],"\n"]}],"\n",["$","hr",null,{}],"\n",["$","h3",null,{"children":"세션방식"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"로그인 요청 -> 서버에서 세션 key-value로 구분해 정보를 저장"}],"\n",["$","li",null,{"children":"서버 -> 클라이언트 측으로 http header cookie에 세션 id를 담아 전달"}],"\n",["$","li",null,{"children":"클라이언트 쪽에서 response값으로 cookie에 저장된 세션을 확인할 수 있는데, 브라우저에 저장"}],"\n"]}],"\n",["$","p",null,{"children":"세션 방식은 HTTP요청이 노출되어도 세션 자체에는 의미있는 값이 없기 때문에 보안상 유리할 수 있다."}],"\n",["$","p",null,{"children":"각 사용자마다 고유한 id를 갖고 있기 때문에 매번 회원정보를 확인할 필요가 없다."}],"\n",["$","p",null,{"children":"서버에 따로 세션 저장소를 두기 때문에 사용자가 많아지면 서버에 부담이 간다."}],"\n",["$","p",null,{"children":"각 브라우저들은 보안상의 이슈로 서버와 프론트간의 도메인이 같아야 쿠키가 전달된다."}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["\n",["$","p",null,{"children":["프론트 측에서는 Axios 사용시 ",["$","code",null,{"children":"withCredentials: true"}],"설정을 통해 서로 다른 도메인간의 요청에도 credential 정보를 받을 것인지 설정해야 한다."]}],"\n"]}],"\n",["$","li",null,{"children":["\n",["$","p",null,{"children":"서버 측에서는 응답 헤더의 Access-Control-Allow-Credentials 항목을 true로 설정해야 하고,\n응답 헤더의 Access-Control-Allow-Origin의 값을 와일드 카드('*') 제외하고 설정 되어야 한다."}],"\n"]}],"\n"]}],"\n",["$","hr",null,{}],"\n",["$","p",null,{"children":"우선 localhost와 서버상의 도메인이 달라 proxy 설정을 해줬다."}],"\n",["$","pre",null,{"className":"language-ts","children":["$","code",null,{"className":"language-ts code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"// pages/api/[...path].ts"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"import"}]," ",["$","span",null,{"className":"token keyword","children":"type"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," NextApiRequest",["$","span",null,{"className":"token punctuation","children":","}]," NextApiResponse ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"\"next\""}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"import"}]," httpProxyMiddleware ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"\"next-http-proxy-middleware\""}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],"$L13","$L14","$L15","$L16","$L17","$L18","$L19","$L1a","$L1b","$L1c","$L1d","$L1e","$L1f","$L20","$L21","$L22","$L23","$L24","$L25","$L26","$L27"]}]}],"\n","$L28","\n","$L29","\n","$L2a","\n","$L2b","\n","$L2c","\n","$L2d","\n","$L2e","\n","$L2f","\n","$L30","\n","$L31","\n","$L32","\n","$L33","\n","$L34","\n","$L35","\n","$L36","\n","$L37"]}],"$L38","$L39"]}]}]]
b:{"metadata":[["$","title","0",{"children":"Been blog - Next.js middleware와 getServerSideProps"}],["$","meta","1",{"name":"description","content":"세션방식의 로그인 인증, middleware와 getServerSideProps를 사용해 구현한 기록"}],["$","meta","2",{"name":"google-site-verification","content":"BirkRt7C7FYMLW96RbXad2EtPdcl0-_ti9xCRkCHa5U"}],["$","meta","3",{"name":"naver-site-verification","content":"58945b2bbe2fe86252fa8c7b204b40f6019920e9"}],["$","link","4",{"rel":"canonical","href":"https://wonbeenna.github.io/blog/next-middleware"}],["$","meta","5",{"property":"og:title","content":"Been blog - Next.js middleware와 getServerSideProps"}],["$","meta","6",{"property":"og:description","content":"세션방식의 로그인 인증, middleware와 getServerSideProps를 사용해 구현한 기록"}],["$","meta","7",{"property":"og:url","content":"https://wonbeenna.github.io/blog/next-middleware"}],["$","meta","8",{"property":"og:image","content":"https://wonbeenna.github.io/assets/postIcon/Nextjs.svg"}],["$","meta","9",{"property":"og:image:width","content":"800"}],["$","meta","10",{"property":"og:image:height","content":"600"}],["$","meta","11",{"property":"og:image:alt","content":"Next.js middleware와 getServerSideProps"}],["$","meta","12",{"name":"twitter:card","content":"summary_large_image"}],["$","meta","13",{"name":"twitter:title","content":"Been blog - Next.js middleware와 getServerSideProps"}],["$","meta","14",{"name":"twitter:description","content":"세션방식의 로그인 인증, middleware와 getServerSideProps를 사용해 구현한 기록"}],["$","meta","15",{"name":"twitter:image","content":"https://wonbeenna.github.io/assets/postIcon/Nextjs.svg"}],["$","meta","16",{"name":"twitter:image:width","content":"800"}],["$","meta","17",{"name":"twitter:image:height","content":"600"}],["$","meta","18",{"name":"twitter:image:alt","content":"Next.js middleware와 getServerSideProps"}],["$","link","19",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"192x192"}],["$","link","20",{"rel":"icon","href":"/favicon.ico","sizes":"any"}],["$","link","21",{"rel":"icon","href":"/favicon.png","sizes":"32x32","type":"image/png"}],["$","link","22",{"rel":"apple-touch-icon","href":"/favicon.png","sizes":"32x32","type":"image/png"}],["$","$L3a","23",{}]],"error":null,"digest":"$undefined"}
10:"$b:metadata"
8e:I[2619,["619","static/chunks/619-ba102abea3e3d0e4.js","958","static/chunks/app/(blog-post)/blog/%5Bslug%5D/page-d70ccb7129b2f9cf.js"],""]
8f:I[7604,["619","static/chunks/619-ba102abea3e3d0e4.js","958","static/chunks/app/(blog-post)/blog/%5Bslug%5D/page-d70ccb7129b2f9cf.js"],"default"]
13:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"export"}]," ",["$","span",null,{"className":"token keyword","children":"const"}]," config ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
14:["$","span",null,{"className":"code-line","children":["  api",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
15:["$","span",null,{"className":"code-line","children":["    externalResolver",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token boolean","children":"true"}],"\n"]}]
16:["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
17:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
18:["$","span",null,{"className":"code-line","children":"\n"}]
19:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"export"}]," ",["$","span",null,{"className":"token keyword","children":"default"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"req",["$","span",null,{"className":"token operator","children":":"}]," NextApiRequest",["$","span",null,{"className":"token punctuation","children":","}]," res",["$","span",null,{"className":"token operator","children":":"}]," NextApiResponse",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
1a:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token function","children":"httpProxyMiddleware"}],["$","span",null,{"className":"token punctuation","children":"("}],"req",["$","span",null,{"className":"token punctuation","children":","}]," res",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
1b:["$","span",null,{"className":"code-line","children":["        target",["$","span",null,{"className":"token operator","children":":"}]," process",["$","span",null,{"className":"token punctuation","children":"."}],"env",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token constant","children":"NEXT_PUBLIC_API_URL"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
1c:["$","span",null,{"className":"code-line","children":["        changeOrigin",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token boolean","children":"true"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
1d:["$","span",null,{"className":"code-line","children":["        pathRewrite",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],"\n"]}]
1e:["$","span",null,{"className":"code-line","children":["          ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
1f:["$","span",null,{"className":"code-line","children":["            patternStr",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"^/api/\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
20:["$","span",null,{"className":"code-line","children":["            replaceStr",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"/\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
21:["$","span",null,{"className":"code-line","children":["          ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
22:["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
23:["$","span",null,{"className":"code-line","children":["        cookieDomainRewrite",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
24:["$","span",null,{"className":"code-line","children":["          ",["$","span",null,{"className":"token string-property property","children":"\"*\""}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"localhost\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
25:["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
26:["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}]
27:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
28:["$","pre",null,{"className":"language-ts","children":["$","code",null,{"className":"language-ts code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"/** @type {import('next').NextConfig} */"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," nextConfig ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  swcMinify",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token boolean","children":"true"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  reactStrictMode",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token boolean","children":"true"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  compiler",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    styledComponents",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token boolean","children":"true"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["    removeConsole",["$","span",null,{"className":"token operator","children":":"}]," process",["$","span",null,{"className":"token punctuation","children":"."}],"env",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token constant","children":"NODE_ENV"}]," ",["$","span",null,{"className":"token operator","children":"==="}]," ",["$","span",null,{"className":"token string","children":"\"production\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"async"}]," ",["$","span",null,{"className":"token function","children":"rewrites"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"return"}]," process",["$","span",null,{"className":"token punctuation","children":"."}],"env",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token constant","children":"NODE_ENV"}]," ",["$","span",null,{"className":"token operator","children":"==="}]," ",["$","span",null,{"className":"token string","children":"\"production\""}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token operator","children":"?"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],"\n"]}],["$","span",null,{"className":"code-line","children":["          ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["            source",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"/api/:path*\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["            destination",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token template-string","children":[["$","span",null,{"className":"token template-punctuation string","children":"`"}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"$${"}],"process",["$","span",null,{"className":"token punctuation","children":"."}],"env",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token constant","children":"NEXT_PUBLIC_API_URL"}],["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"}"}]]}],["$","span",null,{"className":"token string","children":"/:path*"}],"$L3b"]}],"$L3c","\n"]}],"$L3d","$L3e","$L3f","$L40","$L41","$L42"]}]}]
29:["$","hr",null,{}]
2a:["$","p",null,{"children":"위 처럼 설정해 주니 서버에서 보낸 cookie가 localhost 브라우저에 잘 들어왔다."}]
2b:["$","p",null,{"children":"여기서 고민했던 부분이 csr환경이 아닌 next의 ssr환경인 프론트측 서버단에서는 유저인증을 어떻게 확인할 것인가 였다."}]
2c:["$","p",null,{"children":"우선 로그인 상태와 비로그인 상태에서 접근불가능한 페이지 접근시 리다이렉트를 시키는 방법으로 진행했다."}]
2d:["$","p",null,{"children":"Nextjs middleware는 root폴더에 middleware.ts 파일을 만들어 주면 페이지 라우팅 되기 전에 middleware가 자동으로 실행된다."}]
2e:["$","p",null,{"children":"Nextjs에서 지원하는 middleware는 들어오는 요청에 따라서 req, res, header를 다시 작성하거나 리디렉션 등을 수정하거나 재작성할 수 있다."}]
2f:["$","pre",null,{"className":"language-ts","children":["$","code",null,{"className":"language-ts code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"import"}]," ",["$","span",null,{"className":"token keyword","children":"type"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," NextRequest ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"\"next/server\""}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"import"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," fetchAuth",["$","span",null,{"className":"token punctuation","children":","}]," inValidateAuth",["$","span",null,{"className":"token punctuation","children":","}]," validateAuth ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"\"@/lib/validateUser\""}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," validatedUrl ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"["}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token string","children":"\"/users/sign-in\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token string","children":"\"/users/sign-up/normal\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token string","children":"\"/users/sign-up/social\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token string","children":"\"/users/sign-up/vendor\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token string","children":"\"/users/password/reset\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," inValidateUrl ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token string","children":"\"/users/my-page\""}],["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"export"}]," ",["$","span",null,{"className":"token keyword","children":"async"}]," ",["$","span",null,{"className":"token keyword","children":"function"}]," ",["$","span",null,{"className":"token function","children":"middleware"}],["$","span",null,{"className":"token punctuation","children":"("}],"req",["$","span",null,{"className":"token operator","children":":"}]," NextRequest",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," url ",["$","span",null,{"className":"token operator","children":"="}]," req",["$","span",null,{"className":"token punctuation","children":"."}],"nextUrl",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"validatedUrl","$L43","$L44","$L45","url","$L46","pathname","$L47","$L48"," ","$L49","\n"]}],"$L4a","$L4b","$L4c","$L4d","$L4e","$L4f","$L50","$L51","$L52","$L53","$L54","$L55","$L56"]}]}]
30:["$","pre",null,{"className":"language-ts","children":["$","code",null,{"className":"language-ts code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"import"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," NextRequest",["$","span",null,{"className":"token punctuation","children":","}]," NextResponse ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"\"next/server\""}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"export"}]," ",["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token function-variable function","children":"validateUser"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"req",["$","span",null,{"className":"token operator","children":":"}]," NextRequest",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token function","children":"fetch"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"url\""}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    method",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"get\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["    mode",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"cors\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["    credentials",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"same-origin\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["    headers",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token string-property property","children":"\"Content-Type\""}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"application/json\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["      cookie",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token template-string","children":[["$","span",null,{"className":"token template-punctuation string","children":"`"}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"$${"}],"req",["$","span",null,{"className":"token punctuation","children":"."}],"headers",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"get"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"cookie\""}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token interpolation-punctuation punctuation","children":"}"}]]}],["$","span",null,{"className":"token template-punctuation string","children":"`"}]]}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"$L57","$L58","\n"]}],"$L59","$L5a","$L5b","$L5c","$L5d","$L5e","$L5f","$L60","$L61","$L62","$L63","$L64","$L65","$L66","$L67","$L68","$L69","$L6a","$L6b","$L6c","$L6d","$L6e","$L6f","$L70","$L71"]}]}]
31:["$","p",null,{"children":"처음에 이런식으로 미들웨어를 구현했다. matcher로 페이지단만 확인했고, 페이지 라우팅시 유저 인증에 성공하면 cookie를 통해 유저정보와 세션을 전달했다."}]
32:["$","p",null,{"children":"또 인증성공시 접근 x, 비인증시 접근 x 한 url을 확인해 리다이렉트 시키도록 했다."}]
33:["$","p",null,{"children":"처음 해봤던 작업이었고, 제대로 구현한지 확신이 들지 않아 코드리뷰를 요청했다."}]
34:["$","p",null,{"children":"middleware를 사용하지 않고 hocs를 사용해 auth를 호출하고, axios config에 headers를 전달하는 방법으로 알려주셨다."}]
35:["$","pre",null,{"className":"language-ts","children":["$","code",null,{"className":"language-ts code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"import"}]," React ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"\"react\""}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"import"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," GetServerSideProps",["$","span",null,{"className":"token punctuation","children":","}]," GetServerSidePropsContext ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"\"next\""}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"import"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," getAuth ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"\"@/models/auth\""}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"import"}]," merge ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"\"lodash/merge\""}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," validatedUrl ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"["}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token string","children":"\"/users/sign-in\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token string","children":"\"/users/sign-up/normal\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token string","children":"\"/users/sign-up/social\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token string","children":"\"/users/sign-up/vendor\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token string","children":"\"/users/password/reset\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," inValidateUrl ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"["}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token string","children":"\"/users/my-page\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token string","children":"\"/users/my-page/profile\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token string","children":"\"/users/my-page/review\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"export"}]," ","$L72"," ","$L73"," ","$L74","$L75","getServerSideProps","$L76","$L77"," GetServerSideProps","$L78"," ","$L79","\n"]}],"$L7a","$L7b","$L7c","$L7d","$L7e","$L7f","$L80","$L81","$L82","$L83","$L84","$L85","$L86","$L87","$L88","$L89","$L8a","$L8b","$L8c","$L8d"]}]}]
36:["$","p",null,{"children":"middleware는 nextjs에서 서버도 같이 구성해 사용하면 좋을거라고 조언을 주셨다."}]
37:["$","pre",null,{"className":"language-ts","children":["$","code",null,{"className":"language-ts code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"// page/*"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token operator","children":"..."}],["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"export"}]," ",["$","span",null,{"className":"token keyword","children":"const"}]," getServerSideProps ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"withAuth"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token operator","children":"..."}],["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}]
38:["$","article",null,{"className":"flex items-center justify-between gap-[20px] border-y-2 border-y-gray500 py-[30px]","children":[["$","div",null,{"className":"w-1/2 min-w-0 flex-1 rounded-[4px] bg-gray100 dark:bg-darkBg02 text-left","children":["$","$L8e",null,{"href":"/blog/tailwindcss","className":"flex w-full flex-col px-[14px] py-[10px] no-underline","children":[["$","div",null,{"className":"text-[14px] text-gray700","children":"이전글"}],["$","h3",null,{"className":"m-0 truncate text-[16px] font-bold text-gray900","children":"Nextjs에서 tailwind 써보기"}]]}]}],["$","div",null,{"className":"w-1/2 min-w-0 flex-1 rounded-[4px] bg-gray100 dark:bg-darkBg02 text-right","children":["$","$L8e",null,{"href":"/blog/browser","className":"flex w-full flex-col px-[14px] py-[10px] no-underline","children":[["$","div",null,{"className":"text-[14px] text-gray700","children":"다음글"}],["$","h3",null,{"className":"m-0 truncate text-[16px] font-bold text-gray900","children":"브라우저에 url을 검색하면?"}]]}]}]]}]
39:["$","$L8f",null,{}]
3b:["$","span",null,{"className":"token template-punctuation string","children":"`"}]
3c:["$","span",null,{"className":"token punctuation","children":","}]
3d:["$","span",null,{"className":"code-line","children":["          ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
3e:["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token punctuation","children":"]"}],"\n"]}]
3f:["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
40:["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
41:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token operator","children":"..."}],["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
42:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
43:["$","span",null,{"className":"token punctuation","children":"."}]
44:["$","span",null,{"className":"token function","children":"includes"}]
45:["$","span",null,{"className":"token punctuation","children":"("}]
46:["$","span",null,{"className":"token punctuation","children":"."}]
47:["$","span",null,{"className":"token punctuation","children":")"}]
48:["$","span",null,{"className":"token punctuation","children":")"}]
49:["$","span",null,{"className":"token punctuation","children":"{"}]
4a:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token keyword","children":"await"}]," ",["$","span",null,{"className":"token function","children":"validateAuth"}],["$","span",null,{"className":"token punctuation","children":"("}],"req",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
4b:["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
4c:["$","span",null,{"className":"code-line","children":"\n"}]
4d:["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"inValidateUrl",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"includes"}],["$","span",null,{"className":"token punctuation","children":"("}],"url",["$","span",null,{"className":"token punctuation","children":"."}],"pathname",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
4e:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token keyword","children":"await"}]," ",["$","span",null,{"className":"token function","children":"inValidateAuth"}],["$","span",null,{"className":"token punctuation","children":"("}],"req",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
4f:["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
50:["$","span",null,{"className":"code-line","children":"\n"}]
51:["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token keyword","children":"await"}]," ",["$","span",null,{"className":"token function","children":"fetchAuth"}],["$","span",null,{"className":"token punctuation","children":"("}],"req",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
52:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
53:["$","span",null,{"className":"code-line","children":"\n"}]
54:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"export"}]," ",["$","span",null,{"className":"token keyword","children":"const"}]," config ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
55:["$","span",null,{"className":"code-line","children":["  matcher",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token string","children":"\"/((?!api|_next/static|_next/image|favicon.ico|assets).*)\""}],["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
56:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
57:["$","span",null,{"className":"token punctuation","children":")"}]
58:["$","span",null,{"className":"token punctuation","children":";"}]
59:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
5a:["$","span",null,{"className":"code-line","children":"\n"}]
5b:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token operator","children":"..."}],["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
5c:["$","span",null,{"className":"code-line","children":"\n"}]
5d:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"export"}]," ",["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token function-variable function","children":"fetchAuth"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"async"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"req",["$","span",null,{"className":"token operator","children":":"}]," NextRequest",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
5e:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"try"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
5f:["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"const"}]," res ",["$","span",null,{"className":"token operator","children":"="}]," NextResponse",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"next"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
60:["$","span",null,{"className":"code-line","children":"\n"}]
61:["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"const"}]," response ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"await"}]," ",["$","span",null,{"className":"token function","children":"validateUser"}],["$","span",null,{"className":"token punctuation","children":"("}],"req",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
62:["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"const"}]," data ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"await"}]," response",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"json"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
63:["$","span",null,{"className":"code-line","children":"\n"}]
64:["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"response",["$","span",null,{"className":"token punctuation","children":"."}],"ok",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
65:["$","span",null,{"className":"code-line","children":["            res",["$","span",null,{"className":"token punctuation","children":"."}],"cookies",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"set"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"user\""}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token constant","children":"JSON"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"stringify"}],["$","span",null,{"className":"token punctuation","children":"("}],"data",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
66:["$","span",null,{"className":"code-line","children":["            ",["$","span",null,{"className":"token keyword","children":"return"}]," res",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
67:["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
68:["$","span",null,{"className":"code-line","children":"\n"}]
69:["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"!"}],"response",["$","span",null,{"className":"token punctuation","children":"."}],"ok",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
6a:["$","span",null,{"className":"code-line","children":["            res",["$","span",null,{"className":"token punctuation","children":"."}],"cookies",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"delete"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"user\""}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
6b:["$","span",null,{"className":"code-line","children":["            res",["$","span",null,{"className":"token punctuation","children":"."}],"cookies",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"delete"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"user.sid\""}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
6c:["$","span",null,{"className":"code-line","children":["            ",["$","span",null,{"className":"token keyword","children":"return"}]," res",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
6d:["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
6e:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"catch"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"e",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
6f:["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"throw"}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":"Error"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"Validate Error\""}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
70:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
71:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
72:["$","span",null,{"className":"token keyword","children":"default"}]
73:["$","span",null,{"className":"token keyword","children":"function"}]
74:["$","span",null,{"className":"token function","children":"withAuth"}]
75:["$","span",null,{"className":"token punctuation","children":"("}]
76:["$","span",null,{"className":"token operator","children":"?"}]
77:["$","span",null,{"className":"token operator","children":":"}]
78:["$","span",null,{"className":"token punctuation","children":")"}]
79:["$","span",null,{"className":"token punctuation","children":"{"}]
7a:["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token keyword","children":"async"}]," ",["$","span",null,{"className":"token keyword","children":"function"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"context",["$","span",null,{"className":"token operator","children":":"}]," GetServerSidePropsContext",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
7b:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," url ",["$","span",null,{"className":"token operator","children":"="}]," context",["$","span",null,{"className":"token punctuation","children":"."}],"req",["$","span",null,{"className":"token punctuation","children":"."}],"url ",["$","span",null,{"className":"token keyword","children":"as"}]," ",["$","span",null,{"className":"token builtin","children":"string"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
7c:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"let"}]," user ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"null"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
7d:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"try"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
7e:["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token keyword","children":"const"}]," res ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"await"}]," ",["$","span",null,{"className":"token function","children":"getAuth"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"{"}]," headers",["$","span",null,{"className":"token operator","children":":"}]," context",["$","span",null,{"className":"token punctuation","children":"."}],"req",["$","span",null,{"className":"token punctuation","children":"."}],"headers ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
7f:["$","span",null,{"className":"code-line","children":["      user ",["$","span",null,{"className":"token operator","children":"="}]," res",["$","span",null,{"className":"token punctuation","children":"."}],"data",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
80:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"catch"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"e",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
81:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"inValidateUrl",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"includes"}],["$","span",null,{"className":"token punctuation","children":"("}],"url",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"&&"}]," ",["$","span",null,{"className":"token operator","children":"!"}],"user",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
82:["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
83:["$","span",null,{"className":"code-line","children":["        redirect",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}]
84:["$","span",null,{"className":"code-line","children":["          permanent",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token boolean","children":"false"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
85:["$","span",null,{"className":"code-line","children":["          destination",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"/users/sign-in\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
86:["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}]
87:["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
88:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
89:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token operator","children":"..."}],["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
8a:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," ret ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"await"}]," getServerSideProps",["$","span",null,{"className":"token operator","children":"?."}],["$","span",null,{"className":"token punctuation","children":"("}],"context",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
8b:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token function","children":"merge"}],["$","span",null,{"className":"token punctuation","children":"("}],"ret",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," props",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," user ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
8c:["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
8d:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]
