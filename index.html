<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/0e4fe491bf84089c-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/627622453ef56b0d-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/7d8c9b0ca4a64a5a-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/8db47a8bf03b7d2f-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/934c4b7cb736f2a3-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/59c48ca6c4481319.css" crossorigin="" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-6fa4533758e87a81.js" crossorigin=""/><script src="/_next/static/chunks/fd9d1056-daffe10d0317ecd8.js" async="" crossorigin=""></script><script src="/_next/static/chunks/938-b67b1afd2be9fa0f.js" async="" crossorigin=""></script><script src="/_next/static/chunks/main-app-1c5b78bff76ceca6.js" async="" crossorigin=""></script><script src="/_next/static/chunks/438-d093edea1998085d.js" async=""></script><script src="/_next/static/chunks/app/layout-d399a67a63e785b6.js" async=""></script><script src="/_next/static/chunks/app/page-79f572f9a6ded4aa.js" async=""></script><link rel="preload" href="https://www.googletagmanager.com/gtag/js?id=G-LFDRQZPCBN" as="script"/><title>Been blog</title><meta name="description" content="Been dev-note"/><meta name="google-site-verification" content="BirkRt7C7FYMLW96RbXad2EtPdcl0-_ti9xCRkCHa5U"/><meta name="naver-site-verification" content="58945b2bbe2fe86252fa8c7b204b40f6019920e9"/><meta property="og:title" content="Been blog"/><meta property="og:description" content="Been dev-note"/><meta property="og:url" content="https://wonbeenna.github.io"/><meta property="og:site_name" content="Been blog"/><meta property="og:locale" content="ko_KR"/><meta property="og:image" content="https://wonbeenna.github.io/favicon.png"/><meta property="og:image:width" content="800"/><meta property="og:image:height" content="600"/><meta property="og:image:alt" content="Been blog"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Been blog"/><meta name="twitter:description" content="Been dev-note"/><meta name="twitter:image" content="https://wonbeenna.github.io/favicon.png"/><meta name="twitter:image:width" content="800"/><meta name="twitter:image:height" content="600"/><meta name="twitter:image:alt" content="Been blog"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="192x192"/><meta name="next-size-adjust"/><script src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" crossorigin="" noModule=""></script></head><body class="__className_bd870a"><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><header class="sticky top-0 z-10 mx-auto my-0 h-[56px] border-b-[1px] border-b-gray200 bg-white px-[24px] py-0 dark:bg-darkBg01"><section class="m-auto flex h-full max-w-[970px] items-center justify-between"><div class="flex items-center gap-[20px]"><a href="/"><img alt="logo" loading="lazy" width="60" height="56" decoding="async" data-nimg="1" style="color:transparent" src="/assets/icons/been-logo.svg"/></a><div class="flex items-center gap-[20px]"><a href="/about">About</a></div></div><!--$!--><template data-dgst="NEXT_DYNAMIC_NO_SSR_CODE"></template><!--/$--></section></header><main class="mx-auto my-0 max-w-[970px] p-[16px]"><section class="flex flex-col-reverse md:relative md:flex-row"><div class="flex flex-1 flex-col"><ol class="relative mx-0 my-[20px] flex w-full  flex-col gap-[40px] p-0"><li class="mt-[30px] border-b-[1px] border-b-gray300 pb-[50px] md:mt-[50px] md:pb-[70px]"><a class="hover_card flex w-full flex-col items-center justify-between gap-0 md:flex-row md:gap-[40px]" href="/blog/javaScript/webview-safe-area"><img alt="IOS 웹뷰에서 safe area 설정하기" loading="lazy" width="200" height="200" decoding="async" data-nimg="1" class="h-[200px] w-[200px] rounded-[14px]" style="color:transparent" src="/assets/postIcon/javascript.png"/><div class="flex min-h-[160px] w-full flex-col items-center justify-center md:min-h-[200px]"><h1 class="my-[12px] overflow-hidden text-ellipsis break-words text-[24px] font-bold text-black md:mt-0 md:text-[34px]">IOS 웹뷰에서 safe area 설정하기</h1><p class="mx-[14px] my-[12px] text-ellipsis break-keep text-[14px] text-gray900 md:text-[18px]">IOS 웹뷰에서 safe area 를 설정하는 방법</p><span class="text-gray700">2024-07-02</span></div></a></li><li class="mt-[30px] border-b-[1px] border-b-gray300 pb-[50px] md:mt-[50px] md:pb-[70px]"><a class="hover_card flex w-full flex-col items-center justify-between gap-0 md:flex-row md:gap-[40px]" href="/blog/javaScript/rollup"><img alt="rollup으로 번들링하는 과정" loading="lazy" width="200" height="200" decoding="async" data-nimg="1" class="h-[200px] w-[200px] rounded-[14px]" style="color:transparent" src="/assets/postIcon/rollup-logo.svg"/><div class="flex min-h-[160px] w-full flex-col items-center justify-center md:min-h-[200px]"><h1 class="my-[12px] overflow-hidden text-ellipsis break-words text-[24px] font-bold text-black md:mt-0 md:text-[34px]">rollup으로 번들링하는 과정</h1><p class="mx-[14px] my-[12px] text-ellipsis break-keep text-[14px] text-gray900 md:text-[18px]">처음 rollup으로 번들링하는 과정에서 겪은 문제들과 해결방법</p><span class="text-gray700">2024-03-09</span></div></a></li><li class="mt-[30px] border-b-[1px] border-b-gray300 pb-[50px] md:mt-[50px] md:pb-[70px]"><a class="hover_card flex w-full flex-col items-center justify-between gap-0 md:flex-row md:gap-[40px]" href="/blog/javaScript/module-system"><img alt="cjs와 esm" loading="lazy" width="200" height="200" decoding="async" data-nimg="1" class="h-[200px] w-[200px] rounded-[14px]" style="color:transparent" src="/assets/postIcon/javascript.png"/><div class="flex min-h-[160px] w-full flex-col items-center justify-center md:min-h-[200px]"><h1 class="my-[12px] overflow-hidden text-ellipsis break-words text-[24px] font-bold text-black md:mt-0 md:text-[34px]">cjs와 esm</h1><p class="mx-[14px] my-[12px] text-ellipsis break-keep text-[14px] text-gray900 md:text-[18px]">rollup으로 번들링하는 과정에서 알게된 cjs와 esm의 차이점에 대해</p><span class="text-gray700">2024-03-07</span></div></a></li><li class="mt-[30px] border-b-[1px] border-b-gray300 pb-[50px] md:mt-[50px] md:pb-[70px]"><a class="hover_card flex w-full flex-col items-center justify-between gap-0 md:flex-row md:gap-[40px]" href="/blog/javaScript/react-immutable"><img alt="리액트에서 불변성을 지키는 이유" loading="lazy" width="200" height="200" decoding="async" data-nimg="1" class="h-[200px] w-[200px] rounded-[14px]" style="color:transparent" src="/assets/postIcon/logo192.png"/><div class="flex min-h-[160px] w-full flex-col items-center justify-center md:min-h-[200px]"><h1 class="my-[12px] overflow-hidden text-ellipsis break-words text-[24px] font-bold text-black md:mt-0 md:text-[34px]">리액트에서 불변성을 지키는 이유</h1><p class="mx-[14px] my-[12px] text-ellipsis break-keep text-[14px] text-gray900 md:text-[18px]">리액트에서 불변성을 지키는 이유</p><span class="text-gray700">2024-02-25</span></div></a></li><li class="mt-[30px] border-b-[1px] border-b-gray300 pb-[50px] md:mt-[50px] md:pb-[70px]"><a class="hover_card flex w-full flex-col items-center justify-between gap-0 md:flex-row md:gap-[40px]" href="/blog/javaScript/vite-proxy"><img alt="Vite proxy 설정" loading="lazy" width="200" height="200" decoding="async" data-nimg="1" class="h-[200px] w-[200px] rounded-[14px]" style="color:transparent" src="/assets/postIcon/logo192.png"/><div class="flex min-h-[160px] w-full flex-col items-center justify-center md:min-h-[200px]"><h1 class="my-[12px] overflow-hidden text-ellipsis break-words text-[24px] font-bold text-black md:mt-0 md:text-[34px]">Vite proxy 설정</h1><p class="mx-[14px] my-[12px] text-ellipsis break-keep text-[14px] text-gray900 md:text-[18px]">Vite 로컬환경에서 CORS 문제 해결하기</p><span class="text-gray700">2024-01-18</span></div></a></li><li class="mt-[30px] border-b-[1px] border-b-gray300 pb-[50px] md:mt-[50px] md:pb-[70px]"><a class="hover_card flex w-full flex-col items-center justify-between gap-0 md:flex-row md:gap-[40px]" href="/blog/javaScript/babel"><img alt="바벨 사용해보기" loading="lazy" width="200" height="200" decoding="async" data-nimg="1" class="h-[200px] w-[200px] rounded-[14px]" style="color:transparent" src="/assets/postIcon/babel-icon.svg"/><div class="flex min-h-[160px] w-full flex-col items-center justify-center md:min-h-[200px]"><h1 class="my-[12px] overflow-hidden text-ellipsis break-words text-[24px] font-bold text-black md:mt-0 md:text-[34px]">바벨 사용해보기</h1><p class="mx-[14px] my-[12px] text-ellipsis break-keep text-[14px] text-gray900 md:text-[18px]">바벨 기본 동작과 사용방법</p><span class="text-gray700">2023-12-01</span></div></a></li><li class="mt-[30px] border-b-[1px] border-b-gray300 pb-[50px] md:mt-[50px] md:pb-[70px]"><a class="hover_card flex w-full flex-col items-center justify-between gap-0 md:flex-row md:gap-[40px]" href="/blog/javaScript/webpack-1"><img alt="웹팩 기본 사용법 (1)" loading="lazy" width="200" height="200" decoding="async" data-nimg="1" class="h-[200px] w-[200px] rounded-[14px]" style="color:transparent" src="/assets/postIcon/webpack-icon.svg"/><div class="flex min-h-[160px] w-full flex-col items-center justify-center md:min-h-[200px]"><h1 class="my-[12px] overflow-hidden text-ellipsis break-words text-[24px] font-bold text-black md:mt-0 md:text-[34px]">웹팩 기본 사용법 (1)</h1><p class="mx-[14px] my-[12px] text-ellipsis break-keep text-[14px] text-gray900 md:text-[18px]">처음 접해보는 웹팩의 원리와 기본 사용 방법</p><span class="text-gray700">2023-11-30</span></div></a></li><li class="mt-[30px] border-b-[1px] border-b-gray300 pb-[50px] md:mt-[50px] md:pb-[70px]"><a class="hover_card flex w-full flex-col items-center justify-between gap-0 md:flex-row md:gap-[40px]" href="/blog/javaScript/rn-geolocation"><img alt="React Native geolocation" loading="lazy" width="200" height="200" decoding="async" data-nimg="1" class="h-[200px] w-[200px] rounded-[14px]" style="color:transparent" src="/assets/postIcon/logo192.png"/><div class="flex min-h-[160px] w-full flex-col items-center justify-center md:min-h-[200px]"><h1 class="my-[12px] overflow-hidden text-ellipsis break-words text-[24px] font-bold text-black md:mt-0 md:text-[34px]">React Native geolocation</h1><p class="mx-[14px] my-[12px] text-ellipsis break-keep text-[14px] text-gray900 md:text-[18px]">React Native 위치정보 받아오기</p><span class="text-gray700">2023-10-25</span></div></a></li><li class="mt-[30px] border-b-[1px] border-b-gray300 pb-[50px] md:mt-[50px] md:pb-[70px]"><a class="hover_card flex w-full flex-col items-center justify-between gap-0 md:flex-row md:gap-[40px]" href="/blog/javaScript/rn-deep-link"><img alt="React Native Deep Linking" loading="lazy" width="200" height="200" decoding="async" data-nimg="1" class="h-[200px] w-[200px] rounded-[14px]" style="color:transparent" src="/assets/postIcon/logo192.png"/><div class="flex min-h-[160px] w-full flex-col items-center justify-center md:min-h-[200px]"><h1 class="my-[12px] overflow-hidden text-ellipsis break-words text-[24px] font-bold text-black md:mt-0 md:text-[34px]">React Native Deep Linking</h1><p class="mx-[14px] my-[12px] text-ellipsis break-keep text-[14px] text-gray900 md:text-[18px]">React Native Deep Linking 연결</p><span class="text-gray700">2023-10-17</span></div></a></li><li class="mt-[30px] border-b-[1px] border-b-gray300 pb-[50px] md:mt-[50px] md:pb-[70px]"><a class="hover_card flex w-full flex-col items-center justify-between gap-0 md:flex-row md:gap-[40px]" href="/blog/javaScript/next-blog"><img alt="Next.js 블로그 만들기" loading="lazy" width="200" height="200" decoding="async" data-nimg="1" class="h-[200px] w-[200px] rounded-[14px]" style="color:transparent" src="/assets/postIcon/Nextjs.svg"/><div class="flex min-h-[160px] w-full flex-col items-center justify-center md:min-h-[200px]"><h1 class="my-[12px] overflow-hidden text-ellipsis break-words text-[24px] font-bold text-black md:mt-0 md:text-[34px]">Next.js 블로그 만들기</h1><p class="mx-[14px] my-[12px] text-ellipsis break-keep text-[14px] text-gray900 md:text-[18px]">Next.js로 블로그 만들기</p><span class="text-gray700">2023-10-09</span></div></a></li></ol><ul class="flex items-center justify-center gap-[10px]"><li class="box-border flex h-[24px] w-[24px] cursor-pointer items-center justify-center text-[16px] pointer-events-none cursor-not-allowed opacity-50">ᐸ</li><li class="box-border flex h-[24px] w-[24px] cursor-pointer items-center justify-center text-[16px] rounded-full bg-primaryGradient03 px-[4px] py-[2px] text-white">1</li><li class="box-border flex h-[24px] w-[24px] cursor-pointer items-center justify-center text-[16px] ">2</li><li class="box-border flex h-[24px] w-[24px] cursor-pointer items-center justify-center text-[16px] ">3</li><li class="box-border flex h-[24px] w-[24px] cursor-pointer items-center justify-center text-[16px] ">4</li><li class="box-border flex h-[24px] w-[24px] cursor-pointer items-center justify-center text-[16px] ">ᐳ</li></ul></div><ul class="relative top-0 flex h-fit min-w-fit flex-row flex-wrap gap-[20px] py-[20px] pl-0 md:sticky md:top-[100px] md:flex-col md:flex-nowrap md:py-0 md:pl-[30px]"><h2 class="hidden text-[18px] font-bold md:inline">Category</h2><li><a class="text-gray700" href="/blog/javaScript">javaScript (36)</a></li><li><a class="text-gray700" href="/blog/study">study (2)</a></li><li><a class="text-gray700" href="/blog/til">til (1)</a></li></ul></section></main><footer class="flex items-center justify-center pb-[16px] text-center text-[14px] text-gray600">Copyright © Been.</footer><script src="/_next/static/chunks/webpack-6fa4533758e87a81.js" crossorigin="" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/0e4fe491bf84089c-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/media/627622453ef56b0d-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n3:HL[\"/_next/static/media/7d8c9b0ca4a64a5a-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n4:HL[\"/_next/static/media/8db47a8bf03b7d2f-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n5:HL[\"/_next/static/media/934c4b7cb736f2a3-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n6:HL[\"/"])</script><script>self.__next_f.push([1,"_next/static/css/59c48ca6c4481319.css\",\"style\",{\"crossOrigin\":\"\"}]\n0:\"$L7\"\n"])</script><script>self.__next_f.push([1,"8:I[7690,[],\"\"]\nb:I[5935,[\"438\",\"static/chunks/438-d093edea1998085d.js\",\"185\",\"static/chunks/app/layout-d399a67a63e785b6.js\"],\"\"]\nc:I[4840,[\"438\",\"static/chunks/438-d093edea1998085d.js\",\"185\",\"static/chunks/app/layout-d399a67a63e785b6.js\"],\"Providers\"]\nd:I[5250,[\"438\",\"static/chunks/438-d093edea1998085d.js\",\"931\",\"static/chunks/app/page-79f572f9a6ded4aa.js\"],\"\"]\ne:I[1749,[\"438\",\"static/chunks/438-d093edea1998085d.js\",\"185\",\"static/chunks/app/layout-d399a67a63e785b6.js\"],\"Image\"]\nf:\"$Sreact.suspense\"\n10:I[60"])</script><script>self.__next_f.push([1,"05,[\"438\",\"static/chunks/438-d093edea1998085d.js\",\"185\",\"static/chunks/app/layout-d399a67a63e785b6.js\"],\"NoSSR\"]\n11:I[9137,[\"438\",\"static/chunks/438-d093edea1998085d.js\",\"185\",\"static/chunks/app/layout-d399a67a63e785b6.js\"],\"\"]\n12:I[5613,[],\"\"]\n13:I[1778,[],\"\"]\n15:I[8955,[],\"\"]\n"])</script><script>self.__next_f.push([1,"7:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/59c48ca6c4481319.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]],[\"$\",\"$L8\",null,{\"buildId\":\"QhAXcU8jiv3AOoUzgBG8-\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/\",\"initialTree\":[\"\",{\"children\":[\"__PAGE__\",{}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"__PAGE__\",{},[\"$L9\",\"$La\",null]]},[null,[\"$\",\"html\",null,{\"lang\":\"ko\",\"suppressHydrationWarning\":true,\"children\":[[\"$\",\"$Lb\",null,{\"src\":\"https://www.googletagmanager.com/gtag/js?id=G-LFDRQZPCBN\"}],[\"$\",\"$Lb\",null,{\"id\":\"google-analytics\",\"children\":\"\\n          window.dataLayer = window.dataLayer || [];\\n          function gtag(){dataLayer.push(arguments);}\\n          gtag('js', new Date());\\n \\n          gtag('config', 'G-LFDRQZPCBN');\\n        \"}],[\"$\",\"body\",null,{\"suppressHydrationWarning\":true,\"className\":\"__className_bd870a\",\"children\":[\"$\",\"$Lc\",null,{\"children\":[[\"$\",\"header\",null,{\"className\":\"sticky top-0 z-10 mx-auto my-0 h-[56px] border-b-[1px] border-b-gray200 bg-white px-[24px] py-0 dark:bg-darkBg01\",\"children\":[\"$\",\"section\",null,{\"className\":\"m-auto flex h-full max-w-[970px] items-center justify-between\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex items-center gap-[20px]\",\"children\":[[\"$\",\"$Ld\",null,{\"href\":\"/\",\"children\":[\"$\",\"$Le\",null,{\"src\":\"/assets/icons/been-logo.svg\",\"width\":60,\"height\":56,\"alt\":\"logo\"}]}],[\"$\",\"div\",null,{\"className\":\"flex items-center gap-[20px]\",\"children\":[\"$\",\"$Ld\",null,{\"href\":\"/about\",\"children\":\"About\"}]}]]}],[\"$\",\"$f\",null,{\"fallback\":null,\"children\":[\"$\",\"$L10\",null,{\"children\":[\"$\",\"$L11\",null,{}]}]}]]}]}],[\"$\",\"main\",null,{\"className\":\"mx-auto my-0 max-w-[970px] p-[16px]\",\"children\":[\"$\",\"$L12\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L13\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"styles\":null}]}],[\"$\",\"footer\",null,{\"className\":\"flex items-center justify-center pb-[16px] text-center text-[14px] text-gray600\",\"children\":\"Copyright © Been.\"}]]}]}]]}],null]],\"initialHead\":[false,\"$L14\"],\"globalErrorComponent\":\"$15\"}]]\n"])</script><script>self.__next_f.push([1,"16:I[8451,[\"438\",\"static/chunks/438-d093edea1998085d.js\",\"931\",\"static/chunks/app/page-79f572f9a6ded4aa.js\"],\"\"]\n17:Taca,"])</script><script>self.__next_f.push([1,"\n사내 프로젝트를 진행하면서 IOS 웹뷰에서 안전 영역을 설정하는 방법에 대해 알게되었다.\n\n아이폰 X 부터는 디스플레이에 노치 디자인이 적용되고, 하단에는 물리 버튼이 사라지고 제스처로 대체되었다.\n\n이로 인해 기존의 웹뷰에서는 노치 디자인과 하단의 제스처 영역을 고려해야 한다.\n\n첫번째로 웹내에서 safe area 영역을 설정하는 방법은 아래와 같다.\n\n```css\npadding-top: env(safe-area-inset-top);\npadding-right: env(safe-area-inset-right);\npadding-left: env(safe-area-inset-left);\npadding-bottom: env(safe-area-inset-bottom);\n```\n\n위와 같이 설정하면 IOS 웹뷰에서는 safe area 영역을 설정할 수 있다.\n\n적용하고 개발자 도구로 확인해보니 해당 영역만큼 padding 이 적용되어 있었다.\n\n---\n\n두번째로 safe area 영역을 무시하고 전체 화면을 사용하려면\n\n```html\n\u003cmeta name=\"viewport\" content=\"viewport-fit=cover\" /\u003e\n```\n\n위와 같이 설정하면 safe area 영역을 무시하고 전체 화면을 사용할 수 있다.\n\n프로젝트는 Next.js 로 개발되어 layout 에 해당 meta 태그를 추가하여 해결하였다.\n\n```tsx\nimport type { Metadata } from 'next';\n\nexport const metadata: Metadata = {\n    title: 'title',\n    description: 'description',\n    other: {\n    viewport:\n        'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, viewport-fit=cover',\n    }\n};\n\nexport default function RootLayout({\n  children,\n}: Readonly\u003c{\n  children: React.ReactNode;\n}\u003e) {\n  return (\n    \u003chtml lang=\"en\"\u003e\n      \u003cbody\u003e\n        \u003cmain\u003e{children}\u003c/main\u003e\n      \u003c/body\u003e\n    \u003c/html\u003e\n  );\n}\n```\n\n추가로 핀치줌을 막기 위해 `maximum-scale=1.0`과 `user-scalable=0`을 설정하였다.\n\n---\n\n위 작업을 하면서 기존 모달 컴포넌트에서 모달이 열렸을 때 뒤 스크롤을 막으려고 아래와 같은 코드를 작성하였는데,\n\n```tsx\n  useEffect(() =\u003e {\n      document.body.style.cssText = `\n            position: fixed;\n            top: -${window.scrollY}px;\n            overflow: hidden;\n            width: 100%;\n        `;\n\n      return () =\u003e {\n        const scrollY = document.body.style.top;\n        document.body.style.cssText = '';\n        window.scrollTo(0, parseInt(scrollY || '0', 10) * -1);\n      };\n  }, []);\n```\n\n웹뷰내에서 모달이 열렸을 때 `fixed` 속성으로 인해 웹뷰에서 safe area 영역만큼 모달이 밀리는 현상이 발생했다.\n\n```tsx\n  useEffect(() =\u003e {\n      document.body.style.cssText = `\n            overflow: hidden;\n        `;\n\n      return () =\u003e {\n        document.body.style.cssText = '';\n      };\n  }, []);\n```\n\n위와 같이 overflow 만 hidden 처리하여 해결하였다.\n"])</script><script>self.__next_f.push([1,"18:T1359,"])</script><script>self.__next_f.push([1,"\nmonorepo를 사용해 패키지들을 분리하는 과정에서 이슈를 확인했다.\n\n번들링 하지않고, 패키지들을 `index.ts`에서 직접 내보내 사용했을 때, 사용하지 않는 코드들도 함께 포함되는 문제가 있었다.\n이 문제점을 확인하고 tree-shaking을 적용하기 위해 rollup을 사용하게 되었다.\n\n---\n\n### tree-shaking\n\ntree-shaking은 최종 번들링한 결과에서 사용하지 않는 코드를 제거하는 기능이다.\n불필요한 코드가 없어지기 때문에 번들 파일의 크기를 줄일 수 있다.\n\ntree-shaking은 ES6 부터(esm) 지원되는 기능이다.\n\n---\n\n### rollup\n\n먼저 약 10개정도 되는 패키지들을 각각 설정하는건 비효율 적이라 생각했다.\n그래서 공통적으로 사용할 rollup.config.mjs 파일을 만들어 사용하기로 했다.\n\n```javascript\nimport path from 'path';\nimport { readFileSync } from 'fs';\nimport { DEFAULT_EXTENSIONS } from '@babel/core';\nimport babel from '@rollup/plugin-babel';\nimport commonjs from '@rollup/plugin-commonjs';\nimport resolve from '@rollup/plugin-node-resolve';\nimport typescript from '@rollup/plugin-typescript';\nimport builtins from 'builtin-modules';\nimport json from '@rollup/plugin-json';\nimport { defineConfig } from 'rollup';\nimport terser from '@rollup/plugin-terser';\n\nconst extensions = [...DEFAULT_EXTENSIONS, '.ts', '.tsx'];\n\nexport function generateRollupConfig({ packageDir }) {\n\n  {...}\n\n  const plugins = [\n    resolve({\n      extensions,\n    }),\n    commonjs(),\n    babel({\n      exclude: 'node_modules/**',\n      extensions,\n      babelHelpers: 'bundled',\n    }),\n    json(),\n    typescript({\n      compilerOptions: {\n        outDir: 'dist',\n        module: 'esnext',\n        moduleResolution: 'bundler',\n      },\n      tsconfig: path.join(packageDir, 'tsconfig.json'),\n    }),\n    terser(),\n  ];\n\n  const generateConfig = (output) =\u003e {\n    return {\n      input,\n      output,\n      external,\n      plugins,\n    };\n  };\n\n  return defineConfig([\n    generateConfig([\n      {\n        dir: output,\n        format: 'cjs',\n        entryFileNames: '[name].js',\n      },\n      {\n        dir: output,\n        format: 'esm',\n        entryFileNames: '[name].mjs',\n        preserveModules: true,\n        preserveModulesRoot: path.dirname(input),\n      },\n    ]),\n  ]);\n}\n```\n\n- `@rollup/plugin-babel` : rollup + babel 연동\n\n**Note. @rollup/plugin-commonjs 보다 뒤에*\n\n- `@rollup/plugin-commonjs` : CommonJS 모듈을 ES6으로 변환하여 롤업 번들에 포함\n\n**Note. @rollup/plugin-node-resolve와 함께 사용*\n\n- `@rollup/plugin-node-resolve` : node_modules에 외부 모듈 확인\n\n**Note. @rollup/plugin-commonjs와 함께 사용*\n\n- `@rollup/plugin-terser` : 간결하고 축소된 번들 생성 (띄어쓰기나 주석 제거)\n- `@rollup/plugin-url` : data-URIs, ESM으로 가져옴\n- `@rollup/plugin-virtual` : 메모리에서 가상 모듈을 로드\n\n**Note. Use this plugin before any others such as node-resolve or commonjs, so they do not alter the output.*\n\n- `@svgr/rollup` : svgr 플러그인\n- `builtin-modules` : node.js 빌트인 모듈\n\n- `external` : 특정 모듈을 번들에 포함하지 않고, 외부 모듈로 설정\n\n---\n\n### 각 패키지별 번들링\n\n```javascript\nimport path from 'path';\nimport { generateRollupConfig } from '@repo/rollup-config';\n\nconst __dirname = path.resolve();\n\nexport default generateRollupConfig({ packageDir: __dirname });\n```\n\nutils에서 내보내는 함수 중 프로젝트별로 사용하는곳과 사용하지 않는 곳이 있었는데,\n초기에 번들링과정을 거치지 않았을 때 프로젝트 빌드시 해당 함수를 각 프로젝트에 모두 포함되었다.\n\n번들링 과정을 확인하기 위해 vite.config.js에\n\n```javascript\n{...}\n\n    build: {\n      rollupOptions: {\n        output: {\n          manualChunks: {\n            utils: ['@repo/utils']\n          },\n        },\n      },\n    },\n\n{...}\n```\n\n옵션을 추가해 비교해보았다.\n\n\u003cimg src=\"/assets/blog/javaScript/rollup-1.png\" width=\"100%\" alt=\"bundle-test\"/\u003e\n\u003cimg src=\"/assets/blog/javaScript/rollup-2.png\" width=\"100%\" alt=\"bundle-test\"/\u003e\n\n전, 후 용량에 차이가 있다는걸 확인했고, js파일을 확인해 사용하는 함수만 포함되는었는지 확인해보았다.\n\n---\n\n처음 rollup을 사용해 패키지들을 번들링하면서 tree-shaking이라는 개념도 알게되었고, cjs와 esm의 차이점도 알게되었다.\n\n다른 기업들의 오픈소스들을 뒤져가며 작업을 진행하면서 많은 것을 배울 수 있었던 시간이었다.\n\nrollup 설정에 대해서 아직 완벽하게 이해하지는 못했으며, 내가 의도한대로 작동하는지도 조금 확신이 들지 않지만 이번 기회에 조금 더 깊게 공부해보고 계속해서 확인해보며 수정해나가야겠다.\n개인적으로는 최적화해 나가는 과정이 매우 재밌었던 작업이었다!\n"])</script><script>self.__next_f.push([1,"19:Ta2c,"])</script><script>self.__next_f.push([1,"\n최근 rollup으로 패키지를 만드는 과정에서 cjs와 esm에 대해 알게되었다.\n\n### Module\n자바스크립트의 모듈은 크게 CommonJS와 ES Module로 나뉜다.\n애플리케이션의 규모가 커지면 커질수록 모듈화가 필요해지는데, 이때 모듈화를 위해 사용되는 것이 바로 CommonJS와 ES Module이다.\n\nCommonJS는 Node.js에서 사용되는 모듈 시스템이며 (12버전 이후 부터는 두가지 모두 사용) 정확하게는 표준 시스템은 아니다,\nES6 이후에 ES Module이 등장하면서 표준 시스템이 되었고, 우리가 흔히 사용하는 `import`와 `export`의 키워드를 사용해 모듈을 효율적으로 불러와 사용할 수 있는게 바로 ES Module이다.\n\n그러나 아직까지도 node.js의 CJS가 많이 사용되고 있으므로, 우리가 흔히 사용하는 라이브러리들은 보통 두가지의 모듈 시스템을 모두 지원할 수 있도록 만든다.\n\n---\n\n### cjs와 esm의 차이점\n\n#### cjs\n```javascript\n// lib.js\nmodule.exports = {\n  name: 'lib'\n}\n```\n\n```javascript\n// index.js\nconst lib = require('./lib')\nconsole.log(lib.name) // lib\n```\n\n#### esm\n```javascript\n// lib.js\nexport default {\n  name: 'lib'\n}\n```\n\n```javascript\n// index.js\nimport lib from './lib'\nconsole.log(lib.name) // lib\n```\n\n위의 예시에서 보듯이, cjs는 `module.exports`를 사용하여 모듈을 내보내고, `require`를 사용하여 모듈을 불러온다.\n반면에 esm은 `export`를 사용하여 모듈을 내보내고, `import`를 사용하여 모듈을 불러온다.\n\n- CJS는 동기적으로 동작하고, ESM은 비동기적으로 동작한다.\n- CJS는 빌드 타임에 정적 분석을 적용하기 어렵고, 런타임에서만 모둘 관계를 파악할 수 있다.\n- ESM은 빌드 단계에서 정적 분석을 통해 의존 관계를 파악할 수 있다.\n- CJS는 Tree-shaking이 어렵지만 ESM은 Tree-shaking이 가능하다.\n\n---\n\n### 파일 구분\n\n`.js` 파일이 CJS인지 ESM인지 구분하는 방법은 다음과 같다.\n\n- package.json의 type 필드를 사용한다.\n```json\n{\n  \"type\": \"module\"\n}\n```\n`.js`의 파일은 package.json의 type 필드에 따라 결정되는데\n- type이 module이면 ESM, commonjs이면 CJS로 인식한다. (default는 commonjs)\n- `.cjs`는 commonjs로 인식하고, `.mjs`는 ESM으로 인식한다.\n\n\n---\n참고\n- [toss blog](https://toss.tech/article/commonjs-esm-exports-field)\n- [kakao blog](https://tech.kakao.com/2023/10/19/commonjs-esm-migration/)\n- [CJS](https://nodejs.org/api/modules.html)\n- [ESM](https://nodejs.org/api/esm.html)\n"])</script><script>self.__next_f.push([1,"1a:T1101,"])</script><script>self.__next_f.push([1,"\n자바스크립트에서 원시타입(primitive data type)은 변경 불가능한(immutable)한 값이다.\n\n- Boolean\n- String\n- Number\n- undefined\n- null\n- Symbol\n\n변경이 불가능하다라는 뜻은 메모리 영역에서의 변경이 불가능하다는 뜻이며, 재할당은 가능하다.\n\n---\n\n원시타입 이외의 모든 값은 Object(객체)이다. 객체는 변경 가능한(mutable)한 값이다.\n객체는 변경 가능한(mutable)값이기 때문에 새로운 값을 다시 만들 필요없이 직접 변경이 가능하다.\n\n```javascript\nlet string = \"hello\";\nstring = \"world\";\n```\nstring 변수에 \"hello\"라는 문자열을 할당하고, 다시 \"world\"라는 문자열을 할당했다. 이때, 첫번째 문자열은 메모리에서 사라지고, 새로운 문자열이 메모리에 할당된다.\n\n```javascript\nlet string = \"hello\";\nlet string2 = string.slice(0, 3);\n\n// string = \"hello\"\n// string2 = \"hel\"\n```\nstring 변수에 \"hello\"라는 문자열을 할당하고, string2 변수에 string 변수의 문자열을 복사하여 할당했다. 이때, string 변수의 문자열은 변경되지 않는다.\n\n---\n\n```javascript\nlet arr = [];\n\nlet arr2 = arr.push(1);\n\n// arr = [1]\n```\n\n배열은 객체이기 때문에 변경이 가능하다. 위의 코드에서 arr.push(1)을 통해 arr 배열에 1이라는 원소가 추가되었다. 이때, arr 배열은 변경된다.\n복사본을 리턴하는 메소드가 아닌 push, pop, shift, unshift, splice 등의 메소드는 원본 배열을 변경한다.\n\n```javascript\nlet object = {\n  name: \"been\",\n};\n\nlet object2 = object;\n\nobject2.name = \"been2\";\n\nconsole.log(object.name); // been2\n```\n\n객체는 변경이 가능하기 때문에 object2 변수에 object 변수를 할당하고, object2.name을 변경하면 object.name도 변경된다.\nobject도 동시에 변경되는 이유는 object2에 object를 할당할 때, object2는 object의 메모리 주소를 참조하기 때문이다.\n\nobject에서 불변성을 유지하는 방법은 새로운 객체를 생성하여 값을 할당하는 방법이다.\n\n---\n\n### 불변성을 유지하는 방법\n- Spread Operator(es6)\n- Object.assign()\n- Array.concat()\n- Array.slice()\n- Array.map()\n- Array.filter()\n- Array.reduce()\n...등\n\n```javascript\nlet object = {\n  name: \"been\",\n};\n\nlet object2 = {\n  ...object,\n  name: \"been2\",\n};\n\nconsole.log(object.name); // been\n```\n\nobject2에 object를 복사하여 새로운 객체를 생성하고, name을 변경하였다. 이때, object는 변경되지 않는다.\n\n---\n\n### 리액트에서 불변성을 지키는 이유\n\n리액트를 사용해 개발을 할 때 useState 등을 사용해 상태를 관리 할 때 push, pop, shift, unshift 등의 메소드를 사용하지 않고,\n새로운 배열을 만들어서 상태를 변경하며 자연스럽게 불변성을 지키며 개발을 했다.\n\n리액트에서는 상태값을 업데이트 할 때 얕은비교를 수행해 이전 상태(참조값)와 새로운 상태(참조값)를 비교 한다.\n새로운 참조값을 가진 Object를 생성하므로 이전 참조값에 영향을 주지 않는다.\n\n1. 불변성을 지키면 상태값을 업데이트 할 때 이전 상태와 새로운 상태를 비교하여 변경된 부분만 업데이트 하기 때문에 성능적으로 이점이 있다.\n2. 상태가 의도치않게 변경되는 것을 막을 수 있고, 사이드 이펙트를 사전에 방지하고 예측 가능한 코드를 작성할 수 있다.\n\n- 상태 업데이트\n```javascript\nconst [state, setState] = useState(1);\n\n// 불변성을 지키지 않은 상태 업데이트\n  state = 2;\n  setState(state);\n\n// 불변성을 지킨 상태 업데이트\n  setState(2);\n```\n\n- 배열\n```javascript\nconst [state, setState] = useState([1, 2, 3]);\n\n// 불변성을 지키지 않은 상태 업데이트\n  state.push(4);\n  setState(state);\n\n// 불변성을 지킨 상태 업데이트\n  setState([...state, 4]);\n```\n\n- 객체\n```javascript\nconst [state, setState] = useState({\n  name: \"been\",\n  age: 32,\n});\n\n// 불변성을 지키지 않은 상태 업데이트\n  state.name = \"been2\";\n  setState(state);\n\n// 불변성을 지킨 상태 업데이트\n  setState({\n    ...state,\n    name: \"been2\",\n  });\n```\n\n이처럼 리액트로 개발을 할 때 불변성을 유지함으로써 안정성을 유지하고 성능을 향상시킬 수 있다.\n"])</script><script>self.__next_f.push([1,"1b:Tcc7,"])</script><script>self.__next_f.push([1,"\n로컬 개발환경에서 API 요청시 CORS 에러로 API 사용이 어려울 수 있습니다.\n\n이 글은 Vite로 구성된 로컬 개발환경에서 CORS 문제를 해결하는 방식을 작성합니다.\n\n---\n\n### env\n\n먼저 [환경변수 설정](https://ko.vitejs.dev/guide/env-and-mode.html#modes)이 필요합니다.\n\n```shell\n.env                # 모든 상황에서 사용될 환경 변수\n.env.local          # 모든 상황에서 사용되나, 로컬 개발 환경에서만 사용될(Git에 의해 무시될) 환경 변수\n.env.[mode]         # 특정 모드에서만 사용될 환경 변수\n.env.[mode].local   # 특정 모드에서만 사용되나, 로컬 개발 환경에서만 사용될(Git에 의해 무시될) 환경 변수\n```\n\n위 환경 변수는 따로 커스텀이 가능하지만, 기본적으로 Vite script 명령은 dev → development 모드로 동작하고, build → production 모드로 동작합니다.\n\n따라서 npm run dev로 스크립트를 실행하면 Vite는 .env.development에 정의된 환경변수를 사용합니다.\n\n```shell\n// .env.development\n\nVITE_BASE_URL=/api\nVITE_SERVER_URL=https://dev.example.com/\n```\n\n```shell\n// .env.production\n\nVITE_BASE_URL=/api\nVITE_SERVER_URL=https://example.com/\n```\n\n---\n\n### fetch\n\n[axios](https://axios-http.com/kr/docs/intro) 라이브러리를 사용해 비동기 HTTP 요청을 합니다.\n\n```tsx\nimport axios from 'axios';\n\nconst baseURL = import.meta.env.VITE_BASE_URL;\n\nexport const axiosInstance = axios.create({\n  baseURL,\n});\n```\n\n위에서 설정한 환경변수에서 BASE_URL을 불러와 axios 기본 설정을 진행합니다.\n\n---\n\n### proxy\n\nVite는 vite.config.ts에서 server.proxy를 사용해 [Server Options](https://ko.vitejs.dev/config/server-options.html#server-proxy)을 설정할 수 있습니다.\n\nserver.proxy를 사용하면 브라우저의 요청 → 프록시 서버 → 서버로 전달 되며, 프록시 서버에서 설정한 도메인으로 변환하여 서버에 API 요청을 하게 됩니다.\n\n```tsx\n// vite.config.ts\n\nimport { defineConfig, loadEnv } from 'vite';\nimport react from '@vitejs/plugin-react-swc';\nimport tsconfigPaths from 'vite-tsconfig-paths';\n\n// https://vitejs.dev/config/\nexport default ({ mode }) =\u003e {\n  const isDevelop = mode === 'development';\n  process.env = { ...process.env, ...loadEnv(mode, process.cwd()) };\n\n  return defineConfig({\n    plugins: [react(), tsconfigPaths()],\n    server: isDevelop\n      ? {\n          proxy: {\n            '/api': {\n              target: process.env.VITE_SERVER_URL,\n              changeOrigin: true,\n              secure: false,\n            },\n          },\n        }\n      : undefined,\n  });\n};\n```\n\n일반적으로 production 환경에서는 도메인이 같기 때문에 proxy를 사용하지 않습니다.\n\n따라서, 위의 설정을 예시로 들어 `http://localhost:5173/api/hello` 라는 URL로 요청을 보낼 때 다음과 같은 과정이 진행됩니다.\n\n1. 클라이언트의 요청 URL이 `/api`로 시작되므로 해당 프록시 설정이 적용\n2. 프록시는 `changeOption` 에 의하여 HTTP 요청 헤더의 Host 값을 `https://example.com` 으로 변경\n3. 프록시는 최종적으로 이 요청을 `https://example.com` 라는 URL로 `target` 서버에 전달\n\n"])</script><script>self.__next_f.push([1,"1c:T12dc,"])</script><script>self.__next_f.push([1,"\n## 바벨이란?\n바벨은 자바스크립트 컴파일러이다.\n사실 자세히 보면 컴파일러보다는 트랜스파일러에 가깝다.\n\n자바스크립트를 자바스크립트로 변환해야하는 이유가 뭘까?\n\n자바스크립트는 크롬, 파이어폭스, 사파리, 익스플로러 등 다양한 브라우저에서 사용되는데, 각 브라우저마다 자바스크립트 엔진이 다르다.\n이러한 자바스크립트 엔진은 자바스크립트 코드를 실행하기 위해 자바스크립트 코드를 기계어로 변환하는데, 이 변환 과정에서 각 브라우저마다 다른 방식으로 변환한다.\n이러한 이유로 자바스크립트 코드를 작성할 때는 크로스 브라우징 이슈를 고려해야 한다. 바벨은 이러한 크로스 브라우징 이슈를 해결하기 위해 사용한다.\n\n---\n\n### 컴파일러\n컴파일러란 소스코드를 입력받아 그것을 다른 프로그래밍 언어로 옮기는 것을 말한다.\n예를들어 자바스크립트로 작성한 고급 프로그래밍 언어를 컴퓨터가 이해할 수 있는 어셈블리어로 변환하는 것이다.\n\n### 트랜스파일러\n트랜스파일러란 소스코드를 입력받아 그것을 같은 프로그래밍 언어(유사한 언어)의 다른 버전으로 옮기는 것을 말한다.\n\n---\n\n## 바벨의 동작\n바벨은 ECMAScript2015+ 버전의 코드를 하위 버전의 코드로 변환한다.\n이렇게 변환된 코드는 IE11을 포함한 구형 브라우저에서도 동작한다.\n\n바벨은 세 단계로 빌드를 진행한다.\n1. 파싱(Parsing) : 코드를 읽어서 추상 구문 트리 AST(Abstract Syntax Tree)로 변환한다.\n2. 변환(Transformation) : AST를 원하는 형태로 변환한다.\n3. 출력(Printing) : 변환된 AST를 코드로 출력한다.\n\n먼저 바벨을 설치한다\n```shell\nnpm install -D @babel/core @babel/cli\n```\n\n```javascript\nconst alert = msg =\u003e window.alert(msg);\n```\n\n위 코드를 바벨로 변환하면 아무런 변화가 없다.\n\n```shell\nnpx babel app.js\n```\n\n```javascript\nconst alert = msg =\u003e window.alert(msg);\n```\n\n---\n\n### 바벨 플러그인\n@babel/plugin-transform-block-scoping 플러그인을 사용해보자.\n\n```shell\nnpm install -D @babel/plugin-transform-block-scoping\n```\n\n먼저 root 디렉토리에 babel.config.js 파일을 생성하고\n\n```javascript\n// babel.config.js\n    module.exports = {\n        plugins: [\n            '@babel/plugin-transform-block-scoping'\n        ]\n    }\n```\n\n```javascript\nconst alert = msg =\u003e window.alert(msg);\n```\n\n위 코드를 바벨로 변환하면 아래와 같이 변환된다.\n\n```javascript\nvar alert = msg =\u003e window.alert(msg);\n```\n\n위 플러그인은 const, let 키워드를 var 키워드로 변환한다.\n\n---\n\narrow function과 strict mode를 사용해보자.\n\n```shell\nnpm install -D @babel/plugin-transform-arrow-functions @babel/plugin-transform-strict-mode\n```\n\n위 코드를 바벨로 변환하면 아래와 같이 변환된다.\n\n```javascript\n\"use strict\";\n\nvar alert = function alert(msg) {\n  return window.alert(msg);\n};\n```\n\n---\n\n### 바벨 프리셋\n바벨 프리셋은 바벨 플러그인을 모아놓은 것이다.\n\n위 세가지 플러그인은 아래 프리셋에 모두 포함되어 있다.\n\n```shell\nnpm install -D @babel/preset-env\n```\n\n```javascript\n// babel.config.js\n    module.exports = {\n        presets: [\n            '@babel/preset-env'\n        ]\n    }\n```\n\n```javascript\nconst alert = msg =\u003e window.alert(msg);\n```\n\n위 코드를 바벨로 변환하면 아래와 같이 변환된다.\n\n```javascript\n\"use strict\";\n\nvar alert = function alert(msg) {\n  return window.alert(msg);\n};\n```\n\n추가로 각 프리셋들은 옵션들을 제공하는데\n\n```javascript\n// babel.config.js\n    module.exports = {\n        presets: [\n            [\n                '@babel/preset-env',\n                {\n                    targets: {\n                        chrome: '79',\n                        ie: '11'\n                    },\n                    useBuiltIns: 'usage',\n                    corejs: {\n                        version: 2\n                    }\n                }\n            ]\n        ]\n    }\n```\n위처럼 지원하는 브라우저의 버전을 설정하거나, 폴리필을 사용할지 설정할 수 있다.\n\n---\n\n### 웹팩과 통합\n바벨은 직접 사용하진 않고 웹팩과 같은 모듈 번들러와 통합해서 사용한다.\n\n```shell\nnpm install -D babel-loader\n```\n\n```javascript\n// webpack.config.js\nmodule.exports = {\n    module: {\n        rules: [\n            {\n                test: /\\.js$/,\n                exclude: /node_modules/,\n                loader: 'babel-loader'\n            }\n        ]\n    }\n}\n```\njs 확장자로 끝나는 모든 파일에 babel-loader를 적용한다.\n또 node_modules 디렉토리는 제외한다.\n\n"])</script><script>self.__next_f.push([1,"1d:T2f94,"])</script><script>self.__next_f.push([1,"\n## 웹팩(기본)배경\n- 웹팩은 모던 javascript 어플리케이션을 위한 정적 모듈 번들러이다. 번들러는 웹팩 이외에도 다양한게 있는데 (rollup , esbuild , vite , parcel 등) 웹팩이 가장 오래되었기도하고 많이 사용하고 있기 때문에 이번 기회에 배워보기로 했다.\n\n- Javascript에서 문법 수준에서 모듈을 지원하기 시작한것은 ES2015부터 이다. import/export 구문이 없었던 이전 상황에서는 하나의 함수를 만들었을 때 전역 공간에 노출되어 버그나 오류를 발생시킬 수 있었다.\n\n예를들어 아래와 같은 덧셈 함수는\n\n```javascript\n// math.js\nfunction add(a,b){\n    return a+b;\n}\n```\n\n```javascript\n// app.js\nadd(10,20);\n```\n\n모두 하나의 HTML 파일안에서 로딩해야만 실행된다. math.js가 로딩되면 app.js는 add 함수를 찾고 실행시키는데, add 함수가 전역으로 사용되기 때문에 다른 파일에서 같은 이름의 함수를 사용하면 충돌이 발생할 수 있다.\n\n---\n\n이런 문제를 예방하기위해 IIFE(즉시실행함수) 방식의 스코프를 사용했다.\n\n```javascript\nvar math = math || {}\n\n;(function () {\n  function add(a, b) {\n    return a + b\n  }\n  math.add = add\n})();\n```\n\n함수 스코프를 만들어 외부에서 접근할 수 없도록해 충돌을 막을 수 있었고, 전역에 선언한 math라는 이름만 사용하면 된다.\n\n---\n\n자바스크립트 모듈을 구현하는 대표적인 명세는 AMD와 CommonJS가 있다.\n\n- AMD(Asynchronous Module Definition)는 비동기 방식으로 모듈을 로딩한다. 브라우저 환경에서 주로 사용된다.\n- UMD(Universal Module Definition)는 AMD와 CommonJS를 지원하는 모듈을 만들기 위해 사용된다.\n- CommonJS는 export로 모듈을 만들고 require()함수로 import하는 방식이다. 주로 서버 사이드 플랫폼인 Node.js 환경에서 주로 사용된다.\n\n### CommonJS\n```javascript\n//math.js\nexport function add(a,b){\n    return a+b;\n}\n```\n\n```javascript\n//app.js\nconst math = require('./math.js');\nmath.add(10,20);\n```\n\n### ES2015 표준 모듈 시스템\n```javascript\n//math.js\nexport function add(a,b){\n    return a+b;\n}\n```\n\n```javascript\n//app.js\nimport {add} from './math.js';\nadd(10,20);\n```\n`export` 구문으로 모듈을 만들고 `import` 구문으로 가져올 수 있다.\n\n이러한 방식은 모든 브라우저에서 지원하지 않는다. 따라서 웹팩과 같은 모듈 번들러를 사용해야한다.\n\n---\n\n## 웹팩사용방법\n웹팩은 여러개의 파일을 하나로 합쳐주는 번들러(bundler)이다. 웹팩을 사용하면 자바스크립트뿐만 아니라 css, html, 이미지 등 모든 파일을 모듈로 관리할 수 있다.\n\n웹팩으로 간단하게 작업을 해보자.\n\n먼저 웹팩과 웹팩 터미널 도구인 cli를 설치한다.\n\n```shell\nnpm install -D webpack webpack-cli\n```\n\nroot 디렉토리에 `webpack.config.js` 파일을 생성한다.\n\n```javascript\n//webpack.config.js\nconst path = require('path');\n\nmodule.exports = {\n    mode: 'development',\n    entry: './src/index.js',\n    output: {\n        filename: '[name].js',\n        path: path.resolve(__dirname, './dist'),\n    },\n};\n```\n\n- `mode`는 웹팩의 모드를 설정한다. `development`로 설정하면 개발용으로, `production`으로 설정하면 배포용으로 빌드된다.\n- `entry`는 웹팩이 빌드할 파일인 진입점을 지정한다.\n- `output`은 웹팩이 빌드한 결과물을 저장할 경로와 파일명을 지정한다.\n    - [name]은 entry에 지정한 파일명을 그대로 사용한다.\n    - [hash]는 웹팩이 빌드할 때마다 고유한 해시값을 붙여준다.\n\npackage.json에 빌드 스크립트를 추가한다.\n\n```json\n//package.json\n{\n    \"scripts\": {\n        \"build\": \"webpack\"\n    }\n}\n```\n\n이제 `npm run build` 명령어를 실행하면 웹팩이 빌드를 시작한다.\n\n---\n\n## 웹팩 로더\n웹팩은 자바스크립트 파일 뿐만 아니라 css, html, 이미지 등 모든 파일을 모듈로 관리할 수 있다.\n하지만 웹팩은 자바스크립트 파일만 이해할 수 있기 때문에 css나 html, 이미지 파일을 자바스크립트 파일로 변경해야한다. 이때 사용하는 것이 로더이다.\n\n자주 사용하는 로더\n- css-loader : css 파일을 자바스크립트 파일로 변경한다.\n- style-loader : 자바스크립트로 변경된 스타일을 동적으로 돔에 추가해준다. 주로 css-loader와 함께 사용한다.\n- file-loader : 파일을 모듈로 사용할 수 있게 url 경로를 변경한다.\n- url-loader : 파일을 모듈로 사용할 수 있게 url 경로를 변경하고 파일을 base64로 인코딩한다.\n\n### css-loader\n```shell\nnpm install -D css-loader\n```\n\n웹팩은 모두 모듈로 바라보기 때문에 자바스크립트 뿐만 아니라 스타일시트도 import 구문으로 불러올 수 있다.\n\n```javascript\nimport './style.css';\n```\n\n```css\n// style.css\nbody {\n    background-color: red;\n}\n```\n\n```javascript\n//webpack.config.js\nmodule.exports = {\n    {...}\n  module: {\n    rules: [\n      {\n        test: /\\.css$/, // .css 확장자로 끝나는 모든 파일\n        use: [\"css-loader\"], // css-loader를 적용한다\n      },\n    ],\n  },\n};\n```\n웹팩은 entry에서 모듈을 검색하다가 css 파일을 찾으면 css-loader를 적용한다.\n\n---\n\n### style-loader\n모듈로 변경된 스타일 시트는 돔에 추가되어야 브라우저가 해석한다.\ncss-loader는 css 파일을 자바스크립트 파일로 변경할 뿐 돔에 추가하지는 않는다. 따라서 style-loader를 추가해야한다.\n```shell\nnpm install -D style-loader\n```\n\n```javascript\nmodule.exports = {\n  module: {\n    rules: [\n      {\n        test: /\\.css$/,\n        use: [\"style-loader\", \"css-loader\"],\n      },\n    ],\n  },\n};\n```\nstyle-loader를 css-loader보다 앞에 적용한다. 로더는 배열로 설정하면 뒤 -\u003e 앞 순서대로 로더가 작동한다.\n\n---\n\n### file-loader\ncss 뿐만 아니라 소스코드에서 사용하는 모든 파일들을 모듈로 사용할 수 있게 할 수 있다.\n\n```shell\nnpm install -D file-loader\n```\n\n```javascript\nmodule.exports = {\n  module: {\n    rules: [\n      {\n        test: /\\.(png|jpe?g|gif)$/i, // i는 대소문자 구분없이, 확장자들\n        loader: \"file-loader\",\n        options: {\n          publicPath: \"./dist/\", // prefix를 아웃풋 경로로 지정\n          name: \"[name].[ext]?[hash]\", // 파일명 형식\n        },\n      },\n    ],\n  },\n};\n```\n옵션으로 경로를 지정할 수 있다. `publicPath`는 파일을 참조하는 경로를 지정한다. `name`은 파일명 형식을 지정한다.\n\n---\n\n### url-loader\n파일을 base64로 인코딩하여 문자열 형태로 변환한다. 파일 크기가 작은 파일들은 문자열로 변환하여 파일을 요청하는 횟수를 줄일 수 있다.\n\n```shell\nnpm install -D url-loader\n```\n\n```javascript\nmodule.exports = {\n  module: {\n    rules: [\n      {\n        test: /\\.(png|jpe?g|gif)$/i,\n        loader: \"url-loader\",\n        options: {\n          publicPath: \"./dist/\",\n          name: \"[name].[ext]?[hash]\",\n          limit: 5000, // 5kb 미만 파일만 data url로 처리\n        },\n      },\n    ],\n  },\n};\n```\n\n---\n\nfile-loader와 url-loader는 v5부터 기본적으로 제공하며, `asset`이라는 키워드로 사용할 수 있다.\n\n```javascript\nmodule.exports = {\n  module: {\n    rules: [\n      {\n        test: /\\.(png|jpe?g|gif)$/i,\n        type: \"asset/resource\", // file-loader\n        generator: {\n          filename: \"[name][ext]?[hash]\", // [name]은 파일명, [ext]는 확장자\n        },\n      },\n      {\n        test: /\\.(png|jpe?g|gif)$/i,\n        type: \"asset/inline\", // url-loader\n        generator: {\n          filename: \"[name][ext]?[hash]\",\n        },\n      },\n      {\n        test: /\\.(png|jpe?g|gif)$/i,\n        type: \"asset\", // 기본값은 8kb 미만은 inline, 8kb 이상은 resource\n        generator: {\n          filename: \"[name][ext]?[hash]\",\n        },\n      },\n    ],\n  },\n};\n```\n\n---\n\n## 웹팩 플러그인\n로더는 파일을 해석하고 변환하는 과정에 관여하지만 플러그인은 해당 결과물의 형태를 바꾸는 역할을 한다. 로더는 파일 단위로 처리하는 반면 플러그인은 번들된 결과물을 처리한다.\n번들된 자바스크립트를 난독화 한다거나, 특정 텍스트를 추출할 수 있는 용도로 사용한다.\n\n자주 사용하는 플러그인\n- BannerPlugin : 결과물에 빌드 정보나 버전같은 정보를 추가할 수 있다.\n- DefinePlugin : 환경변수를 설정한다.\n- HtmlWebpackPlugin : HTML 파일을 후처리한다.\n- CleanWebpackPlugin : 이전 빌드 결과물을 제거한다.\n- MiniCssExtractPlugin : CSS 파일을 별도로 추출한다.\n\n---\n\n### BannerPlugin\n```javascript\nconst webpack = require(\"webpack\");\n\nmodule.exports = {\n  plugins: [\n    new webpack.BannerPlugin({\n      banner: () =\u003e `빌드 날짜: ${new Date().toLocaleString()}`,\n    }),\n  ],\n};\n```\n\n---\n\n### DefinePlugin\n개발환경과 운영환경으로 나누어서 작업할 때 환경변수를 설정할 수 있다.\n환경에 의존적인 정보를 소스가 아닌 환경 변수로 관리하면 소스코드를 더욱 안전하고 편리하게 관리할 수 있다.\n\n```javascript\nconst webpack = require(\"webpack\");\n\nmodule.exports = {\n  plugins: [\n    new webpack.DefinePlugin({\n      VERSION: JSON.stringify(\"v.1.2.3\"),\n      PRODUCTION: JSON.stringify(false),\n      MAX_COUNT: JSON.stringify(999),\n      \"api.domain\": JSON.stringify(\"http://dev.api.domain.com\"),\n    }),\n  ],\n};\n```\n\n---\n\n### HtmlWebpackPlugin\n```shell\nnpm install -D html-webpack-plugin\n```\n\n```javascript\nconst HtmlWebpackPlugin = require(\"html-webpack-plugin\");\n\nmodule.exports = {\n  entry: 'index.js',\n  output: {\n    path: path.resolve(__dirname, './dist'),\n    filename: 'index_bundle.js',\n  },\n  plugins: [\n    new HtmlWebpackPlugin({\n      template: \"./src/index.html\", // 템플릿 경로를 지정\n      minify:\n        process.env.NODE_ENV === \"production\"\n          ? {\n              // 빌드 모드가 production일 때만 사용\n              collapseWhitespace: true, // 빈칸 제거\n              removeComments: true, // 주석 제거\n            }\n          : false,\n    }),\n  ],\n};\n```\n\n```html\n\u003c!DOCTYPE html\u003e\n\u003chtml\u003e\n  \u003chead\u003e\n    \u003cmeta charset=\"UTF-8\" /\u003e\n    \u003ctitle\u003ewebpack App\u003c/title\u003e\n  \u003c/head\u003e\n  \u003cbody\u003e\n    \u003cscript src=\"index_bundle.js\"\u003e\u003c/script\u003e\n  \u003c/body\u003e\n\u003c/html\u003e\n```\nscript 태그에 번들링된 결과물을 자동으로 추가해준다. 웹팩 엔트리가 여러개일 경우 여러개의 script 태그를 추가해준다.\n\n---\n\n### CleanWebpackPlugin\n```shell\nnpm install -D clean-webpack-plugin\n```\n\n```javascript\nconst { CleanWebpackPlugin } = require(\"clean-webpack-plugin\");\n\nmodule.exports = {\n  plugins: [new CleanWebpackPlugin()],\n};\n```\n\n---\n\n### MiniCssExtractPlugin\n스타일 시트가 점점 많아짐에 따라 하나의 자바스크립트로 만들면 부담이 될 수 있다.\n번들 결과물에서 스타일시트 코드만 따로 분리하여 별도의 css파일로 만들어주는 플러그인이다.\n\n```shell\nnpm install -D mini-css-extract-plugin\n```\n\n```javascript\nconst MiniCssExtractPlugin = require(\"mini-css-extract-plugin\");\n\nmodule.exports = {\n  module: {\n    rules: [\n      {\n        test: /\\.css$/,\n        use: [MiniCssExtractPlugin.loader, \"css-loader\"],\n      },\n    ],\n  },\n  plugins: [\n    new MiniCssExtractPlugin({\n      filename: \"[name].css\",\n    }),\n  ],\n};\n```\n\n운영 환경에서는 `MiniCssExtractPlugin.loader`를 사용해 스타일시트를 별도의 파일로 분리한다. 개발 환경에서는 `style-loader`를 사용해 동적으로 돔에 추가한다.\n\n---\n\n웹팩의 로더와 플러그인의 원리, 사용방법에 대해서 알아보았다.\n\n우리가 편리하고 쉽게 사용하는 Create-React-App는 웹팩으로 빌드된 결과물을 제공해준다.\n하지만 기본적인 웹팩으로 설정되어있고, 직접 커스텀하려면 eject를 해야한다.\n\n이번 기회에 웹팩의 원리와 기본적인 사용방법을 알아보았다.\n"])</script><script>self.__next_f.push([1,"1e:Te9a,"])</script><script>self.__next_f.push([1,"\n### React Native geolocation\n\n사이드 프로젝트에 위치정보를 받아와야 하는 기능이 필요해 지오로케이션을 받아 오도록 했다.\n\n### 설치\n\nhttps://www.npmjs.com/package/react-native-geolocation-service\n\n```bash\nyarn add react-native-geolocation-service\n```\n\n---\n\n### IOS\n- 먼저 xcode를 열고 swift 파일을 생성해준다.\n\n\u003cdiv style={{ display: \"flex\", gap: '10px' }}\u003e\n    \u003cimg src=\"/assets/blog/javaScript/rn-geolocation.png\" width=\"49%\" style={{ maxWidth: '40%'}} alt=\"post image\"/\u003e\n    \u003cimg src=\"/assets/blog/javaScript/rn-geolocation-2.png\" width=\"49%\" style={{ maxWidth: '59%'}} alt=\"post image\"/\u003e\n\u003c/div\u003e\n\n프로젝트 폴더에 swift 파일을 생성해주고 Create Bridging Header 를 선택해준다.\n\n---\n\n- 디바이스에서 위치정보를 받아오려면 권한 설정이 필요하다.\n\n```\n// ios/[projectName]/info.plist\n\n\u003ckey\u003eNSLocationAlwaysAndWhenInUseUsageDescription\u003c/key\u003e\n\u003cstring\u003e서비스를 제공하는 업체 위치를 확인을 위한 위치기반 정보 서비스를 이용할 수 있습니다.\u003c/string\u003e\n\u003ckey\u003eNSLocationAlwaysUsageDescription\u003c/key\u003e\n\u003cstring\u003e서비스를 제공하는 업체 위치를 확인을 위한 위치기반 정보 서비스를 이용할 수 있습니다.\u003c/string\u003e\n\u003ckey\u003eNSLocationWhenInUseUsageDescription\u003c/key\u003e\n\u003cstring\u003e서비스를 제공하는 업체 위치를 확인을 위한 위치기반 정보 서비스를 이용할 수 있습니다.\u003c/string\u003e\n```\n\n---\n\n\u003cdiv style={{ display: \"flex\", gap: '10px' }}\u003e\n    \u003cimg src=\"/assets/blog/javaScript/rn-geolocation-3.png\" width=\"49%\" style={{ maxWidth: '40%'}} alt=\"post image\"/\u003e\n    \u003cimg src=\"/assets/blog/javaScript/rn-geolocation-4.png\" width=\"49%\" style={{ maxWidth: '59%'}} alt=\"post image\"/\u003e\n\u003c/div\u003e\n\n- 백그라운드에서도 위치정보를 가져오려면 워크스페이스에서 위와 같이 Location updates에 체크해 설정한다.\n\n---\n\n### Android\n\n- 안드로이드도 마찬가지로 권한 설정이 필요하다.\n\n```xml\n// android/app/src/main/AndroidManifest.xml\n\n\u003cuses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\" /\u003e\n\u003cuses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\" /\u003e\n```\n\n---\n\n### 사용법\n\n```tsx\n  useEffect(() =\u003e {\n    if (Platform.OS === 'ios') {\n      Geolocation.requestAuthorization('always');\n    } else {\n      PermissionsAndroid.requestMultiple([\n        PermissionsAndroid.PERMISSIONS.ACCESS_COARSE_LOCATION,\n        PermissionsAndroid.PERMISSIONS.ACCESS_FINE_LOCATION,\n      ]);\n    }\n  }, []);\n```\n\n- requestAuthorization로 위치정보 권한을 요청합니다.\n\n---\n\n### 가장 많이 쓰이는 세가지 API\n\n- getCurrentPosition(successCallback, ?errorCallback, ?options) - 최신 위치정보 호출 (한번)\n- watchPosition(successCallback, ?errorCallback, ?options) - 지속적으로 호출\n- clearWatch(watchId)\n\n```tsx\nimport Geolocation from 'react-native-geolocation-service';\n\nconst MyApp = () =\u003e {\n    const [location, setLocation] = useState\u003cILocation | undefined\u003e(undefined);\n\n    useEffect(() =\u003e {\n        const _watchId = Geolocation.watchPosition(\n          position =\u003e {\n            const {latitude, longitude} = position.coords;\n            setLocation({latitude, longitude});\n          },\n          error =\u003e {\n            console.log(error);\n          },\n          {\n            enableHighAccuracy: true,\n            distanceFilter: 0,\n            interval: 5000,\n            fastestInterval: 2000,\n          },\n        );\n\n        return () =\u003e {\n          if (_watchId) {\n            Geolocation.clearWatch(_watchId);\n          }\n        };\n      }, []);\n\n    return \u003c\u003e\u003c/\u003e;\n}\n\n```\n\n다음 포스팅에서는 받아온 위치정보를 webview로 넘겨주는 방법에 대해 알아보자!\n\n\n"])</script><script>self.__next_f.push([1,"1f:T9c4,"])</script><script>self.__next_f.push([1,"\n### 딥링크\n- 딥링크는 모바일에서 특정 페이지에 도달 할 수 있는 링크를 의미한다.\n- 웹이나 sns등 링크를 클릭했을때 해당 어플리케이션 앱으로 바로 이동하는데, 이런 방식을 모바일 딥링크라 하고 특정한 앱 스크린으로 이동하는 것\n\n- 딥링크는 URL 스킴, https://, 두가지 형태를 지원한다.\n- ex) `app://example.my.app`, `https://www.example.com`\n\n```shell\nyarn add @react-native-firebase/dynamic-links\n```\n\n```jsx\nimport { Linking } from 'react-native';\nimport dynamicLinks from '@react-native-firebase/dynamic-links';\n```\n\n\n### ios\n\nios \u003e [프로젝트] \u003e AppDelegate.mm\n\n```swift\n#import \u003cReact/RCTLinkingManager.h\u003e\n\n{...}\n\n- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url options:(NSDictionary\u003cUIApplicationOpenURLOptionsKey,id\u003e *)options {\n  return [RCTLinkingManager application:application openURL:url options:options];\n}\n```\n\nxcode로 가 Identifier 프로젝트에 Bundle ID를 넣고,\nURL Schemes에 프로토콜을 정의한다.\n\n### android\n\nandroid \u003e app \u003e src \u003e main \u003e AndroidManifest.xml\n\n```xml\n  \u003cintent-filter\u003e\n    \u003caction android:name=\"android.intent.action.MAIN\" /\u003e\n    \u003ccategory android:name=\"android.intent.category.LAUNCHER\" /\u003e\n  \u003c/intent-filter\u003e\n\n  \u003cintent-filter\u003e\n    \u003caction android:name=\"android.intent.action.VIEW\" /\u003e\n    \u003ccategory android:name=\"android.intent.category.DEFAULT\" /\u003e\n    \u003ccategory android:name=\"android.intent.category.BROWSABLE\" /\u003e\n    \u003cdata\n      android:host=\"example.com\"\n      android:pathPrefix=\"/\"\n      android:scheme=\"https\" /\u003e\n  \u003c/intent-filter\u003e\n```\n\n\n### URL 처리\n\n```jsx\nconst handleDynamicLink = async () =\u003e {\n  const initialLink = await dynamicLinks().getInitialLink();\n  if (initialLink) {\n    console.log('initialLink', initialLink);\n  }\n};\n\nuseEffect(() =\u003e {\n  handleDynamicLink();\n}, []);\n```\n\n### WebView 이슈\n\n앱이 죽어있는 상태로 외부에서 딥링크를 클릭했을 때 앱이 켜지고 해당 페이지로 이동하는데, 이때 WebView가 렌더링 되지 않는 이슈가 있다.\n\n```jsx\n// 앱이 처음 시작시 초기화\nuseEffect(() =\u003e {\n  const getInitURL = async () =\u003e {\n    const initURL = await Linking.getInitialURL();\n    if (initURL) {\n      ...process\n    }\n  };\n  getInitURL();\n}, []);\n\n// 앱이 열려있는 상태\nuseEffect(() =\u003e {\n  Linking.addEventListener('url', e =\u003e {\n      if(e.url){\n          ...process\n      }\n  });\n  return () =\u003e Linking.removeAllListeners('url');\n}, [])\n```\n"])</script><script>self.__next_f.push([1,"20:T2147,"])</script><script>self.__next_f.push([1,"\n이전에 [스벨트킷으로 블로그 만들어보기](https://wonbeenna.github.io/blog/javaScript/svelte-blog) 에서 svelte kit으로 블로그를 만들었었다.\n\n그때는 svelte 공부겸 블로그를 만들었지만, 업무에서 주로 사용하는 스택인 react와 next.js를 사용하여 블로그를 만들어보려고 한다.\n\n### 시작\n---\n```shell\nnpx create-next-app \u003cproject-name\u003e\n```\n\nnext.js 프로젝트를 생성한다.\n\n### 라우팅\n---\n\u003cimg src=\"/assets/blog/javaScript/route.png\" style={{\n    maxWidth: \"300px\",\n    height: \"auto\"\n}} alt=\"next-blog-route\" /\u003e\n\napp 폴더 구조는 위와 같다.\n\n- root layout을 만들어 Header, Footer를 구성한다.\n- page/[page]는 블로그의 메인이며 페이지네이션을 위해 동적으로 구성하였다.\n- blog/[category]/[slug]는 카테고리별로 블로그를 구분하고, slug를 통해 각 post를 구분한다.\n\n### 블로그 포스트\n\nroot layout을 만들었으니, 이제 블로그 포스트를 만들어보자.\n\nroot 디렉토리에 _posts폴더를 만들고 그 안에 markdown 파일을 만든다.\n\n\n```shell\nnpm install gray-matter\n```\n\ngray-matter는 markdown 파일의 front matter를 파싱하는 라이브러리이다.\n\n```ts\nimport path from 'path';\nimport * as fs from 'fs';\nimport matter from 'gray-matter';\nimport { getSerialize } from '@/utils/sirialize';\n\nexport const POSTS_PATH = path.join(process.cwd(), '_posts');\n\nexport const postFilePaths = fs.readdirSync(POSTS_PATH).filter((path) =\u003e /\\.mdx?$/.test(path));\n\nexport const getAllPost = (\n  category?: string,\n  paging: { page: string; limit?: string } = {\n    page: '1',\n    limit: '10'\n  }\n) =\u003e {\n  let total = postFilePaths.length;\n  let posts = postFilePaths\n    .map((filePath) =\u003e {\n      const source = fs.readFileSync(path.join(POSTS_PATH, filePath));\n      const { content, data } = matter(source);\n      const slug = filePath.replace(/\\.mdx?$/, '');\n\n      return {\n        content,\n        data,\n        slug\n      };\n    })\n    .sort((a, b) =\u003e {\n      return new Date(b.data.date).getTime() - new Date(a.data.date).getTime();\n    });\n\n  if (category) {\n    posts = posts.filter((post) =\u003e post.data.category === category);\n    total = posts.length;\n  }\n\n  if (!paging.page) {\n    paging.page = '1';\n    paging.limit = '10';\n  }\n\n  if (paging.limit === '-1') {\n    return {\n      posts,\n      total\n    };\n  }\n\n  const { page = '1', limit = '10' } = paging;\n  const offset = (+page - 1) * +limit;\n\n  posts = posts.slice(offset, offset + +limit);\n\n  return {\n    posts,\n    total\n  };\n};\n```\n\nfile path를 통해 _posts폴더 내 markdown 파일을 읽어오고, gray-matter를 통해 front matter를 파싱한다.\n\n메인과 blog 페이지를 구성하기위해 getAllPost 함수를 만들었고, 각각의 블로그들은 getPost 함수를 통해 가져온다.\n\n```ts\nexport const getPost = async (slug: string) =\u003e {\n  const allPost = getAllPost(undefined, {\n    page: '1',\n    limit: '-1'\n  });\n\n  const index = allPost.posts.findIndex((post) =\u003e post.slug === slug);\n  const prevPost = allPost.posts[index + 1];\n  const nextPost = allPost.posts[index - 1];\n\n  const source = fs.readFileSync(path.join(POSTS_PATH, `${slug}.mdx`));\n\n  const { content, data } = matter(source);\n  const mdx = await getSerialize(content, data);\n\n  return {\n    mdx,\n    content,\n    data,\n    slug,\n    prevPost: {\n      slug: prevPost?.slug,\n      title: prevPost?.data.title,\n      category: prevPost?.data.category\n    },\n    nextPost: {\n      slug: nextPost?.slug,\n      title: nextPost?.data.title,\n      category: nextPost?.data.category\n    }\n  };\n};\n```\n\n```shell\nnpm i next-mdx-remote\n```\n\nnext-mdx-remote는 mdx 파일을 html로 변환해주는 라이브러리이다.\n\n위 코드에서 getSerialize 함수는 mdx 파일을 html로 변환해주는 함수이다.\n\nhtml로 변환하는데 있어 remark와 rehype를 사용할 수 있다.\n\n```ts\nimport { serialize } from 'next-mdx-remote/serialize';\nimport remarkGfm from 'remark-gfm';\nimport rehypePrism from 'rehype-prism-plus';\n\nexport const getSerialize = async (content: string, data: any) =\u003e {\n  return await serialize(content, {\n    mdxOptions: {\n      remarkPlugins: [remarkGfm],\n      rehypePlugins: [rehypePrism]\n    },\n    scope: data\n  });\n};\n```\n\n```tsx\n\u003cMDXRemote {...source} components={components} /\u003e\n```\n\n위에서 변환된 html을 MDXRemote 컴포넌트를 통해 렌더링한다.\n\n### 카테고리\n---\n\n카테고리 별로 필터하기위해 카테고리도 따로 받아와야 했다.\n각각의 post들을 읽고 중복되지 않은 카테고리들만 가져오는 함수를 만들었다.\n\n```ts\nimport { getAllPost } from '@/utils/getPost';\n\nexport const getCategories = (): {\n  title: string;\n  count: number;\n}[] =\u003e {\n  const posts = getAllPost(undefined, { page: '1', limit: '-1' });\n\n  let uniqueCategories: any = {};\n\n  posts.posts.forEach((post) =\u003e {\n    if (uniqueCategories.hasOwnProperty(post.data.category)) {\n      uniqueCategories[post.data.category].count += 1;\n    } else {\n      uniqueCategories[post.data.category] = {\n        title: post.data.category,\n        count: 1\n      };\n    }\n  });\n\n  return Object.values(uniqueCategories).sort((a, b) =\u003e a.title \u003e b.title);\n};\n\n```\n\n### 페이지\n---\n위에서 구성한 함수들을 페이지에서 사용해보자.\n\n```tsx\nexport const generateStaticParams = async () =\u003e {\n  const posts = getAllPost(undefined, {\n    page: '1',\n    limit: '-1'\n  });\n\n  return Array.from({ length: Math.ceil(posts.total / 10) }, (_, i) =\u003e {\n    return {\n      page: (i + 1).toString()\n    };\n  });\n};\n\nconst Page = ({ params }: { params: { page: string } }) =\u003e {\n  return \u003cPostListContainer page={params.page} /\u003e;\n};\n\nexport default Page;\n```\n\n```tsx\n// blog/[category]/[slug].tsx\nexport const generateStaticParams = async () =\u003e {\n  const posts = getAllPost(undefined, {\n    page: '1',\n    limit: '-1'\n  });\n\n  return posts.posts.map((post) =\u003e {\n    return {\n      slug: post.slug,\n      category: post.data.category\n    };\n  });\n};\n```\n\napp 라우트에서 SSG를 사용하기 위해 generateStaticParams 함수가 필요했다.\nPostListContainer 컴포넌트를 통해 각 page들을 렌더링 하였고, generateStaticParams 함수를 통해 페이지네이션을 위한 params들을 생성하였다.\n\n### SEO\n---\n\nseo를 위해 meta 태그와 sitemap, robots를 생성했다.\n\nnext 13 에서는 간단하게 위 세가지를 구성할 수 있었다.\n\n먼저 sitemap.ts를 app 폴더에 만들고\n\n```ts\nimport { getAllPost } from '@/utils/getPost';\nimport { MetadataRoute } from 'next';\n\nconst defaultUrl = process.env.NEXT_PUBLIC_BASE_URL;\nconst pageRoutes = [`${defaultUrl}`, `${defaultUrl}/blog`, `${defaultUrl}/about`];\n\nexport default function sitemap(): MetadataRoute.Sitemap {\n  const posts = getAllPost(undefined, {\n    page: '1',\n    limit: '-1'\n  });\n\n  const defaultRoutes: MetadataRoute.Sitemap = pageRoutes.map((route) =\u003e {\n    return {\n      url: route,\n      lastModified: new Date().toISOString(),\n      changeFrequency: 'weekly',\n      priority: 1\n    };\n  });\n\n  const postRoutes: MetadataRoute.Sitemap = posts.posts.map((post) =\u003e {\n    return {\n      url: `${defaultUrl}/blog/${post.data.category}/${post.slug}`,\n      lastModified: new Date(post.data.date).toISOString(),\n      changeFrequency: 'weekly',\n      priority: 1\n    };\n  });\n\n  return [...defaultRoutes, ...postRoutes];\n}\n```\n처럼 함수를 만들면 sitemap이 생성된다.\n\nrobots도 마찬가지로 app 폴더에 robots.ts를 만들고\n\n```ts\nimport { MetadataRoute } from 'next';\n\nexport default function robots(): MetadataRoute.Robots {\n  return {\n    rules: {\n      userAgent: '*',\n      allow: '/'\n    },\n    sitemap: 'https://wonbeenna.github.io/sitemap.xml'\n  };\n}\n```\n\n위와 같이 작성하면 된다.\n\nmetadata는 각 페이지에서 generateMetadata 함수를 통해 생성하면 된다.\n\n```ts\nexport const generateMetadata = async ({ params }: { params: { page: string } }) =\u003e {\n  return {\n    title: `Been blog - ${params.page}`,\n    openGraph: {\n      ...defaultOpenGraph,\n      title: `Been blog - ${params.page}`,\n      description: `Been dev-note - ${params.page}`,\n      url: `${process.env.NEXT_PUBLIC_BASE_URL}/page/${params.page}`\n    }\n  };\n};\n```\n\n### 댓글\n---\n\n댓글은 giscus를 사용했다.\n\ngiscus는 github Discussions으로 댓글로 사용할 수 있게 해주는 라이브러리이다.\n\n```shell\nnpm i @giscus/react\n```\n\n[giscus](https://giscus.app/ko)\n\n위 문서에 쉽게 설명되어 있으니 생략!\n\n\n\n\n\n"])</script><script>self.__next_f.push([1,"a:[\"$\",\"section\",null,{\"className\":\"flex flex-col-reverse md:relative md:flex-row\",\"children\":[[\"$\",\"$L16\",null,{\"posts\":{\"posts\":[{\"content\":\"$17\",\"data\":{\"title\":\"IOS 웹뷰에서 safe area 설정하기\",\"date\":\"$D2024-07-02T00:00:00.000Z\",\"description\":\"IOS 웹뷰에서 safe area 를 설정하는 방법\",\"category\":\"javaScript\",\"titleImage\":\"/assets/postIcon/javascript.png\"},\"slug\":\"webview-safe-area\"},{\"content\":\"$18\",\"data\":{\"title\":\"rollup으로 번들링하는 과정\",\"date\":\"$D2024-03-09T00:00:00.000Z\",\"description\":\"처음 rollup으로 번들링하는 과정에서 겪은 문제들과 해결방법\",\"category\":\"javaScript\",\"titleImage\":\"/assets/postIcon/rollup-logo.svg\"},\"slug\":\"rollup\"},{\"content\":\"$19\",\"data\":{\"title\":\"cjs와 esm\",\"date\":\"$D2024-03-07T00:00:00.000Z\",\"description\":\"rollup으로 번들링하는 과정에서 알게된 cjs와 esm의 차이점에 대해\",\"category\":\"javaScript\",\"titleImage\":\"/assets/postIcon/javascript.png\"},\"slug\":\"module-system\"},{\"content\":\"$1a\",\"data\":{\"title\":\"리액트에서 불변성을 지키는 이유\",\"date\":\"$D2024-02-25T00:00:00.000Z\",\"description\":\"리액트에서 불변성을 지키는 이유\",\"category\":\"javaScript\",\"titleImage\":\"/assets/postIcon/logo192.png\"},\"slug\":\"react-immutable\"},{\"content\":\"$1b\",\"data\":{\"title\":\"Vite proxy 설정\",\"date\":\"$D2024-01-18T00:00:00.000Z\",\"description\":\"Vite 로컬환경에서 CORS 문제 해결하기\",\"category\":\"javaScript\",\"titleImage\":\"/assets/postIcon/logo192.png\"},\"slug\":\"vite-proxy\"},{\"content\":\"$1c\",\"data\":{\"title\":\"바벨 사용해보기\",\"date\":\"$D2023-12-01T00:00:00.000Z\",\"description\":\"바벨 기본 동작과 사용방법\",\"category\":\"javaScript\",\"titleImage\":\"/assets/postIcon/babel-icon.svg\"},\"slug\":\"babel\"},{\"content\":\"$1d\",\"data\":{\"title\":\"웹팩 기본 사용법 (1)\",\"date\":\"$D2023-11-30T00:00:00.000Z\",\"description\":\"처음 접해보는 웹팩의 원리와 기본 사용 방법\",\"category\":\"javaScript\",\"titleImage\":\"/assets/postIcon/webpack-icon.svg\"},\"slug\":\"webpack-1\"},{\"content\":\"$1e\",\"data\":{\"title\":\"React Native geolocation\",\"date\":\"$D2023-10-25T00:00:00.000Z\",\"description\":\"React Native 위치정보 받아오기\",\"category\":\"javaScript\",\"titleImage\":\"/assets/postIcon/logo192.png\"},\"slug\":\"rn-geolocation\"},{\"content\":\"$1f\",\"data\":{\"title\":\"React Native Deep Linking\",\"date\":\"$D2023-10-17T00:00:00.000Z\",\"description\":\"React Native Deep Linking 연결\",\"category\":\"javaScript\",\"titleImage\":\"/assets/postIcon/logo192.png\"},\"slug\":\"rn-deep-link\"},{\"content\":\"$20\",\"data\":{\"title\":\"Next.js 블로그 만들기\",\"date\":\"$D2023-10-09T00:00:00.000Z\",\"description\":\"Next.js로 블로그 만들기\",\"category\":\"javaScript\",\"titleImage\":\"/assets/postIcon/Nextjs.svg\"},\"slug\":\"next-blog\"}],\"total\":39},\"page\":\"$undefined\",\"category\":\"$undefined\"}],[\"$\",\"ul\",null,{\"className\":\"relative top-0 flex h-fit min-w-fit flex-row flex-wrap gap-[20px] py-[20px] pl-0 md:sticky md:top-[100px] md:flex-col md:flex-nowrap md:py-0 md:pl-[30px]\",\"children\":[[\"$\",\"h2\",null,{\"className\":\"hidden text-[18px] font-bold md:inline\",\"children\":\"Category\"}],[[\"$\",\"li\",\"javaScript\",{\"children\":[\"$\",\"$Ld\",null,{\"className\":\"text-gray700\",\"href\":\"/blog/javaScript\",\"children\":\"javaScript (36)\"}]}],[\"$\",\"li\",\"study\",{\"children\":[\"$\",\"$Ld\",null,{\"className\":\"text-gray700\",\"href\":\"/blog/study\",\"children\":\"study (2)\"}]}],[\"$\",\"li\",\"til\",{\"children\":[\"$\",\"$Ld\",null,{\"className\":\"text-gray700\",\"href\":\"/blog/til\",\"children\":\"til (1)\"}]}]]]}]]}]\n"])</script><script>self.__next_f.push([1,"14:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Been blog\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"Been dev-note\"}],[\"$\",\"meta\",\"4\",{\"name\":\"google-site-verification\",\"content\":\"BirkRt7C7FYMLW96RbXad2EtPdcl0-_ti9xCRkCHa5U\"}],[\"$\",\"meta\",\"5\",{\"name\":\"naver-site-verification\",\"content\":\"58945b2bbe2fe86252fa8c7b204b40f6019920e9\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:title\",\"content\":\"Been blog\"}],[\"$\",\"meta\",\"7\",{\"property\":\"og:description\",\"content\":\"Been dev-note\"}],[\"$\",\"meta\",\"8\",{\"property\":\"og:url\",\"content\":\"https://wonbeenna.github.io\"}],[\"$\",\"meta\",\"9\",{\"property\":\"og:site_name\",\"content\":\"Been blog\"}],[\"$\",\"meta\",\"10\",{\"property\":\"og:locale\",\"content\":\"ko_KR\"}],[\"$\",\"meta\",\"11\",{\"property\":\"og:image\",\"content\":\"https://wonbeenna.github.io/favicon.png\"}],[\"$\",\"meta\",\"12\",{\"property\":\"og:image:width\",\"content\":\"800\"}],[\"$\",\"meta\",\"13\",{\"property\":\"og:image:height\",\"content\":\"600\"}],[\"$\",\"meta\",\"14\",{\"property\":\"og:image:alt\",\"content\":\"Been blog\"}],[\"$\",\"meta\",\"15\",{\"property\":\"og:type\",\"content\":\"website\"}],[\"$\",\"meta\",\"16\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"17\",{\"name\":\"twitter:title\",\"content\":\"Been blog\"}],[\"$\",\"meta\",\"18\",{\"name\":\"twitter:description\",\"content\":\"Been dev-note\"}],[\"$\",\"meta\",\"19\",{\"name\":\"twitter:image\",\"content\":\"https://wonbeenna.github.io/favicon.png\"}],[\"$\",\"meta\",\"20\",{\"name\":\"twitter:image:width\",\"content\":\"800\"}],[\"$\",\"meta\",\"21\",{\"name\":\"twitter:image:height\",\"content\":\"600\"}],[\"$\",\"meta\",\"22\",{\"name\":\"twitter:image:alt\",\"content\":\"Been blog\"}],[\"$\",\"link\",\"23\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"192x192\"}],[\"$\",\"meta\",\"24\",{\"name\":\"next-size-adjust\"}]]\n"])</script><script>self.__next_f.push([1,"9:null\n"])</script><script>self.__next_f.push([1,""])</script></body></html>